(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function zu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function q0(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var o=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:function(){return r[s]}})}),t}var eu={exports:{}},Qi={},tu={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nf;function K0(){if(Nf)return Ue;Nf=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.iterator;function v(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,j={};function k(C,K,be){this.props=C,this.context=K,this.refs=j,this.updater=be||b}k.prototype.isReactComponent={},k.prototype.setState=function(C,K){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,K,"setState")},k.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function D(){}D.prototype=k.prototype;function P(C,K,be){this.props=C,this.context=K,this.refs=j,this.updater=be||b}var R=P.prototype=new D;R.constructor=P,_(R,k.prototype),R.isPureReactComponent=!0;var U=Array.isArray,H=Object.prototype.hasOwnProperty,z={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function G(C,K,be){var ve,xe={},re=null,Ee=null;if(K!=null)for(ve in K.ref!==void 0&&(Ee=K.ref),K.key!==void 0&&(re=""+K.key),K)H.call(K,ve)&&!q.hasOwnProperty(ve)&&(xe[ve]=K[ve]);var Z=arguments.length-2;if(Z===1)xe.children=be;else if(1<Z){for(var ee=Array(Z),oe=0;oe<Z;oe++)ee[oe]=arguments[oe+2];xe.children=ee}if(C&&C.defaultProps)for(ve in Z=C.defaultProps,Z)xe[ve]===void 0&&(xe[ve]=Z[ve]);return{$$typeof:r,type:C,key:re,ref:Ee,props:xe,_owner:z.current}}function fe(C,K){return{$$typeof:r,type:C.type,key:K,ref:C.ref,props:C.props,_owner:C._owner}}function O(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function he(C){var K={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(be){return K[be]})}var A=/\/+/g;function Y(C,K){return typeof C=="object"&&C!==null&&C.key!=null?he(""+C.key):K.toString(36)}function ne(C,K,be,ve,xe){var re=typeof C;(re==="undefined"||re==="boolean")&&(C=null);var Ee=!1;if(C===null)Ee=!0;else switch(re){case"string":case"number":Ee=!0;break;case"object":switch(C.$$typeof){case r:case e:Ee=!0}}if(Ee)return Ee=C,xe=xe(Ee),C=ve===""?"."+Y(Ee,0):ve,U(xe)?(be="",C!=null&&(be=C.replace(A,"$&/")+"/"),ne(xe,K,be,"",function(oe){return oe})):xe!=null&&(O(xe)&&(xe=fe(xe,be+(!xe.key||Ee&&Ee.key===xe.key?"":(""+xe.key).replace(A,"$&/")+"/")+C)),K.push(xe)),1;if(Ee=0,ve=ve===""?".":ve+":",U(C))for(var Z=0;Z<C.length;Z++){re=C[Z];var ee=ve+Y(re,Z);Ee+=ne(re,K,be,ee,xe)}else if(ee=v(C),typeof ee=="function")for(C=ee.call(C),Z=0;!(re=C.next()).done;)re=re.value,ee=ve+Y(re,Z++),Ee+=ne(re,K,be,ee,xe);else if(re==="object")throw K=String(C),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Ee}function le(C,K,be){if(C==null)return C;var ve=[],xe=0;return ne(C,ve,"","",function(re){return K.call(be,re,xe++)}),ve}function me(C){if(C._status===-1){var K=C._result;K=K(),K.then(function(be){(C._status===0||C._status===-1)&&(C._status=1,C._result=be)},function(be){(C._status===0||C._status===-1)&&(C._status=2,C._result=be)}),C._status===-1&&(C._status=0,C._result=K)}if(C._status===1)return C._result.default;throw C._result}var pe={current:null},W={transition:null},X={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:W,ReactCurrentOwner:z};function V(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:le,forEach:function(C,K,be){le(C,function(){K.apply(this,arguments)},be)},count:function(C){var K=0;return le(C,function(){K++}),K},toArray:function(C){return le(C,function(K){return K})||[]},only:function(C){if(!O(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ue.Component=k,Ue.Fragment=t,Ue.Profiler=o,Ue.PureComponent=P,Ue.StrictMode=s,Ue.Suspense=f,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Ue.act=V,Ue.cloneElement=function(C,K,be){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var ve=_({},C.props),xe=C.key,re=C.ref,Ee=C._owner;if(K!=null){if(K.ref!==void 0&&(re=K.ref,Ee=z.current),K.key!==void 0&&(xe=""+K.key),C.type&&C.type.defaultProps)var Z=C.type.defaultProps;for(ee in K)H.call(K,ee)&&!q.hasOwnProperty(ee)&&(ve[ee]=K[ee]===void 0&&Z!==void 0?Z[ee]:K[ee])}var ee=arguments.length-2;if(ee===1)ve.children=be;else if(1<ee){Z=Array(ee);for(var oe=0;oe<ee;oe++)Z[oe]=arguments[oe+2];ve.children=Z}return{$$typeof:r,type:C.type,key:xe,ref:re,props:ve,_owner:Ee}},Ue.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:a,_context:C},C.Consumer=C},Ue.createElement=G,Ue.createFactory=function(C){var K=G.bind(null,C);return K.type=C,K},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(C){return{$$typeof:d,render:C}},Ue.isValidElement=O,Ue.lazy=function(C){return{$$typeof:x,_payload:{_status:-1,_result:C},_init:me}},Ue.memo=function(C,K){return{$$typeof:p,type:C,compare:K===void 0?null:K}},Ue.startTransition=function(C){var K=W.transition;W.transition={};try{C()}finally{W.transition=K}},Ue.unstable_act=V,Ue.useCallback=function(C,K){return pe.current.useCallback(C,K)},Ue.useContext=function(C){return pe.current.useContext(C)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(C){return pe.current.useDeferredValue(C)},Ue.useEffect=function(C,K){return pe.current.useEffect(C,K)},Ue.useId=function(){return pe.current.useId()},Ue.useImperativeHandle=function(C,K,be){return pe.current.useImperativeHandle(C,K,be)},Ue.useInsertionEffect=function(C,K){return pe.current.useInsertionEffect(C,K)},Ue.useLayoutEffect=function(C,K){return pe.current.useLayoutEffect(C,K)},Ue.useMemo=function(C,K){return pe.current.useMemo(C,K)},Ue.useReducer=function(C,K,be){return pe.current.useReducer(C,K,be)},Ue.useRef=function(C){return pe.current.useRef(C)},Ue.useState=function(C){return pe.current.useState(C)},Ue.useSyncExternalStore=function(C,K,be){return pe.current.useSyncExternalStore(C,K,be)},Ue.useTransition=function(){return pe.current.useTransition()},Ue.version="18.3.1",Ue}var Cf;function $u(){return Cf||(Cf=1,tu.exports=K0()),tu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef;function G0(){if(Ef)return Qi;Ef=1;var r=$u(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,f,p){var x,y={},v=null,b=null;p!==void 0&&(v=""+p),f.key!==void 0&&(v=""+f.key),f.ref!==void 0&&(b=f.ref);for(x in f)s.call(f,x)&&!a.hasOwnProperty(x)&&(y[x]=f[x]);if(d&&d.defaultProps)for(x in f=d.defaultProps,f)y[x]===void 0&&(y[x]=f[x]);return{$$typeof:e,type:d,key:v,ref:b,props:y,_owner:o.current}}return Qi.Fragment=t,Qi.jsx=c,Qi.jsxs=c,Qi}var Af;function X0(){return Af||(Af=1,eu.exports=G0()),eu.exports}var u=X0(),L=$u();const fp=zu(L);var Ra={},nu={exports:{}},Gt={},ru={exports:{}},su={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf;function Y0(){return Tf||(Tf=1,(function(r){function e(W,X){var V=W.length;W.push(X);e:for(;0<V;){var C=V-1>>>1,K=W[C];if(0<o(K,X))W[C]=X,W[V]=K,V=C;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var X=W[0],V=W.pop();if(V!==X){W[0]=V;e:for(var C=0,K=W.length,be=K>>>1;C<be;){var ve=2*(C+1)-1,xe=W[ve],re=ve+1,Ee=W[re];if(0>o(xe,V))re<K&&0>o(Ee,xe)?(W[C]=Ee,W[re]=V,C=re):(W[C]=xe,W[ve]=V,C=ve);else if(re<K&&0>o(Ee,V))W[C]=Ee,W[re]=V,C=re;else break e}}return X}function o(W,X){var V=W.sortIndex-X.sortIndex;return V!==0?V:W.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var f=[],p=[],x=1,y=null,v=3,b=!1,_=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(W){for(var X=t(p);X!==null;){if(X.callback===null)s(p);else if(X.startTime<=W)s(p),X.sortIndex=X.expirationTime,e(f,X);else break;X=t(p)}}function U(W){if(j=!1,R(W),!_)if(t(f)!==null)_=!0,me(H);else{var X=t(p);X!==null&&pe(U,X.startTime-W)}}function H(W,X){_=!1,j&&(j=!1,D(G),G=-1),b=!0;var V=v;try{for(R(X),y=t(f);y!==null&&(!(y.expirationTime>X)||W&&!he());){var C=y.callback;if(typeof C=="function"){y.callback=null,v=y.priorityLevel;var K=C(y.expirationTime<=X);X=r.unstable_now(),typeof K=="function"?y.callback=K:y===t(f)&&s(f),R(X)}else s(f);y=t(f)}if(y!==null)var be=!0;else{var ve=t(p);ve!==null&&pe(U,ve.startTime-X),be=!1}return be}finally{y=null,v=V,b=!1}}var z=!1,q=null,G=-1,fe=5,O=-1;function he(){return!(r.unstable_now()-O<fe)}function A(){if(q!==null){var W=r.unstable_now();O=W;var X=!0;try{X=q(!0,W)}finally{X?Y():(z=!1,q=null)}}else z=!1}var Y;if(typeof P=="function")Y=function(){P(A)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,le=ne.port2;ne.port1.onmessage=A,Y=function(){le.postMessage(null)}}else Y=function(){k(A,0)};function me(W){q=W,z||(z=!0,Y())}function pe(W,X){G=k(function(){W(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){_||b||(_=!0,me(H))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(W){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var V=v;v=X;try{return W()}finally{v=V}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,X){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var V=v;v=W;try{return X()}finally{v=V}},r.unstable_scheduleCallback=function(W,X,V){var C=r.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?C+V:C):V=C,W){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=V+K,W={id:x++,callback:X,priorityLevel:W,startTime:V,expirationTime:K,sortIndex:-1},V>C?(W.sortIndex=V,e(p,W),t(f)===null&&W===t(p)&&(j?(D(G),G=-1):j=!0,pe(U,V-C))):(W.sortIndex=K,e(f,W),_||b||(_=!0,me(H))),W},r.unstable_shouldYield=he,r.unstable_wrapCallback=function(W){var X=v;return function(){var V=v;v=X;try{return W.apply(this,arguments)}finally{v=V}}}})(su)),su}var Pf;function Q0(){return Pf||(Pf=1,ru.exports=Y0()),ru.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df;function J0(){if(Df)return Gt;Df=1;var r=$u(),e=Q0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},y={};function v(n){return f.call(y,n)?!0:f.call(x,n)?!1:p.test(n)?y[n]=!0:(x[n]=!0,!1)}function b(n,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _(n,i,l,h){if(i===null||typeof i>"u"||b(n,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function j(n,i,l,h,m,g,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=w}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){k[n]=new j(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];k[i]=new j(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){k[n]=new j(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){k[n]=new j(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){k[n]=new j(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){k[n]=new j(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){k[n]=new j(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){k[n]=new j(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){k[n]=new j(n,5,!1,n.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function P(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(D,P);k[i]=new j(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(D,P);k[i]=new j(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(D,P);k[i]=new j(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){k[n]=new j(n,1,!1,n.toLowerCase(),null,!1,!1)}),k.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){k[n]=new j(n,1,!1,n.toLowerCase(),null,!0,!0)});function R(n,i,l,h){var m=k.hasOwnProperty(i)?k[i]:null;(m!==null?m.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(_(i,l,m,h)&&(l=null),h||m===null?v(i)&&(l===null?n.removeAttribute(i):n.setAttribute(i,""+l)):m.mustUseProperty?n[m.propertyName]=l===null?m.type===3?!1:"":l:(i=m.attributeName,h=m.attributeNamespace,l===null?n.removeAttribute(i):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,h?n.setAttributeNS(h,i,l):n.setAttribute(i,l))))}var U=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),z=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),he=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),W=Symbol.iterator;function X(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var V=Object.assign,C;function K(n){if(C===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);C=i&&i[1]||""}return`
`+C+n}var be=!1;function ve(n,i){if(!n||be)return"";be=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var h=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){h=B}n.call(i.prototype)}else{try{throw Error()}catch(B){h=B}n()}}catch(B){if(B&&h&&typeof B.stack=="string"){for(var m=B.stack.split(`
`),g=h.stack.split(`
`),w=m.length-1,S=g.length-1;1<=w&&0<=S&&m[w]!==g[S];)S--;for(;1<=w&&0<=S;w--,S--)if(m[w]!==g[S]){if(w!==1||S!==1)do if(w--,S--,0>S||m[w]!==g[S]){var E=`
`+m[w].replace(" at new "," at ");return n.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",n.displayName)),E}while(1<=w&&0<=S);break}}}finally{be=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?K(n):""}function xe(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=ve(n.type,!1),n;case 11:return n=ve(n.type.render,!1),n;case 1:return n=ve(n.type,!0),n;default:return""}}function re(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case z:return"Portal";case fe:return"Profiler";case G:return"StrictMode";case Y:return"Suspense";case ne:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case he:return(n.displayName||"Context")+".Consumer";case O:return(n._context.displayName||"Context")+".Provider";case A:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case le:return i=n.displayName||null,i!==null?i:re(n.type)||"Memo";case me:i=n._payload,n=n._init;try{return re(n(i))}catch{}}return null}function Ee(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(i);case 8:return i===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Z(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ee(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function oe(n){var i=ee(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),h=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function I(n){n._valueTracker||(n._valueTracker=oe(n))}function Q(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return n&&(h=ee(n)?n.checked?"true":"false":n.value),n=h,n!==l?(i.setValue(n),!0):!1}function de(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function we(n,i){var l=i.checked;return V({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function ke(n,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=Z(i.value!=null?i.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function je(n,i){i=i.checked,i!=null&&R(n,"checked",i,!1)}function De(n,i){je(n,i);var l=Z(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Ut(n,i.type,l):i.hasOwnProperty("defaultValue")&&Ut(n,i.type,Z(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function $t(n,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,l||i===n.value||(n.value=i),n.defaultValue=i}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Ut(n,i,l){(i!=="number"||de(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Bt=Array.isArray;function et(n,i,l,h){if(n=n.options,i){i={};for(var m=0;m<l.length;m++)i["$"+l[m]]=!0;for(l=0;l<n.length;l++)m=i.hasOwnProperty("$"+n[l].value),n[l].selected!==m&&(n[l].selected=m),m&&h&&(n[l].defaultSelected=!0)}else{for(l=""+Z(l),i=null,m=0;m<n.length;m++){if(n[m].value===l){n[m].selected=!0,h&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function jt(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return V({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function xn(n,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Bt(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}n._wrapperState={initialValue:Z(l)}}function ze(n,i){var l=Z(i.value),h=Z(i.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),i.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function Be(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Qe(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $n(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Qe(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Cn,No=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,m){MSApp.execUnsafeLocalFunction(function(){return n(i,l,h,m)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Cn=Cn||document.createElement("div"),Cn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Cn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Jt(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},od=["Webkit","ms","Moz","O"];Object.keys(Un).forEach(function(n){od.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Un[i]=Un[n]})});function yl(n,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Un.hasOwnProperty(n)&&Un[n]?(""+i).trim():i+"px"}function vl(n,i){n=n.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,m=yl(l,i[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,m):n[l]=m}}var ad=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gs(n,i){if(i){if(ad[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ci(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function hr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var di=null,En=null,Bn=null;function hi(n){if(n=Mi(n)){if(typeof di!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Go(i),di(n.stateNode,n.type,i))}}function Wn(n){En?Bn?Bn.push(n):Bn=[n]:En=n}function Co(){if(En){var n=En,i=Bn;if(Bn=En=null,hi(n),i)for(n=0;n<i.length;n++)hi(i[n])}}function Eo(n,i){return n(i)}function Ao(){}var Hn=!1;function Vn(n,i,l){if(Hn)return n(i,l);Hn=!0;try{return Eo(n,i,l)}finally{Hn=!1,(En!==null||Bn!==null)&&(Ao(),Co())}}function An(n,i){var l=n.stateNode;if(l===null)return null;var h=Go(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var qn=!1;if(d)try{var on={};Object.defineProperty(on,"passive",{get:function(){qn=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{qn=!1}function Kn(n,i,l,h,m,g,w,S,E){var B=Array.prototype.slice.call(arguments,3);try{i.apply(l,B)}catch(ie){this.onError(ie)}}var Tn=!1,xs=null,mt=!1,fi=null,wl={onError:function(n){Tn=!0,xs=n}};function Gn(n,i,l,h,m,g,w,S,E){Tn=!1,xs=null,Kn.apply(wl,arguments)}function Br(n,i,l,h,m,g,w,S,E){if(Gn.apply(this,arguments),Tn){if(Tn){var B=xs;Tn=!1,xs=null}else throw Error(t(198));mt||(mt=!0,fi=B)}}function fr(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function mi(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function bl(n){if(fr(n)!==n)throw Error(t(188))}function Wr(n){var i=n.alternate;if(!i){if(i=fr(n),i===null)throw Error(t(188));return i!==n?null:n}for(var l=n,h=i;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return bl(m),n;if(g===h)return bl(m),i;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=m,h=g;else{for(var w=!1,S=m.child;S;){if(S===l){w=!0,l=m,h=g;break}if(S===h){w=!0,h=m,l=g;break}S=S.sibling}if(!w){for(S=g.child;S;){if(S===l){w=!0,l=g,h=m;break}if(S===h){w=!0,h=g,l=m;break}S=S.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:i}function pi(n){return n=Wr(n),n!==null?gi(n):null}function gi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=gi(n);if(i!==null)return i;n=n.sibling}return null}var To=e.unstable_scheduleCallback,Hr=e.unstable_cancelCallback,xi=e.unstable_shouldYield,_l=e.unstable_requestPaint,ot=e.unstable_now,kl=e.unstable_getCurrentPriorityLevel,ys=e.unstable_ImmediatePriority,Po=e.unstable_UserBlockingPriority,Vr=e.unstable_NormalPriority,jl=e.unstable_LowPriority,Do=e.unstable_IdlePriority,N=null,$=null;function J(n){if($&&typeof $.onCommitFiberRoot=="function")try{$.onCommitFiberRoot(N,n,void 0,(n.current.flags&128)===128)}catch{}}var te=Math.clz32?Math.clz32:$e,ge=Math.log,Re=Math.LN2;function $e(n){return n>>>=0,n===0?32:31-(ge(n)/Re|0)|0}var Oe=64,Me=4194304;function Ve(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ut(n,i){var l=n.pendingLanes;if(l===0)return 0;var h=0,m=n.suspendedLanes,g=n.pingedLanes,w=l&268435455;if(w!==0){var S=w&~m;S!==0?h=Ve(S):(g&=w,g!==0&&(h=Ve(g)))}else w=l&~m,w!==0?h=Ve(w):g!==0&&(h=Ve(g));if(h===0)return 0;if(i!==0&&i!==h&&(i&m)===0&&(m=h&-h,g=i&-i,m>=g||m===16&&(g&4194240)!==0))return i;if((h&4)!==0&&(h|=l&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=h;0<i;)l=31-te(i),m=1<<l,h|=n[l],i&=~m;return h}function dt(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function an(n,i){for(var l=n.suspendedLanes,h=n.pingedLanes,m=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-te(g),S=1<<w,E=m[w];E===-1?((S&l)===0||(S&h)!==0)&&(m[w]=dt(S,i)):E<=i&&(n.expiredLanes|=S),g&=~S}}function He(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ae(){var n=Oe;return Oe<<=1,(Oe&4194240)===0&&(Oe=64),n}function xt(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function Xn(n,i,l){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-te(i),n[i]=l}function vs(n,i){var l=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var m=31-te(l),g=1<<m;i[m]=0,h[m]=-1,n[m]=-1,l&=~g}}function yt(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var h=31-te(l),m=1<<h;m&i|n[h]&i&&(n[h]|=i),l&=~m}}var Fe=0;function yi(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ws,Yn,mr,bs,vi,Sl=!1,Ro=[],pr=null,gr=null,xr=null,wi=new Map,bi=new Map,yr=[],mg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ld(n,i){switch(n){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":wi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":bi.delete(i.pointerId)}}function _i(n,i,l,h,m,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[m]},i!==null&&(i=Mi(i),i!==null&&Yn(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function pg(n,i,l,h,m){switch(i){case"focusin":return pr=_i(pr,n,i,l,h,m),!0;case"dragenter":return gr=_i(gr,n,i,l,h,m),!0;case"mouseover":return xr=_i(xr,n,i,l,h,m),!0;case"pointerover":var g=m.pointerId;return wi.set(g,_i(wi.get(g)||null,n,i,l,h,m)),!0;case"gotpointercapture":return g=m.pointerId,bi.set(g,_i(bi.get(g)||null,n,i,l,h,m)),!0}return!1}function cd(n){var i=qr(n.target);if(i!==null){var l=fr(i);if(l!==null){if(i=l.tag,i===13){if(i=mi(l),i!==null){n.blockedOn=i,vi(n.priority,function(){mr(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Lo(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=Cl(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);ui=h,l.target.dispatchEvent(h),ui=null}else return i=Mi(l),i!==null&&Yn(i),n.blockedOn=l,!1;i.shift()}return!0}function ud(n,i,l){Lo(n)&&l.delete(i)}function gg(){Sl=!1,pr!==null&&Lo(pr)&&(pr=null),gr!==null&&Lo(gr)&&(gr=null),xr!==null&&Lo(xr)&&(xr=null),wi.forEach(ud),bi.forEach(ud)}function ki(n,i){n.blockedOn===i&&(n.blockedOn=null,Sl||(Sl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gg)))}function ji(n){function i(m){return ki(m,n)}if(0<Ro.length){ki(Ro[0],n);for(var l=1;l<Ro.length;l++){var h=Ro[l];h.blockedOn===n&&(h.blockedOn=null)}}for(pr!==null&&ki(pr,n),gr!==null&&ki(gr,n),xr!==null&&ki(xr,n),wi.forEach(i),bi.forEach(i),l=0;l<yr.length;l++)h=yr[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<yr.length&&(l=yr[0],l.blockedOn===null);)cd(l),l.blockedOn===null&&yr.shift()}var _s=U.ReactCurrentBatchConfig,Oo=!0;function xg(n,i,l,h){var m=Fe,g=_s.transition;_s.transition=null;try{Fe=1,Nl(n,i,l,h)}finally{Fe=m,_s.transition=g}}function yg(n,i,l,h){var m=Fe,g=_s.transition;_s.transition=null;try{Fe=4,Nl(n,i,l,h)}finally{Fe=m,_s.transition=g}}function Nl(n,i,l,h){if(Oo){var m=Cl(n,i,l,h);if(m===null)Hl(n,i,h,Mo,l),ld(n,h);else if(pg(m,n,i,l,h))h.stopPropagation();else if(ld(n,h),i&4&&-1<mg.indexOf(n)){for(;m!==null;){var g=Mi(m);if(g!==null&&ws(g),g=Cl(n,i,l,h),g===null&&Hl(n,i,h,Mo,l),g===m)break;m=g}m!==null&&h.stopPropagation()}else Hl(n,i,h,null,l)}}var Mo=null;function Cl(n,i,l,h){if(Mo=null,n=hr(h),n=qr(n),n!==null)if(i=fr(n),i===null)n=null;else if(l=i.tag,l===13){if(n=mi(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Mo=n,null}function dd(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kl()){case ys:return 1;case Po:return 4;case Vr:case jl:return 16;case Do:return 536870912;default:return 16}default:return 16}}var vr=null,El=null,Io=null;function hd(){if(Io)return Io;var n,i=El,l=i.length,h,m="value"in vr?vr.value:vr.textContent,g=m.length;for(n=0;n<l&&i[n]===m[n];n++);var w=l-n;for(h=1;h<=w&&i[l-h]===m[g-h];h++);return Io=m.slice(n,1<h?1-h:void 0)}function Fo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function zo(){return!0}function fd(){return!1}function Zt(n){function i(l,h,m,g,w){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(l=n[S],this[S]=l?l(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?zo:fd,this.isPropagationStopped=fd,this}return V(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zo)},persist:function(){},isPersistent:zo}),i}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Al=Zt(ks),Si=V({},ks,{view:0,detail:0}),vg=Zt(Si),Tl,Pl,Ni,$o=V({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ni&&(Ni&&n.type==="mousemove"?(Tl=n.screenX-Ni.screenX,Pl=n.screenY-Ni.screenY):Pl=Tl=0,Ni=n),Tl)},movementY:function(n){return"movementY"in n?n.movementY:Pl}}),md=Zt($o),wg=V({},$o,{dataTransfer:0}),bg=Zt(wg),_g=V({},Si,{relatedTarget:0}),Dl=Zt(_g),kg=V({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),jg=Zt(kg),Sg=V({},ks,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ng=Zt(Sg),Cg=V({},ks,{data:0}),pd=Zt(Cg),Eg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ag={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pg(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Tg[n])?!!i[n]:!1}function Rl(){return Pg}var Dg=V({},Si,{key:function(n){if(n.key){var i=Eg[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Fo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ag[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rl,charCode:function(n){return n.type==="keypress"?Fo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Rg=Zt(Dg),Lg=V({},$o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gd=Zt(Lg),Og=V({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rl}),Mg=Zt(Og),Ig=V({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fg=Zt(Ig),zg=V({},$o,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$g=Zt(zg),Ug=[9,13,27,32],Ll=d&&"CompositionEvent"in window,Ci=null;d&&"documentMode"in document&&(Ci=document.documentMode);var Bg=d&&"TextEvent"in window&&!Ci,xd=d&&(!Ll||Ci&&8<Ci&&11>=Ci),yd=" ",vd=!1;function wd(n,i){switch(n){case"keyup":return Ug.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var js=!1;function Wg(n,i){switch(n){case"compositionend":return bd(i);case"keypress":return i.which!==32?null:(vd=!0,yd);case"textInput":return n=i.data,n===yd&&vd?null:n;default:return null}}function Hg(n,i){if(js)return n==="compositionend"||!Ll&&wd(n,i)?(n=hd(),Io=El=vr=null,js=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return xd&&i.locale!=="ko"?null:i.data;default:return null}}var Vg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _d(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Vg[n.type]:i==="textarea"}function kd(n,i,l,h){Wn(h),i=Vo(i,"onChange"),0<i.length&&(l=new Al("onChange","change",null,l,h),n.push({event:l,listeners:i}))}var Ei=null,Ai=null;function qg(n){Ud(n,0)}function Uo(n){var i=As(n);if(Q(i))return n}function Kg(n,i){if(n==="change")return i}var jd=!1;if(d){var Ol;if(d){var Ml="oninput"in document;if(!Ml){var Sd=document.createElement("div");Sd.setAttribute("oninput","return;"),Ml=typeof Sd.oninput=="function"}Ol=Ml}else Ol=!1;jd=Ol&&(!document.documentMode||9<document.documentMode)}function Nd(){Ei&&(Ei.detachEvent("onpropertychange",Cd),Ai=Ei=null)}function Cd(n){if(n.propertyName==="value"&&Uo(Ai)){var i=[];kd(i,Ai,n,hr(n)),Vn(qg,i)}}function Gg(n,i,l){n==="focusin"?(Nd(),Ei=i,Ai=l,Ei.attachEvent("onpropertychange",Cd)):n==="focusout"&&Nd()}function Xg(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Uo(Ai)}function Yg(n,i){if(n==="click")return Uo(i)}function Qg(n,i){if(n==="input"||n==="change")return Uo(i)}function Jg(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var yn=typeof Object.is=="function"?Object.is:Jg;function Ti(n,i){if(yn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!f.call(i,m)||!yn(n[m],i[m]))return!1}return!0}function Ed(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ad(n,i){var l=Ed(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=i&&h>=i)return{node:l,offset:i-n};n=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ed(l)}}function Td(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Td(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Pd(){for(var n=window,i=de();i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=de(n.document)}return i}function Il(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Zg(n){var i=Pd(),l=n.focusedElem,h=n.selectionRange;if(i!==l&&l&&l.ownerDocument&&Td(l.ownerDocument.documentElement,l)){if(h!==null&&Il(l)){if(i=h.start,n=h.end,n===void 0&&(n=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(n,l.value.length);else if(n=(i=l.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var m=l.textContent.length,g=Math.min(h.start,m);h=h.end===void 0?g:Math.min(h.end,m),!n.extend&&g>h&&(m=h,h=g,g=m),m=Ad(l,g);var w=Ad(l,h);m&&w&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),n.removeAllRanges(),g>h?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=l;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)n=i[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var e0=d&&"documentMode"in document&&11>=document.documentMode,Ss=null,Fl=null,Pi=null,zl=!1;function Dd(n,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;zl||Ss==null||Ss!==de(h)||(h=Ss,"selectionStart"in h&&Il(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Pi&&Ti(Pi,h)||(Pi=h,h=Vo(Fl,"onSelect"),0<h.length&&(i=new Al("onSelect","select",null,i,l),n.push({event:i,listeners:h}),i.target=Ss)))}function Bo(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var Ns={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionend:Bo("Transition","TransitionEnd")},$l={},Rd={};d&&(Rd=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Wo(n){if($l[n])return $l[n];if(!Ns[n])return n;var i=Ns[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in Rd)return $l[n]=i[l];return n}var Ld=Wo("animationend"),Od=Wo("animationiteration"),Md=Wo("animationstart"),Id=Wo("transitionend"),Fd=new Map,zd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(n,i){Fd.set(n,i),a(i,[n])}for(var Ul=0;Ul<zd.length;Ul++){var Bl=zd[Ul],t0=Bl.toLowerCase(),n0=Bl[0].toUpperCase()+Bl.slice(1);wr(t0,"on"+n0)}wr(Ld,"onAnimationEnd"),wr(Od,"onAnimationIteration"),wr(Md,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(Id,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function $d(n,i,l){var h=n.type||"unknown-event";n.currentTarget=l,Br(h,i,void 0,n),n.currentTarget=null}function Ud(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],m=h.event;h=h.listeners;e:{var g=void 0;if(i)for(var w=h.length-1;0<=w;w--){var S=h[w],E=S.instance,B=S.currentTarget;if(S=S.listener,E!==g&&m.isPropagationStopped())break e;$d(m,S,B),g=E}else for(w=0;w<h.length;w++){if(S=h[w],E=S.instance,B=S.currentTarget,S=S.listener,E!==g&&m.isPropagationStopped())break e;$d(m,S,B),g=E}}}if(mt)throw n=fi,mt=!1,fi=null,n}function tt(n,i){var l=i[Yl];l===void 0&&(l=i[Yl]=new Set);var h=n+"__bubble";l.has(h)||(Bd(i,n,2,!1),l.add(h))}function Wl(n,i,l){var h=0;i&&(h|=4),Bd(l,n,h,i)}var Ho="_reactListening"+Math.random().toString(36).slice(2);function Ri(n){if(!n[Ho]){n[Ho]=!0,s.forEach(function(l){l!=="selectionchange"&&(r0.has(l)||Wl(l,!1,n),Wl(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ho]||(i[Ho]=!0,Wl("selectionchange",!1,i))}}function Bd(n,i,l,h){switch(dd(i)){case 1:var m=xg;break;case 4:m=yg;break;default:m=Nl}l=m.bind(null,i,l,n),m=void 0,!qn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),h?m!==void 0?n.addEventListener(i,l,{capture:!0,passive:m}):n.addEventListener(i,l,!0):m!==void 0?n.addEventListener(i,l,{passive:m}):n.addEventListener(i,l,!1)}function Hl(n,i,l,h,m){var g=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var S=h.stateNode.containerInfo;if(S===m||S.nodeType===8&&S.parentNode===m)break;if(w===4)for(w=h.return;w!==null;){var E=w.tag;if((E===3||E===4)&&(E=w.stateNode.containerInfo,E===m||E.nodeType===8&&E.parentNode===m))return;w=w.return}for(;S!==null;){if(w=qr(S),w===null)return;if(E=w.tag,E===5||E===6){h=g=w;continue e}S=S.parentNode}}h=h.return}Vn(function(){var B=g,ie=hr(l),ae=[];e:{var se=Fd.get(n);if(se!==void 0){var ye=Al,Se=n;switch(n){case"keypress":if(Fo(l)===0)break e;case"keydown":case"keyup":ye=Rg;break;case"focusin":Se="focus",ye=Dl;break;case"focusout":Se="blur",ye=Dl;break;case"beforeblur":case"afterblur":ye=Dl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=bg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Mg;break;case Ld:case Od:case Md:ye=jg;break;case Id:ye=Fg;break;case"scroll":ye=vg;break;case"wheel":ye=$g;break;case"copy":case"cut":case"paste":ye=Ng;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=gd}var Ne=(i&4)!==0,ht=!Ne&&n==="scroll",M=Ne?se!==null?se+"Capture":null:se;Ne=[];for(var T=B,F;T!==null;){F=T;var ce=F.stateNode;if(F.tag===5&&ce!==null&&(F=ce,M!==null&&(ce=An(T,M),ce!=null&&Ne.push(Li(T,ce,F)))),ht)break;T=T.return}0<Ne.length&&(se=new ye(se,Se,null,l,ie),ae.push({event:se,listeners:Ne}))}}if((i&7)===0){e:{if(se=n==="mouseover"||n==="pointerover",ye=n==="mouseout"||n==="pointerout",se&&l!==ui&&(Se=l.relatedTarget||l.fromElement)&&(qr(Se)||Se[Qn]))break e;if((ye||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,ye?(Se=l.relatedTarget||l.toElement,ye=B,Se=Se?qr(Se):null,Se!==null&&(ht=fr(Se),Se!==ht||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(ye=null,Se=B),ye!==Se)){if(Ne=md,ce="onMouseLeave",M="onMouseEnter",T="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=gd,ce="onPointerLeave",M="onPointerEnter",T="pointer"),ht=ye==null?se:As(ye),F=Se==null?se:As(Se),se=new Ne(ce,T+"leave",ye,l,ie),se.target=ht,se.relatedTarget=F,ce=null,qr(ie)===B&&(Ne=new Ne(M,T+"enter",Se,l,ie),Ne.target=F,Ne.relatedTarget=ht,ce=Ne),ht=ce,ye&&Se)t:{for(Ne=ye,M=Se,T=0,F=Ne;F;F=Cs(F))T++;for(F=0,ce=M;ce;ce=Cs(ce))F++;for(;0<T-F;)Ne=Cs(Ne),T--;for(;0<F-T;)M=Cs(M),F--;for(;T--;){if(Ne===M||M!==null&&Ne===M.alternate)break t;Ne=Cs(Ne),M=Cs(M)}Ne=null}else Ne=null;ye!==null&&Wd(ae,se,ye,Ne,!1),Se!==null&&ht!==null&&Wd(ae,ht,Se,Ne,!0)}}e:{if(se=B?As(B):window,ye=se.nodeName&&se.nodeName.toLowerCase(),ye==="select"||ye==="input"&&se.type==="file")var Ce=Kg;else if(_d(se))if(jd)Ce=Qg;else{Ce=Xg;var Te=Gg}else(ye=se.nodeName)&&ye.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ce=Yg);if(Ce&&(Ce=Ce(n,B))){kd(ae,Ce,l,ie);break e}Te&&Te(n,se,B),n==="focusout"&&(Te=se._wrapperState)&&Te.controlled&&se.type==="number"&&Ut(se,"number",se.value)}switch(Te=B?As(B):window,n){case"focusin":(_d(Te)||Te.contentEditable==="true")&&(Ss=Te,Fl=B,Pi=null);break;case"focusout":Pi=Fl=Ss=null;break;case"mousedown":zl=!0;break;case"contextmenu":case"mouseup":case"dragend":zl=!1,Dd(ae,l,ie);break;case"selectionchange":if(e0)break;case"keydown":case"keyup":Dd(ae,l,ie)}var Pe;if(Ll)e:{switch(n){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else js?wd(n,l)&&(Le="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Le="onCompositionStart");Le&&(xd&&l.locale!=="ko"&&(js||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&js&&(Pe=hd()):(vr=ie,El="value"in vr?vr.value:vr.textContent,js=!0)),Te=Vo(B,Le),0<Te.length&&(Le=new pd(Le,n,null,l,ie),ae.push({event:Le,listeners:Te}),Pe?Le.data=Pe:(Pe=bd(l),Pe!==null&&(Le.data=Pe)))),(Pe=Bg?Wg(n,l):Hg(n,l))&&(B=Vo(B,"onBeforeInput"),0<B.length&&(ie=new pd("onBeforeInput","beforeinput",null,l,ie),ae.push({event:ie,listeners:B}),ie.data=Pe))}Ud(ae,i)})}function Li(n,i,l){return{instance:n,listener:i,currentTarget:l}}function Vo(n,i){for(var l=i+"Capture",h=[];n!==null;){var m=n,g=m.stateNode;m.tag===5&&g!==null&&(m=g,g=An(n,l),g!=null&&h.unshift(Li(n,g,m)),g=An(n,i),g!=null&&h.push(Li(n,g,m))),n=n.return}return h}function Cs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wd(n,i,l,h,m){for(var g=i._reactName,w=[];l!==null&&l!==h;){var S=l,E=S.alternate,B=S.stateNode;if(E!==null&&E===h)break;S.tag===5&&B!==null&&(S=B,m?(E=An(l,g),E!=null&&w.unshift(Li(l,E,S))):m||(E=An(l,g),E!=null&&w.push(Li(l,E,S)))),l=l.return}w.length!==0&&n.push({event:i,listeners:w})}var s0=/\r\n?/g,i0=/\u0000|\uFFFD/g;function Hd(n){return(typeof n=="string"?n:""+n).replace(s0,`
`).replace(i0,"")}function qo(n,i,l){if(i=Hd(i),Hd(n)!==i&&l)throw Error(t(425))}function Ko(){}var Vl=null,ql=null;function Kl(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Gl=typeof setTimeout=="function"?setTimeout:void 0,o0=typeof clearTimeout=="function"?clearTimeout:void 0,Vd=typeof Promise=="function"?Promise:void 0,a0=typeof queueMicrotask=="function"?queueMicrotask:typeof Vd<"u"?function(n){return Vd.resolve(null).then(n).catch(l0)}:Gl;function l0(n){setTimeout(function(){throw n})}function Xl(n,i){var l=i,h=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(h===0){n.removeChild(m),ji(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=m}while(l);ji(i)}function br(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function qd(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}var Es=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Es,Oi="__reactProps$"+Es,Qn="__reactContainer$"+Es,Yl="__reactEvents$"+Es,c0="__reactListeners$"+Es,u0="__reactHandles$"+Es;function qr(n){var i=n[Pn];if(i)return i;for(var l=n.parentNode;l;){if(i=l[Qn]||l[Pn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=qd(n);n!==null;){if(l=n[Pn])return l;n=qd(n)}return i}n=l,l=n.parentNode}return null}function Mi(n){return n=n[Pn]||n[Qn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function As(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Go(n){return n[Oi]||null}var Ql=[],Ts=-1;function _r(n){return{current:n}}function nt(n){0>Ts||(n.current=Ql[Ts],Ql[Ts]=null,Ts--)}function Je(n,i){Ts++,Ql[Ts]=n.current,n.current=i}var kr={},Dt=_r(kr),Wt=_r(!1),Kr=kr;function Ps(n,i){var l=n.type.contextTypes;if(!l)return kr;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var m={},g;for(g in l)m[g]=i[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=m),m}function Ht(n){return n=n.childContextTypes,n!=null}function Xo(){nt(Wt),nt(Dt)}function Kd(n,i,l){if(Dt.current!==kr)throw Error(t(168));Je(Dt,i),Je(Wt,l)}function Gd(n,i,l){var h=n.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var m in h)if(!(m in i))throw Error(t(108,Ee(n)||"Unknown",m));return V({},l,h)}function Yo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||kr,Kr=Dt.current,Je(Dt,n),Je(Wt,Wt.current),!0}function Xd(n,i,l){var h=n.stateNode;if(!h)throw Error(t(169));l?(n=Gd(n,i,Kr),h.__reactInternalMemoizedMergedChildContext=n,nt(Wt),nt(Dt),Je(Dt,n)):nt(Wt),Je(Wt,l)}var Jn=null,Qo=!1,Jl=!1;function Yd(n){Jn===null?Jn=[n]:Jn.push(n)}function d0(n){Qo=!0,Yd(n)}function jr(){if(!Jl&&Jn!==null){Jl=!0;var n=0,i=Fe;try{var l=Jn;for(Fe=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}Jn=null,Qo=!1}catch(m){throw Jn!==null&&(Jn=Jn.slice(n+1)),To(ys,jr),m}finally{Fe=i,Jl=!1}}return null}var Ds=[],Rs=0,Jo=null,Zo=0,ln=[],cn=0,Gr=null,Zn=1,er="";function Xr(n,i){Ds[Rs++]=Zo,Ds[Rs++]=Jo,Jo=n,Zo=i}function Qd(n,i,l){ln[cn++]=Zn,ln[cn++]=er,ln[cn++]=Gr,Gr=n;var h=Zn;n=er;var m=32-te(h)-1;h&=~(1<<m),l+=1;var g=32-te(i)+m;if(30<g){var w=m-m%5;g=(h&(1<<w)-1).toString(32),h>>=w,m-=w,Zn=1<<32-te(i)+m|l<<m|h,er=g+n}else Zn=1<<g|l<<m|h,er=n}function Zl(n){n.return!==null&&(Xr(n,1),Qd(n,1,0))}function ec(n){for(;n===Jo;)Jo=Ds[--Rs],Ds[Rs]=null,Zo=Ds[--Rs],Ds[Rs]=null;for(;n===Gr;)Gr=ln[--cn],ln[cn]=null,er=ln[--cn],ln[cn]=null,Zn=ln[--cn],ln[cn]=null}var en=null,tn=null,it=!1,vn=null;function Jd(n,i){var l=fn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=n,i=n.deletions,i===null?(n.deletions=[l],n.flags|=16):i.push(l)}function Zd(n,i){switch(n.tag){case 5:var l=n.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,en=n,tn=br(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,en=n,tn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Gr!==null?{id:Zn,overflow:er}:null,n.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=fn(18,null,null,0),l.stateNode=i,l.return=n,n.child=l,en=n,tn=null,!0):!1;default:return!1}}function tc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function nc(n){if(it){var i=tn;if(i){var l=i;if(!Zd(n,i)){if(tc(n))throw Error(t(418));i=br(l.nextSibling);var h=en;i&&Zd(n,i)?Jd(h,l):(n.flags=n.flags&-4097|2,it=!1,en=n)}}else{if(tc(n))throw Error(t(418));n.flags=n.flags&-4097|2,it=!1,en=n}}}function eh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;en=n}function ea(n){if(n!==en)return!1;if(!it)return eh(n),it=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Kl(n.type,n.memoizedProps)),i&&(i=tn)){if(tc(n))throw th(),Error(t(418));for(;i;)Jd(n,i),i=br(i.nextSibling)}if(eh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(i===0){tn=br(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}n=n.nextSibling}tn=null}}else tn=en?br(n.stateNode.nextSibling):null;return!0}function th(){for(var n=tn;n;)n=br(n.nextSibling)}function Ls(){tn=en=null,it=!1}function rc(n){vn===null?vn=[n]:vn.push(n)}var h0=U.ReactCurrentBatchConfig;function Ii(n,i,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,n));var m=h,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(w){var S=m.refs;w===null?delete S[g]:S[g]=w},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function ta(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function nh(n){var i=n._init;return i(n._payload)}function rh(n){function i(M,T){if(n){var F=M.deletions;F===null?(M.deletions=[T],M.flags|=16):F.push(T)}}function l(M,T){if(!n)return null;for(;T!==null;)i(M,T),T=T.sibling;return null}function h(M,T){for(M=new Map;T!==null;)T.key!==null?M.set(T.key,T):M.set(T.index,T),T=T.sibling;return M}function m(M,T){return M=Dr(M,T),M.index=0,M.sibling=null,M}function g(M,T,F){return M.index=F,n?(F=M.alternate,F!==null?(F=F.index,F<T?(M.flags|=2,T):F):(M.flags|=2,T)):(M.flags|=1048576,T)}function w(M){return n&&M.alternate===null&&(M.flags|=2),M}function S(M,T,F,ce){return T===null||T.tag!==6?(T=Gc(F,M.mode,ce),T.return=M,T):(T=m(T,F),T.return=M,T)}function E(M,T,F,ce){var Ce=F.type;return Ce===q?ie(M,T,F.props.children,ce,F.key):T!==null&&(T.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===me&&nh(Ce)===T.type)?(ce=m(T,F.props),ce.ref=Ii(M,T,F),ce.return=M,ce):(ce=Sa(F.type,F.key,F.props,null,M.mode,ce),ce.ref=Ii(M,T,F),ce.return=M,ce)}function B(M,T,F,ce){return T===null||T.tag!==4||T.stateNode.containerInfo!==F.containerInfo||T.stateNode.implementation!==F.implementation?(T=Xc(F,M.mode,ce),T.return=M,T):(T=m(T,F.children||[]),T.return=M,T)}function ie(M,T,F,ce,Ce){return T===null||T.tag!==7?(T=rs(F,M.mode,ce,Ce),T.return=M,T):(T=m(T,F),T.return=M,T)}function ae(M,T,F){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Gc(""+T,M.mode,F),T.return=M,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case H:return F=Sa(T.type,T.key,T.props,null,M.mode,F),F.ref=Ii(M,null,T),F.return=M,F;case z:return T=Xc(T,M.mode,F),T.return=M,T;case me:var ce=T._init;return ae(M,ce(T._payload),F)}if(Bt(T)||X(T))return T=rs(T,M.mode,F,null),T.return=M,T;ta(M,T)}return null}function se(M,T,F,ce){var Ce=T!==null?T.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return Ce!==null?null:S(M,T,""+F,ce);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case H:return F.key===Ce?E(M,T,F,ce):null;case z:return F.key===Ce?B(M,T,F,ce):null;case me:return Ce=F._init,se(M,T,Ce(F._payload),ce)}if(Bt(F)||X(F))return Ce!==null?null:ie(M,T,F,ce,null);ta(M,F)}return null}function ye(M,T,F,ce,Ce){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return M=M.get(F)||null,S(T,M,""+ce,Ce);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case H:return M=M.get(ce.key===null?F:ce.key)||null,E(T,M,ce,Ce);case z:return M=M.get(ce.key===null?F:ce.key)||null,B(T,M,ce,Ce);case me:var Te=ce._init;return ye(M,T,F,Te(ce._payload),Ce)}if(Bt(ce)||X(ce))return M=M.get(F)||null,ie(T,M,ce,Ce,null);ta(T,ce)}return null}function Se(M,T,F,ce){for(var Ce=null,Te=null,Pe=T,Le=T=0,Ct=null;Pe!==null&&Le<F.length;Le++){Pe.index>Le?(Ct=Pe,Pe=null):Ct=Pe.sibling;var Ke=se(M,Pe,F[Le],ce);if(Ke===null){Pe===null&&(Pe=Ct);break}n&&Pe&&Ke.alternate===null&&i(M,Pe),T=g(Ke,T,Le),Te===null?Ce=Ke:Te.sibling=Ke,Te=Ke,Pe=Ct}if(Le===F.length)return l(M,Pe),it&&Xr(M,Le),Ce;if(Pe===null){for(;Le<F.length;Le++)Pe=ae(M,F[Le],ce),Pe!==null&&(T=g(Pe,T,Le),Te===null?Ce=Pe:Te.sibling=Pe,Te=Pe);return it&&Xr(M,Le),Ce}for(Pe=h(M,Pe);Le<F.length;Le++)Ct=ye(Pe,M,Le,F[Le],ce),Ct!==null&&(n&&Ct.alternate!==null&&Pe.delete(Ct.key===null?Le:Ct.key),T=g(Ct,T,Le),Te===null?Ce=Ct:Te.sibling=Ct,Te=Ct);return n&&Pe.forEach(function(Rr){return i(M,Rr)}),it&&Xr(M,Le),Ce}function Ne(M,T,F,ce){var Ce=X(F);if(typeof Ce!="function")throw Error(t(150));if(F=Ce.call(F),F==null)throw Error(t(151));for(var Te=Ce=null,Pe=T,Le=T=0,Ct=null,Ke=F.next();Pe!==null&&!Ke.done;Le++,Ke=F.next()){Pe.index>Le?(Ct=Pe,Pe=null):Ct=Pe.sibling;var Rr=se(M,Pe,Ke.value,ce);if(Rr===null){Pe===null&&(Pe=Ct);break}n&&Pe&&Rr.alternate===null&&i(M,Pe),T=g(Rr,T,Le),Te===null?Ce=Rr:Te.sibling=Rr,Te=Rr,Pe=Ct}if(Ke.done)return l(M,Pe),it&&Xr(M,Le),Ce;if(Pe===null){for(;!Ke.done;Le++,Ke=F.next())Ke=ae(M,Ke.value,ce),Ke!==null&&(T=g(Ke,T,Le),Te===null?Ce=Ke:Te.sibling=Ke,Te=Ke);return it&&Xr(M,Le),Ce}for(Pe=h(M,Pe);!Ke.done;Le++,Ke=F.next())Ke=ye(Pe,M,Le,Ke.value,ce),Ke!==null&&(n&&Ke.alternate!==null&&Pe.delete(Ke.key===null?Le:Ke.key),T=g(Ke,T,Le),Te===null?Ce=Ke:Te.sibling=Ke,Te=Ke);return n&&Pe.forEach(function(V0){return i(M,V0)}),it&&Xr(M,Le),Ce}function ht(M,T,F,ce){if(typeof F=="object"&&F!==null&&F.type===q&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case H:e:{for(var Ce=F.key,Te=T;Te!==null;){if(Te.key===Ce){if(Ce=F.type,Ce===q){if(Te.tag===7){l(M,Te.sibling),T=m(Te,F.props.children),T.return=M,M=T;break e}}else if(Te.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===me&&nh(Ce)===Te.type){l(M,Te.sibling),T=m(Te,F.props),T.ref=Ii(M,Te,F),T.return=M,M=T;break e}l(M,Te);break}else i(M,Te);Te=Te.sibling}F.type===q?(T=rs(F.props.children,M.mode,ce,F.key),T.return=M,M=T):(ce=Sa(F.type,F.key,F.props,null,M.mode,ce),ce.ref=Ii(M,T,F),ce.return=M,M=ce)}return w(M);case z:e:{for(Te=F.key;T!==null;){if(T.key===Te)if(T.tag===4&&T.stateNode.containerInfo===F.containerInfo&&T.stateNode.implementation===F.implementation){l(M,T.sibling),T=m(T,F.children||[]),T.return=M,M=T;break e}else{l(M,T);break}else i(M,T);T=T.sibling}T=Xc(F,M.mode,ce),T.return=M,M=T}return w(M);case me:return Te=F._init,ht(M,T,Te(F._payload),ce)}if(Bt(F))return Se(M,T,F,ce);if(X(F))return Ne(M,T,F,ce);ta(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,T!==null&&T.tag===6?(l(M,T.sibling),T=m(T,F),T.return=M,M=T):(l(M,T),T=Gc(F,M.mode,ce),T.return=M,M=T),w(M)):l(M,T)}return ht}var Os=rh(!0),sh=rh(!1),na=_r(null),ra=null,Ms=null,sc=null;function ic(){sc=Ms=ra=null}function oc(n){var i=na.current;nt(na),n._currentValue=i}function ac(n,i,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===l)break;n=n.return}}function Is(n,i){ra=n,sc=Ms=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Vt=!0),n.firstContext=null)}function un(n){var i=n._currentValue;if(sc!==n)if(n={context:n,memoizedValue:i,next:null},Ms===null){if(ra===null)throw Error(t(308));Ms=n,ra.dependencies={lanes:0,firstContext:n}}else Ms=Ms.next=n;return i}var Yr=null;function lc(n){Yr===null?Yr=[n]:Yr.push(n)}function ih(n,i,l,h){var m=i.interleaved;return m===null?(l.next=l,lc(i)):(l.next=m.next,m.next=l),i.interleaved=l,tr(n,h)}function tr(n,i){n.lanes|=i;var l=n.alternate;for(l!==null&&(l.lanes|=i),l=n,n=n.return;n!==null;)n.childLanes|=i,l=n.alternate,l!==null&&(l.childLanes|=i),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Sr=!1;function cc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oh(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function nr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Nr(n,i,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(qe&2)!==0){var m=h.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),h.pending=i,tr(n,l)}return m=h.interleaved,m===null?(i.next=i,lc(h)):(i.next=m.next,m.next=i),h.interleaved=i,tr(n,l)}function sa(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,yt(n,l)}}function ah(n,i){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?m=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?m=g=i:g=g.next=i}else m=g=i;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function ia(n,i,l,h){var m=n.updateQueue;Sr=!1;var g=m.firstBaseUpdate,w=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var E=S,B=E.next;E.next=null,w===null?g=B:w.next=B,w=E;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,S=ie.lastBaseUpdate,S!==w&&(S===null?ie.firstBaseUpdate=B:S.next=B,ie.lastBaseUpdate=E))}if(g!==null){var ae=m.baseState;w=0,ie=B=E=null,S=g;do{var se=S.lane,ye=S.eventTime;if((h&se)===se){ie!==null&&(ie=ie.next={eventTime:ye,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var Se=n,Ne=S;switch(se=i,ye=l,Ne.tag){case 1:if(Se=Ne.payload,typeof Se=="function"){ae=Se.call(ye,ae,se);break e}ae=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ne.payload,se=typeof Se=="function"?Se.call(ye,ae,se):Se,se==null)break e;ae=V({},ae,se);break e;case 2:Sr=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,se=m.effects,se===null?m.effects=[S]:se.push(S))}else ye={eventTime:ye,lane:se,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ie===null?(B=ie=ye,E=ae):ie=ie.next=ye,w|=se;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;se=S,S=se.next,se.next=null,m.lastBaseUpdate=se,m.shared.pending=null}}while(!0);if(ie===null&&(E=ae),m.baseState=E,m.firstBaseUpdate=B,m.lastBaseUpdate=ie,i=m.shared.interleaved,i!==null){m=i;do w|=m.lane,m=m.next;while(m!==i)}else g===null&&(m.shared.lanes=0);Zr|=w,n.lanes=w,n.memoizedState=ae}}function lh(n,i,l){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var h=n[i],m=h.callback;if(m!==null){if(h.callback=null,h=l,typeof m!="function")throw Error(t(191,m));m.call(h)}}}var Fi={},Dn=_r(Fi),zi=_r(Fi),$i=_r(Fi);function Qr(n){if(n===Fi)throw Error(t(174));return n}function uc(n,i){switch(Je($i,i),Je(zi,n),Je(Dn,Fi),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:$n(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=$n(i,n)}nt(Dn),Je(Dn,i)}function Fs(){nt(Dn),nt(zi),nt($i)}function ch(n){Qr($i.current);var i=Qr(Dn.current),l=$n(i,n.type);i!==l&&(Je(zi,n),Je(Dn,l))}function dc(n){zi.current===n&&(nt(Dn),nt(zi))}var at=_r(0);function oa(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var hc=[];function fc(){for(var n=0;n<hc.length;n++)hc[n]._workInProgressVersionPrimary=null;hc.length=0}var aa=U.ReactCurrentDispatcher,mc=U.ReactCurrentBatchConfig,Jr=0,lt=null,vt=null,St=null,la=!1,Ui=!1,Bi=0,f0=0;function Rt(){throw Error(t(321))}function pc(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!yn(n[l],i[l]))return!1;return!0}function gc(n,i,l,h,m,g){if(Jr=g,lt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,aa.current=n===null||n.memoizedState===null?x0:y0,n=l(h,m),Ui){g=0;do{if(Ui=!1,Bi=0,25<=g)throw Error(t(301));g+=1,St=vt=null,i.updateQueue=null,aa.current=v0,n=l(h,m)}while(Ui)}if(aa.current=da,i=vt!==null&&vt.next!==null,Jr=0,St=vt=lt=null,la=!1,i)throw Error(t(300));return n}function xc(){var n=Bi!==0;return Bi=0,n}function Rn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?lt.memoizedState=St=n:St=St.next=n,St}function dn(){if(vt===null){var n=lt.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var i=St===null?lt.memoizedState:St.next;if(i!==null)St=i,vt=n;else{if(n===null)throw Error(t(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},St===null?lt.memoizedState=St=n:St=St.next=n}return St}function Wi(n,i){return typeof i=="function"?i(n):i}function yc(n){var i=dn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=vt,m=h.baseQueue,g=l.pending;if(g!==null){if(m!==null){var w=m.next;m.next=g.next,g.next=w}h.baseQueue=m=g,l.pending=null}if(m!==null){g=m.next,h=h.baseState;var S=w=null,E=null,B=g;do{var ie=B.lane;if((Jr&ie)===ie)E!==null&&(E=E.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),h=B.hasEagerState?B.eagerState:n(h,B.action);else{var ae={lane:ie,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};E===null?(S=E=ae,w=h):E=E.next=ae,lt.lanes|=ie,Zr|=ie}B=B.next}while(B!==null&&B!==g);E===null?w=h:E.next=S,yn(h,i.memoizedState)||(Vt=!0),i.memoizedState=h,i.baseState=w,i.baseQueue=E,l.lastRenderedState=h}if(n=l.interleaved,n!==null){m=n;do g=m.lane,lt.lanes|=g,Zr|=g,m=m.next;while(m!==n)}else m===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function vc(n){var i=dn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=l.dispatch,m=l.pending,g=i.memoizedState;if(m!==null){l.pending=null;var w=m=m.next;do g=n(g,w.action),w=w.next;while(w!==m);yn(g,i.memoizedState)||(Vt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,h]}function uh(){}function dh(n,i){var l=lt,h=dn(),m=i(),g=!yn(h.memoizedState,m);if(g&&(h.memoizedState=m,Vt=!0),h=h.queue,wc(mh.bind(null,l,h,n),[n]),h.getSnapshot!==i||g||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,Hi(9,fh.bind(null,l,h,m,i),void 0,null),Nt===null)throw Error(t(349));(Jr&30)!==0||hh(l,i,m)}return m}function hh(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=lt.updateQueue,i===null?(i={lastEffect:null,stores:null},lt.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function fh(n,i,l,h){i.value=l,i.getSnapshot=h,ph(i)&&gh(n)}function mh(n,i,l){return l(function(){ph(i)&&gh(n)})}function ph(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!yn(n,l)}catch{return!0}}function gh(n){var i=tr(n,1);i!==null&&kn(i,n,1,-1)}function xh(n){var i=Rn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:n},i.queue=n,n=n.dispatch=g0.bind(null,lt,n),[i.memoizedState,n]}function Hi(n,i,l,h){return n={tag:n,create:i,destroy:l,deps:h,next:null},i=lt.updateQueue,i===null?(i={lastEffect:null,stores:null},lt.updateQueue=i,i.lastEffect=n.next=n):(l=i.lastEffect,l===null?i.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,i.lastEffect=n)),n}function yh(){return dn().memoizedState}function ca(n,i,l,h){var m=Rn();lt.flags|=n,m.memoizedState=Hi(1|i,l,void 0,h===void 0?null:h)}function ua(n,i,l,h){var m=dn();h=h===void 0?null:h;var g=void 0;if(vt!==null){var w=vt.memoizedState;if(g=w.destroy,h!==null&&pc(h,w.deps)){m.memoizedState=Hi(i,l,g,h);return}}lt.flags|=n,m.memoizedState=Hi(1|i,l,g,h)}function vh(n,i){return ca(8390656,8,n,i)}function wc(n,i){return ua(2048,8,n,i)}function wh(n,i){return ua(4,2,n,i)}function bh(n,i){return ua(4,4,n,i)}function _h(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function kh(n,i,l){return l=l!=null?l.concat([n]):null,ua(4,4,_h.bind(null,i,n),l)}function bc(){}function jh(n,i){var l=dn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&pc(i,h[1])?h[0]:(l.memoizedState=[n,i],n)}function Sh(n,i){var l=dn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&pc(i,h[1])?h[0]:(n=n(),l.memoizedState=[n,i],n)}function Nh(n,i,l){return(Jr&21)===0?(n.baseState&&(n.baseState=!1,Vt=!0),n.memoizedState=l):(yn(l,i)||(l=Ae(),lt.lanes|=l,Zr|=l,n.baseState=!0),i)}function m0(n,i){var l=Fe;Fe=l!==0&&4>l?l:4,n(!0);var h=mc.transition;mc.transition={};try{n(!1),i()}finally{Fe=l,mc.transition=h}}function Ch(){return dn().memoizedState}function p0(n,i,l){var h=Tr(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Eh(n))Ah(i,l);else if(l=ih(n,i,l,h),l!==null){var m=Ft();kn(l,n,h,m),Th(l,i,h)}}function g0(n,i,l){var h=Tr(n),m={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Eh(n))Ah(i,m);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var w=i.lastRenderedState,S=g(w,l);if(m.hasEagerState=!0,m.eagerState=S,yn(S,w)){var E=i.interleaved;E===null?(m.next=m,lc(i)):(m.next=E.next,E.next=m),i.interleaved=m;return}}catch{}finally{}l=ih(n,i,m,h),l!==null&&(m=Ft(),kn(l,n,h,m),Th(l,i,h))}}function Eh(n){var i=n.alternate;return n===lt||i!==null&&i===lt}function Ah(n,i){Ui=la=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Th(n,i,l){if((l&4194240)!==0){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,yt(n,l)}}var da={readContext:un,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},x0={readContext:un,useCallback:function(n,i){return Rn().memoizedState=[n,i===void 0?null:i],n},useContext:un,useEffect:vh,useImperativeHandle:function(n,i,l){return l=l!=null?l.concat([n]):null,ca(4194308,4,_h.bind(null,i,n),l)},useLayoutEffect:function(n,i){return ca(4194308,4,n,i)},useInsertionEffect:function(n,i){return ca(4,2,n,i)},useMemo:function(n,i){var l=Rn();return i=i===void 0?null:i,n=n(),l.memoizedState=[n,i],n},useReducer:function(n,i,l){var h=Rn();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},h.queue=n,n=n.dispatch=p0.bind(null,lt,n),[h.memoizedState,n]},useRef:function(n){var i=Rn();return n={current:n},i.memoizedState=n},useState:xh,useDebugValue:bc,useDeferredValue:function(n){return Rn().memoizedState=n},useTransition:function(){var n=xh(!1),i=n[0];return n=m0.bind(null,n[1]),Rn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,l){var h=lt,m=Rn();if(it){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),Nt===null)throw Error(t(349));(Jr&30)!==0||hh(h,i,l)}m.memoizedState=l;var g={value:l,getSnapshot:i};return m.queue=g,vh(mh.bind(null,h,g,n),[n]),h.flags|=2048,Hi(9,fh.bind(null,h,g,l,i),void 0,null),l},useId:function(){var n=Rn(),i=Nt.identifierPrefix;if(it){var l=er,h=Zn;l=(h&~(1<<32-te(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=Bi++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=f0++,i=":"+i+"r"+l.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},y0={readContext:un,useCallback:jh,useContext:un,useEffect:wc,useImperativeHandle:kh,useInsertionEffect:wh,useLayoutEffect:bh,useMemo:Sh,useReducer:yc,useRef:yh,useState:function(){return yc(Wi)},useDebugValue:bc,useDeferredValue:function(n){var i=dn();return Nh(i,vt.memoizedState,n)},useTransition:function(){var n=yc(Wi)[0],i=dn().memoizedState;return[n,i]},useMutableSource:uh,useSyncExternalStore:dh,useId:Ch,unstable_isNewReconciler:!1},v0={readContext:un,useCallback:jh,useContext:un,useEffect:wc,useImperativeHandle:kh,useInsertionEffect:wh,useLayoutEffect:bh,useMemo:Sh,useReducer:vc,useRef:yh,useState:function(){return vc(Wi)},useDebugValue:bc,useDeferredValue:function(n){var i=dn();return vt===null?i.memoizedState=n:Nh(i,vt.memoizedState,n)},useTransition:function(){var n=vc(Wi)[0],i=dn().memoizedState;return[n,i]},useMutableSource:uh,useSyncExternalStore:dh,useId:Ch,unstable_isNewReconciler:!1};function wn(n,i){if(n&&n.defaultProps){i=V({},i),n=n.defaultProps;for(var l in n)i[l]===void 0&&(i[l]=n[l]);return i}return i}function _c(n,i,l,h){i=n.memoizedState,l=l(h,i),l=l==null?i:V({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var ha={isMounted:function(n){return(n=n._reactInternals)?fr(n)===n:!1},enqueueSetState:function(n,i,l){n=n._reactInternals;var h=Ft(),m=Tr(n),g=nr(h,m);g.payload=i,l!=null&&(g.callback=l),i=Nr(n,g,m),i!==null&&(kn(i,n,m,h),sa(i,n,m))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var h=Ft(),m=Tr(n),g=nr(h,m);g.tag=1,g.payload=i,l!=null&&(g.callback=l),i=Nr(n,g,m),i!==null&&(kn(i,n,m,h),sa(i,n,m))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=Ft(),h=Tr(n),m=nr(l,h);m.tag=2,i!=null&&(m.callback=i),i=Nr(n,m,h),i!==null&&(kn(i,n,h,l),sa(i,n,h))}};function Ph(n,i,l,h,m,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,w):i.prototype&&i.prototype.isPureReactComponent?!Ti(l,h)||!Ti(m,g):!0}function Dh(n,i,l){var h=!1,m=kr,g=i.contextType;return typeof g=="object"&&g!==null?g=un(g):(m=Ht(i)?Kr:Dt.current,h=i.contextTypes,g=(h=h!=null)?Ps(n,m):kr),i=new i(l,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ha,n.stateNode=i,i._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=g),i}function Rh(n,i,l,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==n&&ha.enqueueReplaceState(i,i.state,null)}function kc(n,i,l,h){var m=n.stateNode;m.props=l,m.state=n.memoizedState,m.refs={},cc(n);var g=i.contextType;typeof g=="object"&&g!==null?m.context=un(g):(g=Ht(i)?Kr:Dt.current,m.context=Ps(n,g)),m.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(_c(n,i,g,l),m.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&ha.enqueueReplaceState(m,m.state,null),ia(n,l,m,h),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function zs(n,i){try{var l="",h=i;do l+=xe(h),h=h.return;while(h);var m=l}catch(g){m=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:m,digest:null}}function jc(n,i,l){return{value:n,source:null,stack:l??null,digest:i??null}}function Sc(n,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var w0=typeof WeakMap=="function"?WeakMap:Map;function Lh(n,i,l){l=nr(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){va||(va=!0,$c=h),Sc(n,i)},l}function Oh(n,i,l){l=nr(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var m=i.value;l.payload=function(){return h(m)},l.callback=function(){Sc(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Sc(n,i),typeof h!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),l}function Mh(n,i,l){var h=n.pingCache;if(h===null){h=n.pingCache=new w0;var m=new Set;h.set(i,m)}else m=h.get(i),m===void 0&&(m=new Set,h.set(i,m));m.has(l)||(m.add(l),n=L0.bind(null,n,i,l),i.then(n,n))}function Ih(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Fh(n,i,l,h,m){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=nr(-1,1),i.tag=2,Nr(l,i,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=m,n)}var b0=U.ReactCurrentOwner,Vt=!1;function It(n,i,l,h){i.child=n===null?sh(i,null,l,h):Os(i,n.child,l,h)}function zh(n,i,l,h,m){l=l.render;var g=i.ref;return Is(i,m),h=gc(n,i,l,h,g,m),l=xc(),n!==null&&!Vt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~m,rr(n,i,m)):(it&&l&&Zl(i),i.flags|=1,It(n,i,h,m),i.child)}function $h(n,i,l,h,m){if(n===null){var g=l.type;return typeof g=="function"&&!Kc(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=g,Uh(n,i,g,h,m)):(n=Sa(l.type,null,h,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&m)===0){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:Ti,l(w,h)&&n.ref===i.ref)return rr(n,i,m)}return i.flags|=1,n=Dr(g,h),n.ref=i.ref,n.return=i,i.child=n}function Uh(n,i,l,h,m){if(n!==null){var g=n.memoizedProps;if(Ti(g,h)&&n.ref===i.ref)if(Vt=!1,i.pendingProps=h=g,(n.lanes&m)!==0)(n.flags&131072)!==0&&(Vt=!0);else return i.lanes=n.lanes,rr(n,i,m)}return Nc(n,i,l,h,m)}function Bh(n,i,l){var h=i.pendingProps,m=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Us,nn),nn|=l;else{if((l&1073741824)===0)return n=g!==null?g.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Je(Us,nn),nn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,Je(Us,nn),nn|=h}else g!==null?(h=g.baseLanes|l,i.memoizedState=null):h=l,Je(Us,nn),nn|=h;return It(n,i,m,l),i.child}function Wh(n,i){var l=i.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Nc(n,i,l,h,m){var g=Ht(l)?Kr:Dt.current;return g=Ps(i,g),Is(i,m),l=gc(n,i,l,h,g,m),h=xc(),n!==null&&!Vt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~m,rr(n,i,m)):(it&&h&&Zl(i),i.flags|=1,It(n,i,l,m),i.child)}function Hh(n,i,l,h,m){if(Ht(l)){var g=!0;Yo(i)}else g=!1;if(Is(i,m),i.stateNode===null)ma(n,i),Dh(i,l,h),kc(i,l,h,m),h=!0;else if(n===null){var w=i.stateNode,S=i.memoizedProps;w.props=S;var E=w.context,B=l.contextType;typeof B=="object"&&B!==null?B=un(B):(B=Ht(l)?Kr:Dt.current,B=Ps(i,B));var ie=l.getDerivedStateFromProps,ae=typeof ie=="function"||typeof w.getSnapshotBeforeUpdate=="function";ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==h||E!==B)&&Rh(i,w,h,B),Sr=!1;var se=i.memoizedState;w.state=se,ia(i,h,w,m),E=i.memoizedState,S!==h||se!==E||Wt.current||Sr?(typeof ie=="function"&&(_c(i,l,ie,h),E=i.memoizedState),(S=Sr||Ph(i,l,S,h,se,E,B))?(ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=E),w.props=h,w.state=E,w.context=B,h=S):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,oh(n,i),S=i.memoizedProps,B=i.type===i.elementType?S:wn(i.type,S),w.props=B,ae=i.pendingProps,se=w.context,E=l.contextType,typeof E=="object"&&E!==null?E=un(E):(E=Ht(l)?Kr:Dt.current,E=Ps(i,E));var ye=l.getDerivedStateFromProps;(ie=typeof ye=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==ae||se!==E)&&Rh(i,w,h,E),Sr=!1,se=i.memoizedState,w.state=se,ia(i,h,w,m);var Se=i.memoizedState;S!==ae||se!==Se||Wt.current||Sr?(typeof ye=="function"&&(_c(i,l,ye,h),Se=i.memoizedState),(B=Sr||Ph(i,l,B,h,se,Se,E)||!1)?(ie||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Se,E),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Se,E)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===n.memoizedProps&&se===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&se===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=Se),w.props=h,w.state=Se,w.context=E,h=B):(typeof w.componentDidUpdate!="function"||S===n.memoizedProps&&se===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&se===n.memoizedState||(i.flags|=1024),h=!1)}return Cc(n,i,l,h,g,m)}function Cc(n,i,l,h,m,g){Wh(n,i);var w=(i.flags&128)!==0;if(!h&&!w)return m&&Xd(i,l,!1),rr(n,i,g);h=i.stateNode,b0.current=i;var S=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,n!==null&&w?(i.child=Os(i,n.child,null,g),i.child=Os(i,null,S,g)):It(n,i,S,g),i.memoizedState=h.state,m&&Xd(i,l,!0),i.child}function Vh(n){var i=n.stateNode;i.pendingContext?Kd(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Kd(n,i.context,!1),uc(n,i.containerInfo)}function qh(n,i,l,h,m){return Ls(),rc(m),i.flags|=256,It(n,i,l,h),i.child}var Ec={dehydrated:null,treeContext:null,retryLane:0};function Ac(n){return{baseLanes:n,cachePool:null,transitions:null}}function Kh(n,i,l){var h=i.pendingProps,m=at.current,g=!1,w=(i.flags&128)!==0,S;if((S=w)||(S=n!==null&&n.memoizedState===null?!1:(m&2)!==0),S?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),Je(at,m&1),n===null)return nc(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=h.children,n=h.fallback,g?(h=i.mode,g=i.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Na(w,h,0,null),n=rs(n,h,l,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=Ac(l),i.memoizedState=Ec,n):Tc(i,w));if(m=n.memoizedState,m!==null&&(S=m.dehydrated,S!==null))return _0(n,i,w,h,S,m,l);if(g){g=h.fallback,w=i.mode,m=n.child,S=m.sibling;var E={mode:"hidden",children:h.children};return(w&1)===0&&i.child!==m?(h=i.child,h.childLanes=0,h.pendingProps=E,i.deletions=null):(h=Dr(m,E),h.subtreeFlags=m.subtreeFlags&14680064),S!==null?g=Dr(S,g):(g=rs(g,w,l,null),g.flags|=2),g.return=i,h.return=i,h.sibling=g,i.child=h,h=g,g=i.child,w=n.child.memoizedState,w=w===null?Ac(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~l,i.memoizedState=Ec,h}return g=n.child,n=g.sibling,h=Dr(g,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=l),h.return=i,h.sibling=null,n!==null&&(l=i.deletions,l===null?(i.deletions=[n],i.flags|=16):l.push(n)),i.child=h,i.memoizedState=null,h}function Tc(n,i){return i=Na({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function fa(n,i,l,h){return h!==null&&rc(h),Os(i,n.child,null,l),n=Tc(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function _0(n,i,l,h,m,g,w){if(l)return i.flags&256?(i.flags&=-257,h=jc(Error(t(422))),fa(n,i,w,h)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=h.fallback,m=i.mode,h=Na({mode:"visible",children:h.children},m,0,null),g=rs(g,m,w,null),g.flags|=2,h.return=i,g.return=i,h.sibling=g,i.child=h,(i.mode&1)!==0&&Os(i,n.child,null,w),i.child.memoizedState=Ac(w),i.memoizedState=Ec,g);if((i.mode&1)===0)return fa(n,i,w,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var S=h.dgst;return h=S,g=Error(t(419)),h=jc(g,h,void 0),fa(n,i,w,h)}if(S=(w&n.childLanes)!==0,Vt||S){if(h=Nt,h!==null){switch(w&-w){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|w))!==0?0:m,m!==0&&m!==g.retryLane&&(g.retryLane=m,tr(n,m),kn(h,n,m,-1))}return qc(),h=jc(Error(t(421))),fa(n,i,w,h)}return m.data==="$?"?(i.flags|=128,i.child=n.child,i=O0.bind(null,n),m._reactRetry=i,null):(n=g.treeContext,tn=br(m.nextSibling),en=i,it=!0,vn=null,n!==null&&(ln[cn++]=Zn,ln[cn++]=er,ln[cn++]=Gr,Zn=n.id,er=n.overflow,Gr=i),i=Tc(i,h.children),i.flags|=4096,i)}function Gh(n,i,l){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),ac(n.return,i,l)}function Pc(n,i,l,h,m){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=m)}function Xh(n,i,l){var h=i.pendingProps,m=h.revealOrder,g=h.tail;if(It(n,i,h.children,l),h=at.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Gh(n,l,i);else if(n.tag===19)Gh(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Je(at,h),(i.mode&1)===0)i.memoizedState=null;else switch(m){case"forwards":for(l=i.child,m=null;l!==null;)n=l.alternate,n!==null&&oa(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),Pc(i,!1,m,l,g);break;case"backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&oa(n)===null){i.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}Pc(i,!0,l,null,g);break;case"together":Pc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ma(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function rr(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),Zr|=i.lanes,(l&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,l=Dr(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Dr(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function k0(n,i,l){switch(i.tag){case 3:Vh(i),Ls();break;case 5:ch(i);break;case 1:Ht(i.type)&&Yo(i);break;case 4:uc(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,m=i.memoizedProps.value;Je(na,h._currentValue),h._currentValue=m;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Je(at,at.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?Kh(n,i,l):(Je(at,at.current&1),n=rr(n,i,l),n!==null?n.sibling:null);Je(at,at.current&1);break;case 19:if(h=(l&i.childLanes)!==0,(n.flags&128)!==0){if(h)return Xh(n,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Je(at,at.current),h)break;return null;case 22:case 23:return i.lanes=0,Bh(n,i,l)}return rr(n,i,l)}var Yh,Dc,Qh,Jh;Yh=function(n,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Dc=function(){},Qh=function(n,i,l,h){var m=n.memoizedProps;if(m!==h){n=i.stateNode,Qr(Dn.current);var g=null;switch(l){case"input":m=we(n,m),h=we(n,h),g=[];break;case"select":m=V({},m,{value:void 0}),h=V({},h,{value:void 0}),g=[];break;case"textarea":m=jt(n,m),h=jt(n,h),g=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Ko)}gs(l,h);var w;l=null;for(B in m)if(!h.hasOwnProperty(B)&&m.hasOwnProperty(B)&&m[B]!=null)if(B==="style"){var S=m[B];for(w in S)S.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in h){var E=h[B];if(S=m?.[B],h.hasOwnProperty(B)&&E!==S&&(E!=null||S!=null))if(B==="style")if(S){for(w in S)!S.hasOwnProperty(w)||E&&E.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in E)E.hasOwnProperty(w)&&S[w]!==E[w]&&(l||(l={}),l[w]=E[w])}else l||(g||(g=[]),g.push(B,l)),l=E;else B==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,S=S?S.__html:void 0,E!=null&&S!==E&&(g=g||[]).push(B,E)):B==="children"?typeof E!="string"&&typeof E!="number"||(g=g||[]).push(B,""+E):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(E!=null&&B==="onScroll"&&tt("scroll",n),g||S===E||(g=[])):(g=g||[]).push(B,E))}l&&(g=g||[]).push("style",l);var B=g;(i.updateQueue=B)&&(i.flags|=4)}},Jh=function(n,i,l,h){l!==h&&(i.flags|=4)};function Vi(n,i){if(!it)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(i)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=h,n.childLanes=l,i}function j0(n,i,l){var h=i.pendingProps;switch(ec(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(i),null;case 1:return Ht(i.type)&&Xo(),Lt(i),null;case 3:return h=i.stateNode,Fs(),nt(Wt),nt(Dt),fc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(ea(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,vn!==null&&(Wc(vn),vn=null))),Dc(n,i),Lt(i),null;case 5:dc(i);var m=Qr($i.current);if(l=i.type,n!==null&&i.stateNode!=null)Qh(n,i,l,h,m),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Lt(i),null}if(n=Qr(Dn.current),ea(i)){h=i.stateNode,l=i.type;var g=i.memoizedProps;switch(h[Pn]=i,h[Oi]=g,n=(i.mode&1)!==0,l){case"dialog":tt("cancel",h),tt("close",h);break;case"iframe":case"object":case"embed":tt("load",h);break;case"video":case"audio":for(m=0;m<Di.length;m++)tt(Di[m],h);break;case"source":tt("error",h);break;case"img":case"image":case"link":tt("error",h),tt("load",h);break;case"details":tt("toggle",h);break;case"input":ke(h,g),tt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},tt("invalid",h);break;case"textarea":xn(h,g),tt("invalid",h)}gs(l,g),m=null;for(var w in g)if(g.hasOwnProperty(w)){var S=g[w];w==="children"?typeof S=="string"?h.textContent!==S&&(g.suppressHydrationWarning!==!0&&qo(h.textContent,S,n),m=["children",S]):typeof S=="number"&&h.textContent!==""+S&&(g.suppressHydrationWarning!==!0&&qo(h.textContent,S,n),m=["children",""+S]):o.hasOwnProperty(w)&&S!=null&&w==="onScroll"&&tt("scroll",h)}switch(l){case"input":I(h),$t(h,g,!0);break;case"textarea":I(h),Be(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Ko)}h=m,i.updateQueue=h,h!==null&&(i.flags|=4)}else{w=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Qe(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=w.createElement(l,{is:h.is}):(n=w.createElement(l),l==="select"&&(w=n,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):n=w.createElementNS(n,l),n[Pn]=i,n[Oi]=h,Yh(n,i,!1,!1),i.stateNode=n;e:{switch(w=ci(l,h),l){case"dialog":tt("cancel",n),tt("close",n),m=h;break;case"iframe":case"object":case"embed":tt("load",n),m=h;break;case"video":case"audio":for(m=0;m<Di.length;m++)tt(Di[m],n);m=h;break;case"source":tt("error",n),m=h;break;case"img":case"image":case"link":tt("error",n),tt("load",n),m=h;break;case"details":tt("toggle",n),m=h;break;case"input":ke(n,h),m=we(n,h),tt("invalid",n);break;case"option":m=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},m=V({},h,{value:void 0}),tt("invalid",n);break;case"textarea":xn(n,h),m=jt(n,h),tt("invalid",n);break;default:m=h}gs(l,m),S=m;for(g in S)if(S.hasOwnProperty(g)){var E=S[g];g==="style"?vl(n,E):g==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&No(n,E)):g==="children"?typeof E=="string"?(l!=="textarea"||E!=="")&&Jt(n,E):typeof E=="number"&&Jt(n,""+E):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?E!=null&&g==="onScroll"&&tt("scroll",n):E!=null&&R(n,g,E,w))}switch(l){case"input":I(n),$t(n,h,!1);break;case"textarea":I(n),Be(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Z(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?et(n,!!h.multiple,g,!1):h.defaultValue!=null&&et(n,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=Ko)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Lt(i),null;case 6:if(n&&i.stateNode!=null)Jh(n,i,n.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=Qr($i.current),Qr(Dn.current),ea(i)){if(h=i.stateNode,l=i.memoizedProps,h[Pn]=i,(g=h.nodeValue!==l)&&(n=en,n!==null))switch(n.tag){case 3:qo(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&qo(h.nodeValue,l,(n.mode&1)!==0)}g&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Pn]=i,i.stateNode=h}return Lt(i),null;case 13:if(nt(at),h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(it&&tn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)th(),Ls(),i.flags|=98560,g=!1;else if(g=ea(i),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Pn]=i}else Ls(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Lt(i),g=!1}else vn!==null&&(Wc(vn),vn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(at.current&1)!==0?wt===0&&(wt=3):qc())),i.updateQueue!==null&&(i.flags|=4),Lt(i),null);case 4:return Fs(),Dc(n,i),n===null&&Ri(i.stateNode.containerInfo),Lt(i),null;case 10:return oc(i.type._context),Lt(i),null;case 17:return Ht(i.type)&&Xo(),Lt(i),null;case 19:if(nt(at),g=i.memoizedState,g===null)return Lt(i),null;if(h=(i.flags&128)!==0,w=g.rendering,w===null)if(h)Vi(g,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=oa(n),w!==null){for(i.flags|=128,Vi(g,!1),h=w.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)g=l,n=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Je(at,at.current&1|2),i.child}n=n.sibling}g.tail!==null&&ot()>Bs&&(i.flags|=128,h=!0,Vi(g,!1),i.lanes=4194304)}else{if(!h)if(n=oa(w),n!==null){if(i.flags|=128,h=!0,l=n.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Vi(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!it)return Lt(i),null}else 2*ot()-g.renderingStartTime>Bs&&l!==1073741824&&(i.flags|=128,h=!0,Vi(g,!1),i.lanes=4194304);g.isBackwards?(w.sibling=i.child,i.child=w):(l=g.last,l!==null?l.sibling=w:i.child=w,g.last=w)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=ot(),i.sibling=null,l=at.current,Je(at,h?l&1|2:l&1),i):(Lt(i),null);case 22:case 23:return Vc(),h=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(nn&1073741824)!==0&&(Lt(i),i.subtreeFlags&6&&(i.flags|=8192)):Lt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function S0(n,i){switch(ec(i),i.tag){case 1:return Ht(i.type)&&Xo(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Fs(),nt(Wt),nt(Dt),fc(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return dc(i),null;case 13:if(nt(at),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ls()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return nt(at),null;case 4:return Fs(),null;case 10:return oc(i.type._context),null;case 22:case 23:return Vc(),null;case 24:return null;default:return null}}var pa=!1,Ot=!1,N0=typeof WeakSet=="function"?WeakSet:Set,_e=null;function $s(n,i){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ct(n,i,h)}else l.current=null}function Rc(n,i,l){try{l()}catch(h){ct(n,i,h)}}var Zh=!1;function C0(n,i){if(Vl=Oo,n=Pd(),Il(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,S=-1,E=-1,B=0,ie=0,ae=n,se=null;t:for(;;){for(var ye;ae!==l||m!==0&&ae.nodeType!==3||(S=w+m),ae!==g||h!==0&&ae.nodeType!==3||(E=w+h),ae.nodeType===3&&(w+=ae.nodeValue.length),(ye=ae.firstChild)!==null;)se=ae,ae=ye;for(;;){if(ae===n)break t;if(se===l&&++B===m&&(S=w),se===g&&++ie===h&&(E=w),(ye=ae.nextSibling)!==null)break;ae=se,se=ae.parentNode}ae=ye}l=S===-1||E===-1?null:{start:S,end:E}}else l=null}l=l||{start:0,end:0}}else l=null;for(ql={focusedElem:n,selectionRange:l},Oo=!1,_e=i;_e!==null;)if(i=_e,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,_e=n;else for(;_e!==null;){i=_e;try{var Se=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ne=Se.memoizedProps,ht=Se.memoizedState,M=i.stateNode,T=M.getSnapshotBeforeUpdate(i.elementType===i.type?Ne:wn(i.type,Ne),ht);M.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var F=i.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){ct(i,i.return,ce)}if(n=i.sibling,n!==null){n.return=i.return,_e=n;break}_e=i.return}return Se=Zh,Zh=!1,Se}function qi(n,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&n)===n){var g=m.destroy;m.destroy=void 0,g!==void 0&&Rc(i,l,g)}m=m.next}while(m!==h)}}function ga(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function Lc(n){var i=n.ref;if(i!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof i=="function"?i(n):i.current=n}}function ef(n){var i=n.alternate;i!==null&&(n.alternate=null,ef(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Pn],delete i[Oi],delete i[Yl],delete i[c0],delete i[u0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function tf(n){return n.tag===5||n.tag===3||n.tag===4}function nf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Oc(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(n,i):l.insertBefore(n,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(n,l)):(i=l,i.appendChild(n)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Ko));else if(h!==4&&(n=n.child,n!==null))for(Oc(n,i,l),n=n.sibling;n!==null;)Oc(n,i,l),n=n.sibling}function Mc(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Mc(n,i,l),n=n.sibling;n!==null;)Mc(n,i,l),n=n.sibling}var At=null,bn=!1;function Cr(n,i,l){for(l=l.child;l!==null;)rf(n,i,l),l=l.sibling}function rf(n,i,l){if($&&typeof $.onCommitFiberUnmount=="function")try{$.onCommitFiberUnmount(N,l)}catch{}switch(l.tag){case 5:Ot||$s(l,i);case 6:var h=At,m=bn;At=null,Cr(n,i,l),At=h,bn=m,At!==null&&(bn?(n=At,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):At.removeChild(l.stateNode));break;case 18:At!==null&&(bn?(n=At,l=l.stateNode,n.nodeType===8?Xl(n.parentNode,l):n.nodeType===1&&Xl(n,l),ji(n)):Xl(At,l.stateNode));break;case 4:h=At,m=bn,At=l.stateNode.containerInfo,bn=!0,Cr(n,i,l),At=h,bn=m;break;case 0:case 11:case 14:case 15:if(!Ot&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var g=m,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Rc(l,i,w),m=m.next}while(m!==h)}Cr(n,i,l);break;case 1:if(!Ot&&($s(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(S){ct(l,i,S)}Cr(n,i,l);break;case 21:Cr(n,i,l);break;case 22:l.mode&1?(Ot=(h=Ot)||l.memoizedState!==null,Cr(n,i,l),Ot=h):Cr(n,i,l);break;default:Cr(n,i,l)}}function sf(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new N0),i.forEach(function(h){var m=M0.bind(null,n,h);l.has(h)||(l.add(h),h.then(m,m))})}}function _n(n,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];try{var g=n,w=i,S=w;e:for(;S!==null;){switch(S.tag){case 5:At=S.stateNode,bn=!1;break e;case 3:At=S.stateNode.containerInfo,bn=!0;break e;case 4:At=S.stateNode.containerInfo,bn=!0;break e}S=S.return}if(At===null)throw Error(t(160));rf(g,w,m),At=null,bn=!1;var E=m.alternate;E!==null&&(E.return=null),m.return=null}catch(B){ct(m,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)of(i,n),i=i.sibling}function of(n,i){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(_n(i,n),Ln(n),h&4){try{qi(3,n,n.return),ga(3,n)}catch(Ne){ct(n,n.return,Ne)}try{qi(5,n,n.return)}catch(Ne){ct(n,n.return,Ne)}}break;case 1:_n(i,n),Ln(n),h&512&&l!==null&&$s(l,l.return);break;case 5:if(_n(i,n),Ln(n),h&512&&l!==null&&$s(l,l.return),n.flags&32){var m=n.stateNode;try{Jt(m,"")}catch(Ne){ct(n,n.return,Ne)}}if(h&4&&(m=n.stateNode,m!=null)){var g=n.memoizedProps,w=l!==null?l.memoizedProps:g,S=n.type,E=n.updateQueue;if(n.updateQueue=null,E!==null)try{S==="input"&&g.type==="radio"&&g.name!=null&&je(m,g),ci(S,w);var B=ci(S,g);for(w=0;w<E.length;w+=2){var ie=E[w],ae=E[w+1];ie==="style"?vl(m,ae):ie==="dangerouslySetInnerHTML"?No(m,ae):ie==="children"?Jt(m,ae):R(m,ie,ae,B)}switch(S){case"input":De(m,g);break;case"textarea":ze(m,g);break;case"select":var se=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!g.multiple;var ye=g.value;ye!=null?et(m,!!g.multiple,ye,!1):se!==!!g.multiple&&(g.defaultValue!=null?et(m,!!g.multiple,g.defaultValue,!0):et(m,!!g.multiple,g.multiple?[]:"",!1))}m[Oi]=g}catch(Ne){ct(n,n.return,Ne)}}break;case 6:if(_n(i,n),Ln(n),h&4){if(n.stateNode===null)throw Error(t(162));m=n.stateNode,g=n.memoizedProps;try{m.nodeValue=g}catch(Ne){ct(n,n.return,Ne)}}break;case 3:if(_n(i,n),Ln(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{ji(i.containerInfo)}catch(Ne){ct(n,n.return,Ne)}break;case 4:_n(i,n),Ln(n);break;case 13:_n(i,n),Ln(n),m=n.child,m.flags&8192&&(g=m.memoizedState!==null,m.stateNode.isHidden=g,!g||m.alternate!==null&&m.alternate.memoizedState!==null||(zc=ot())),h&4&&sf(n);break;case 22:if(ie=l!==null&&l.memoizedState!==null,n.mode&1?(Ot=(B=Ot)||ie,_n(i,n),Ot=B):_n(i,n),Ln(n),h&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!ie&&(n.mode&1)!==0)for(_e=n,ie=n.child;ie!==null;){for(ae=_e=ie;_e!==null;){switch(se=_e,ye=se.child,se.tag){case 0:case 11:case 14:case 15:qi(4,se,se.return);break;case 1:$s(se,se.return);var Se=se.stateNode;if(typeof Se.componentWillUnmount=="function"){h=se,l=se.return;try{i=h,Se.props=i.memoizedProps,Se.state=i.memoizedState,Se.componentWillUnmount()}catch(Ne){ct(h,l,Ne)}}break;case 5:$s(se,se.return);break;case 22:if(se.memoizedState!==null){cf(ae);continue}}ye!==null?(ye.return=se,_e=ye):cf(ae)}ie=ie.sibling}e:for(ie=null,ae=n;;){if(ae.tag===5){if(ie===null){ie=ae;try{m=ae.stateNode,B?(g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(S=ae.stateNode,E=ae.memoizedProps.style,w=E!=null&&E.hasOwnProperty("display")?E.display:null,S.style.display=yl("display",w))}catch(Ne){ct(n,n.return,Ne)}}}else if(ae.tag===6){if(ie===null)try{ae.stateNode.nodeValue=B?"":ae.memoizedProps}catch(Ne){ct(n,n.return,Ne)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===n)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===n)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===n)break e;ie===ae&&(ie=null),ae=ae.return}ie===ae&&(ie=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:_n(i,n),Ln(n),h&4&&sf(n);break;case 21:break;default:_n(i,n),Ln(n)}}function Ln(n){var i=n.flags;if(i&2){try{e:{for(var l=n.return;l!==null;){if(tf(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(Jt(m,""),h.flags&=-33);var g=nf(n);Mc(n,g,m);break;case 3:case 4:var w=h.stateNode.containerInfo,S=nf(n);Oc(n,S,w);break;default:throw Error(t(161))}}catch(E){ct(n,n.return,E)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function E0(n,i,l){_e=n,af(n)}function af(n,i,l){for(var h=(n.mode&1)!==0;_e!==null;){var m=_e,g=m.child;if(m.tag===22&&h){var w=m.memoizedState!==null||pa;if(!w){var S=m.alternate,E=S!==null&&S.memoizedState!==null||Ot;S=pa;var B=Ot;if(pa=w,(Ot=E)&&!B)for(_e=m;_e!==null;)w=_e,E=w.child,w.tag===22&&w.memoizedState!==null?uf(m):E!==null?(E.return=w,_e=E):uf(m);for(;g!==null;)_e=g,af(g),g=g.sibling;_e=m,pa=S,Ot=B}lf(n)}else(m.subtreeFlags&8772)!==0&&g!==null?(g.return=m,_e=g):lf(n)}}function lf(n){for(;_e!==null;){var i=_e;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ot||ga(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Ot)if(l===null)h.componentDidMount();else{var m=i.elementType===i.type?l.memoizedProps:wn(i.type,l.memoizedProps);h.componentDidUpdate(m,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&lh(i,g,h);break;case 3:var w=i.updateQueue;if(w!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}lh(i,w,l)}break;case 5:var S=i.stateNode;if(l===null&&i.flags&4){l=S;var E=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&l.focus();break;case"img":E.src&&(l.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var ie=B.memoizedState;if(ie!==null){var ae=ie.dehydrated;ae!==null&&ji(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ot||i.flags&512&&Lc(i)}catch(se){ct(i,i.return,se)}}if(i===n){_e=null;break}if(l=i.sibling,l!==null){l.return=i.return,_e=l;break}_e=i.return}}function cf(n){for(;_e!==null;){var i=_e;if(i===n){_e=null;break}var l=i.sibling;if(l!==null){l.return=i.return,_e=l;break}_e=i.return}}function uf(n){for(;_e!==null;){var i=_e;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{ga(4,i)}catch(E){ct(i,l,E)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var m=i.return;try{h.componentDidMount()}catch(E){ct(i,m,E)}}var g=i.return;try{Lc(i)}catch(E){ct(i,g,E)}break;case 5:var w=i.return;try{Lc(i)}catch(E){ct(i,w,E)}}}catch(E){ct(i,i.return,E)}if(i===n){_e=null;break}var S=i.sibling;if(S!==null){S.return=i.return,_e=S;break}_e=i.return}}var A0=Math.ceil,xa=U.ReactCurrentDispatcher,Ic=U.ReactCurrentOwner,hn=U.ReactCurrentBatchConfig,qe=0,Nt=null,pt=null,Tt=0,nn=0,Us=_r(0),wt=0,Ki=null,Zr=0,ya=0,Fc=0,Gi=null,qt=null,zc=0,Bs=1/0,sr=null,va=!1,$c=null,Er=null,wa=!1,Ar=null,ba=0,Xi=0,Uc=null,_a=-1,ka=0;function Ft(){return(qe&6)!==0?ot():_a!==-1?_a:_a=ot()}function Tr(n){return(n.mode&1)===0?1:(qe&2)!==0&&Tt!==0?Tt&-Tt:h0.transition!==null?(ka===0&&(ka=Ae()),ka):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:dd(n.type)),n)}function kn(n,i,l,h){if(50<Xi)throw Xi=0,Uc=null,Error(t(185));Xn(n,l,h),((qe&2)===0||n!==Nt)&&(n===Nt&&((qe&2)===0&&(ya|=l),wt===4&&Pr(n,Tt)),Kt(n,h),l===1&&qe===0&&(i.mode&1)===0&&(Bs=ot()+500,Qo&&jr()))}function Kt(n,i){var l=n.callbackNode;an(n,i);var h=ut(n,n===Nt?Tt:0);if(h===0)l!==null&&Hr(l),n.callbackNode=null,n.callbackPriority=0;else if(i=h&-h,n.callbackPriority!==i){if(l!=null&&Hr(l),i===1)n.tag===0?d0(hf.bind(null,n)):Yd(hf.bind(null,n)),a0(function(){(qe&6)===0&&jr()}),l=null;else{switch(yi(h)){case 1:l=ys;break;case 4:l=Po;break;case 16:l=Vr;break;case 536870912:l=Do;break;default:l=Vr}l=wf(l,df.bind(null,n))}n.callbackPriority=i,n.callbackNode=l}}function df(n,i){if(_a=-1,ka=0,(qe&6)!==0)throw Error(t(327));var l=n.callbackNode;if(Ws()&&n.callbackNode!==l)return null;var h=ut(n,n===Nt?Tt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||i)i=ja(n,h);else{i=h;var m=qe;qe|=2;var g=mf();(Nt!==n||Tt!==i)&&(sr=null,Bs=ot()+500,ts(n,i));do try{D0();break}catch(S){ff(n,S)}while(!0);ic(),xa.current=g,qe=m,pt!==null?i=0:(Nt=null,Tt=0,i=wt)}if(i!==0){if(i===2&&(m=He(n),m!==0&&(h=m,i=Bc(n,m))),i===1)throw l=Ki,ts(n,0),Pr(n,h),Kt(n,ot()),l;if(i===6)Pr(n,h);else{if(m=n.current.alternate,(h&30)===0&&!T0(m)&&(i=ja(n,h),i===2&&(g=He(n),g!==0&&(h=g,i=Bc(n,g))),i===1))throw l=Ki,ts(n,0),Pr(n,h),Kt(n,ot()),l;switch(n.finishedWork=m,n.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:ns(n,qt,sr);break;case 3:if(Pr(n,h),(h&130023424)===h&&(i=zc+500-ot(),10<i)){if(ut(n,0)!==0)break;if(m=n.suspendedLanes,(m&h)!==h){Ft(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=Gl(ns.bind(null,n,qt,sr),i);break}ns(n,qt,sr);break;case 4:if(Pr(n,h),(h&4194240)===h)break;for(i=n.eventTimes,m=-1;0<h;){var w=31-te(h);g=1<<w,w=i[w],w>m&&(m=w),h&=~g}if(h=m,h=ot()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*A0(h/1960))-h,10<h){n.timeoutHandle=Gl(ns.bind(null,n,qt,sr),h);break}ns(n,qt,sr);break;case 5:ns(n,qt,sr);break;default:throw Error(t(329))}}}return Kt(n,ot()),n.callbackNode===l?df.bind(null,n):null}function Bc(n,i){var l=Gi;return n.current.memoizedState.isDehydrated&&(ts(n,i).flags|=256),n=ja(n,i),n!==2&&(i=qt,qt=l,i!==null&&Wc(i)),n}function Wc(n){qt===null?qt=n:qt.push.apply(qt,n)}function T0(n){for(var i=n;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var m=l[h],g=m.getSnapshot;m=m.value;try{if(!yn(g(),m))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Pr(n,i){for(i&=~Fc,i&=~ya,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var l=31-te(i),h=1<<l;n[l]=-1,i&=~h}}function hf(n){if((qe&6)!==0)throw Error(t(327));Ws();var i=ut(n,0);if((i&1)===0)return Kt(n,ot()),null;var l=ja(n,i);if(n.tag!==0&&l===2){var h=He(n);h!==0&&(i=h,l=Bc(n,h))}if(l===1)throw l=Ki,ts(n,0),Pr(n,i),Kt(n,ot()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ns(n,qt,sr),Kt(n,ot()),null}function Hc(n,i){var l=qe;qe|=1;try{return n(i)}finally{qe=l,qe===0&&(Bs=ot()+500,Qo&&jr())}}function es(n){Ar!==null&&Ar.tag===0&&(qe&6)===0&&Ws();var i=qe;qe|=1;var l=hn.transition,h=Fe;try{if(hn.transition=null,Fe=1,n)return n()}finally{Fe=h,hn.transition=l,qe=i,(qe&6)===0&&jr()}}function Vc(){nn=Us.current,nt(Us)}function ts(n,i){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,o0(l)),pt!==null)for(l=pt.return;l!==null;){var h=l;switch(ec(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Xo();break;case 3:Fs(),nt(Wt),nt(Dt),fc();break;case 5:dc(h);break;case 4:Fs();break;case 13:nt(at);break;case 19:nt(at);break;case 10:oc(h.type._context);break;case 22:case 23:Vc()}l=l.return}if(Nt=n,pt=n=Dr(n.current,null),Tt=nn=i,wt=0,Ki=null,Fc=ya=Zr=0,qt=Gi=null,Yr!==null){for(i=0;i<Yr.length;i++)if(l=Yr[i],h=l.interleaved,h!==null){l.interleaved=null;var m=h.next,g=l.pending;if(g!==null){var w=g.next;g.next=m,h.next=w}l.pending=h}Yr=null}return n}function ff(n,i){do{var l=pt;try{if(ic(),aa.current=da,la){for(var h=lt.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}la=!1}if(Jr=0,St=vt=lt=null,Ui=!1,Bi=0,Ic.current=null,l===null||l.return===null){wt=1,Ki=i,pt=null;break}e:{var g=n,w=l.return,S=l,E=i;if(i=Tt,S.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var B=E,ie=S,ae=ie.tag;if((ie.mode&1)===0&&(ae===0||ae===11||ae===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var ye=Ih(w);if(ye!==null){ye.flags&=-257,Fh(ye,w,S,g,i),ye.mode&1&&Mh(g,B,i),i=ye,E=B;var Se=i.updateQueue;if(Se===null){var Ne=new Set;Ne.add(E),i.updateQueue=Ne}else Se.add(E);break e}else{if((i&1)===0){Mh(g,B,i),qc();break e}E=Error(t(426))}}else if(it&&S.mode&1){var ht=Ih(w);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Fh(ht,w,S,g,i),rc(zs(E,S));break e}}g=E=zs(E,S),wt!==4&&(wt=2),Gi===null?Gi=[g]:Gi.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var M=Lh(g,E,i);ah(g,M);break e;case 1:S=E;var T=g.type,F=g.stateNode;if((g.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Er===null||!Er.has(F)))){g.flags|=65536,i&=-i,g.lanes|=i;var ce=Oh(g,S,i);ah(g,ce);break e}}g=g.return}while(g!==null)}gf(l)}catch(Ce){i=Ce,pt===l&&l!==null&&(pt=l=l.return);continue}break}while(!0)}function mf(){var n=xa.current;return xa.current=da,n===null?da:n}function qc(){(wt===0||wt===3||wt===2)&&(wt=4),Nt===null||(Zr&268435455)===0&&(ya&268435455)===0||Pr(Nt,Tt)}function ja(n,i){var l=qe;qe|=2;var h=mf();(Nt!==n||Tt!==i)&&(sr=null,ts(n,i));do try{P0();break}catch(m){ff(n,m)}while(!0);if(ic(),qe=l,xa.current=h,pt!==null)throw Error(t(261));return Nt=null,Tt=0,wt}function P0(){for(;pt!==null;)pf(pt)}function D0(){for(;pt!==null&&!xi();)pf(pt)}function pf(n){var i=vf(n.alternate,n,nn);n.memoizedProps=n.pendingProps,i===null?gf(n):pt=i,Ic.current=null}function gf(n){var i=n;do{var l=i.alternate;if(n=i.return,(i.flags&32768)===0){if(l=j0(l,i,nn),l!==null){pt=l;return}}else{if(l=S0(l,i),l!==null){l.flags&=32767,pt=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,pt=null;return}}if(i=i.sibling,i!==null){pt=i;return}pt=i=n}while(i!==null);wt===0&&(wt=5)}function ns(n,i,l){var h=Fe,m=hn.transition;try{hn.transition=null,Fe=1,R0(n,i,l,h)}finally{hn.transition=m,Fe=h}return null}function R0(n,i,l,h){do Ws();while(Ar!==null);if((qe&6)!==0)throw Error(t(327));l=n.finishedWork;var m=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=l.lanes|l.childLanes;if(vs(n,g),n===Nt&&(pt=Nt=null,Tt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||wa||(wa=!0,wf(Vr,function(){return Ws(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=hn.transition,hn.transition=null;var w=Fe;Fe=1;var S=qe;qe|=4,Ic.current=null,C0(n,l),of(l,n),Zg(ql),Oo=!!Vl,ql=Vl=null,n.current=l,E0(l),_l(),qe=S,Fe=w,hn.transition=g}else n.current=l;if(wa&&(wa=!1,Ar=n,ba=m),g=n.pendingLanes,g===0&&(Er=null),J(l.stateNode),Kt(n,ot()),i!==null)for(h=n.onRecoverableError,l=0;l<i.length;l++)m=i[l],h(m.value,{componentStack:m.stack,digest:m.digest});if(va)throw va=!1,n=$c,$c=null,n;return(ba&1)!==0&&n.tag!==0&&Ws(),g=n.pendingLanes,(g&1)!==0?n===Uc?Xi++:(Xi=0,Uc=n):Xi=0,jr(),null}function Ws(){if(Ar!==null){var n=yi(ba),i=hn.transition,l=Fe;try{if(hn.transition=null,Fe=16>n?16:n,Ar===null)var h=!1;else{if(n=Ar,Ar=null,ba=0,(qe&6)!==0)throw Error(t(331));var m=qe;for(qe|=4,_e=n.current;_e!==null;){var g=_e,w=g.child;if((_e.flags&16)!==0){var S=g.deletions;if(S!==null){for(var E=0;E<S.length;E++){var B=S[E];for(_e=B;_e!==null;){var ie=_e;switch(ie.tag){case 0:case 11:case 15:qi(8,ie,g)}var ae=ie.child;if(ae!==null)ae.return=ie,_e=ae;else for(;_e!==null;){ie=_e;var se=ie.sibling,ye=ie.return;if(ef(ie),ie===B){_e=null;break}if(se!==null){se.return=ye,_e=se;break}_e=ye}}}var Se=g.alternate;if(Se!==null){var Ne=Se.child;if(Ne!==null){Se.child=null;do{var ht=Ne.sibling;Ne.sibling=null,Ne=ht}while(Ne!==null)}}_e=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,_e=w;else e:for(;_e!==null;){if(g=_e,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:qi(9,g,g.return)}var M=g.sibling;if(M!==null){M.return=g.return,_e=M;break e}_e=g.return}}var T=n.current;for(_e=T;_e!==null;){w=_e;var F=w.child;if((w.subtreeFlags&2064)!==0&&F!==null)F.return=w,_e=F;else e:for(w=T;_e!==null;){if(S=_e,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:ga(9,S)}}catch(Ce){ct(S,S.return,Ce)}if(S===w){_e=null;break e}var ce=S.sibling;if(ce!==null){ce.return=S.return,_e=ce;break e}_e=S.return}}if(qe=m,jr(),$&&typeof $.onPostCommitFiberRoot=="function")try{$.onPostCommitFiberRoot(N,n)}catch{}h=!0}return h}finally{Fe=l,hn.transition=i}}return!1}function xf(n,i,l){i=zs(l,i),i=Lh(n,i,1),n=Nr(n,i,1),i=Ft(),n!==null&&(Xn(n,1,i),Kt(n,i))}function ct(n,i,l){if(n.tag===3)xf(n,n,l);else for(;i!==null;){if(i.tag===3){xf(i,n,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Er===null||!Er.has(h))){n=zs(l,n),n=Oh(i,n,1),i=Nr(i,n,1),n=Ft(),i!==null&&(Xn(i,1,n),Kt(i,n));break}}i=i.return}}function L0(n,i,l){var h=n.pingCache;h!==null&&h.delete(i),i=Ft(),n.pingedLanes|=n.suspendedLanes&l,Nt===n&&(Tt&l)===l&&(wt===4||wt===3&&(Tt&130023424)===Tt&&500>ot()-zc?ts(n,0):Fc|=l),Kt(n,i)}function yf(n,i){i===0&&((n.mode&1)===0?i=1:(i=Me,Me<<=1,(Me&130023424)===0&&(Me=4194304)));var l=Ft();n=tr(n,i),n!==null&&(Xn(n,i,l),Kt(n,l))}function O0(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),yf(n,l)}function M0(n,i){var l=0;switch(n.tag){case 13:var h=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),yf(n,l)}var vf;vf=function(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps||Wt.current)Vt=!0;else{if((n.lanes&l)===0&&(i.flags&128)===0)return Vt=!1,k0(n,i,l);Vt=(n.flags&131072)!==0}else Vt=!1,it&&(i.flags&1048576)!==0&&Qd(i,Zo,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;ma(n,i),n=i.pendingProps;var m=Ps(i,Dt.current);Is(i,l),m=gc(null,i,h,n,m,l);var g=xc();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ht(h)?(g=!0,Yo(i)):g=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,cc(i),m.updater=ha,i.stateNode=m,m._reactInternals=i,kc(i,h,n,l),i=Cc(null,i,h,!0,g,l)):(i.tag=0,it&&g&&Zl(i),It(null,i,m,l),i=i.child),i;case 16:h=i.elementType;e:{switch(ma(n,i),n=i.pendingProps,m=h._init,h=m(h._payload),i.type=h,m=i.tag=F0(h),n=wn(h,n),m){case 0:i=Nc(null,i,h,n,l);break e;case 1:i=Hh(null,i,h,n,l);break e;case 11:i=zh(null,i,h,n,l);break e;case 14:i=$h(null,i,h,wn(h.type,n),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:wn(h,m),Nc(n,i,h,m,l);case 1:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:wn(h,m),Hh(n,i,h,m,l);case 3:e:{if(Vh(i),n===null)throw Error(t(387));h=i.pendingProps,g=i.memoizedState,m=g.element,oh(n,i),ia(i,h,null,l);var w=i.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){m=zs(Error(t(423)),i),i=qh(n,i,h,l,m);break e}else if(h!==m){m=zs(Error(t(424)),i),i=qh(n,i,h,l,m);break e}else for(tn=br(i.stateNode.containerInfo.firstChild),en=i,it=!0,vn=null,l=sh(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ls(),h===m){i=rr(n,i,l);break e}It(n,i,h,l)}i=i.child}return i;case 5:return ch(i),n===null&&nc(i),h=i.type,m=i.pendingProps,g=n!==null?n.memoizedProps:null,w=m.children,Kl(h,m)?w=null:g!==null&&Kl(h,g)&&(i.flags|=32),Wh(n,i),It(n,i,w,l),i.child;case 6:return n===null&&nc(i),null;case 13:return Kh(n,i,l);case 4:return uc(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=Os(i,null,h,l):It(n,i,h,l),i.child;case 11:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:wn(h,m),zh(n,i,h,m,l);case 7:return It(n,i,i.pendingProps,l),i.child;case 8:return It(n,i,i.pendingProps.children,l),i.child;case 12:return It(n,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,m=i.pendingProps,g=i.memoizedProps,w=m.value,Je(na,h._currentValue),h._currentValue=w,g!==null)if(yn(g.value,w)){if(g.children===m.children&&!Wt.current){i=rr(n,i,l);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var S=g.dependencies;if(S!==null){w=g.child;for(var E=S.firstContext;E!==null;){if(E.context===h){if(g.tag===1){E=nr(-1,l&-l),E.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var ie=B.pending;ie===null?E.next=E:(E.next=ie.next,ie.next=E),B.pending=E}}g.lanes|=l,E=g.alternate,E!==null&&(E.lanes|=l),ac(g.return,l,i),S.lanes|=l;break}E=E.next}}else if(g.tag===10)w=g.type===i.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=l,S=w.alternate,S!==null&&(S.lanes|=l),ac(w,l,i),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===i){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}It(n,i,m.children,l),i=i.child}return i;case 9:return m=i.type,h=i.pendingProps.children,Is(i,l),m=un(m),h=h(m),i.flags|=1,It(n,i,h,l),i.child;case 14:return h=i.type,m=wn(h,i.pendingProps),m=wn(h.type,m),$h(n,i,h,m,l);case 15:return Uh(n,i,i.type,i.pendingProps,l);case 17:return h=i.type,m=i.pendingProps,m=i.elementType===h?m:wn(h,m),ma(n,i),i.tag=1,Ht(h)?(n=!0,Yo(i)):n=!1,Is(i,l),Dh(i,h,m),kc(i,h,m,l),Cc(null,i,h,!0,n,l);case 19:return Xh(n,i,l);case 22:return Bh(n,i,l)}throw Error(t(156,i.tag))};function wf(n,i){return To(n,i)}function I0(n,i,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(n,i,l,h){return new I0(n,i,l,h)}function Kc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function F0(n){if(typeof n=="function")return Kc(n)?1:0;if(n!=null){if(n=n.$$typeof,n===A)return 11;if(n===le)return 14}return 2}function Dr(n,i){var l=n.alternate;return l===null?(l=fn(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function Sa(n,i,l,h,m,g){var w=2;if(h=n,typeof n=="function")Kc(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case q:return rs(l.children,m,g,i);case G:w=8,m|=8;break;case fe:return n=fn(12,l,i,m|2),n.elementType=fe,n.lanes=g,n;case Y:return n=fn(13,l,i,m),n.elementType=Y,n.lanes=g,n;case ne:return n=fn(19,l,i,m),n.elementType=ne,n.lanes=g,n;case pe:return Na(l,m,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case O:w=10;break e;case he:w=9;break e;case A:w=11;break e;case le:w=14;break e;case me:w=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=fn(w,l,i,m),i.elementType=n,i.type=h,i.lanes=g,i}function rs(n,i,l,h){return n=fn(7,n,h,i),n.lanes=l,n}function Na(n,i,l,h){return n=fn(22,n,h,i),n.elementType=pe,n.lanes=l,n.stateNode={isHidden:!1},n}function Gc(n,i,l){return n=fn(6,n,null,i),n.lanes=l,n}function Xc(n,i,l){return i=fn(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function z0(n,i,l,h,m){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Yc(n,i,l,h,m,g,w,S,E){return n=new z0(n,i,l,S,E),i===1?(i=1,g===!0&&(i|=8)):i=0,g=fn(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(g),n}function $0(n,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:h==null?null:""+h,children:n,containerInfo:i,implementation:l}}function bf(n){if(!n)return kr;n=n._reactInternals;e:{if(fr(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ht(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(Ht(l))return Gd(n,l,i)}return i}function _f(n,i,l,h,m,g,w,S,E){return n=Yc(l,h,!0,n,m,g,w,S,E),n.context=bf(null),l=n.current,h=Ft(),m=Tr(l),g=nr(h,m),g.callback=i??null,Nr(l,g,m),n.current.lanes=m,Xn(n,m,h),Kt(n,h),n}function Ca(n,i,l,h){var m=i.current,g=Ft(),w=Tr(m);return l=bf(l),i.context===null?i.context=l:i.pendingContext=l,i=nr(g,w),i.payload={element:n},h=h===void 0?null:h,h!==null&&(i.callback=h),n=Nr(m,i,w),n!==null&&(kn(n,m,w,g),sa(n,m,w)),w}function Ea(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function kf(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Qc(n,i){kf(n,i),(n=n.alternate)&&kf(n,i)}function U0(){return null}var jf=typeof reportError=="function"?reportError:function(n){console.error(n)};function Jc(n){this._internalRoot=n}Aa.prototype.render=Jc.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Ca(n,i,null,null)},Aa.prototype.unmount=Jc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;es(function(){Ca(null,n,null,null)}),i[Qn]=null}};function Aa(n){this._internalRoot=n}Aa.prototype.unstable_scheduleHydration=function(n){if(n){var i=bs();n={blockedOn:null,target:n,priority:i};for(var l=0;l<yr.length&&i!==0&&i<yr[l].priority;l++);yr.splice(l,0,n),l===0&&cd(n)}};function Zc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ta(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Sf(){}function B0(n,i,l,h,m){if(m){if(typeof h=="function"){var g=h;h=function(){var B=Ea(w);g.call(B)}}var w=_f(i,h,n,0,null,!1,!1,"",Sf);return n._reactRootContainer=w,n[Qn]=w.current,Ri(n.nodeType===8?n.parentNode:n),es(),w}for(;m=n.lastChild;)n.removeChild(m);if(typeof h=="function"){var S=h;h=function(){var B=Ea(E);S.call(B)}}var E=Yc(n,0,!1,null,null,!1,!1,"",Sf);return n._reactRootContainer=E,n[Qn]=E.current,Ri(n.nodeType===8?n.parentNode:n),es(function(){Ca(i,E,l,h)}),E}function Pa(n,i,l,h,m){var g=l._reactRootContainer;if(g){var w=g;if(typeof m=="function"){var S=m;m=function(){var E=Ea(w);S.call(E)}}Ca(i,w,n,m)}else w=B0(l,i,n,m,h);return Ea(w)}ws=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var l=Ve(i.pendingLanes);l!==0&&(yt(i,l|1),Kt(i,ot()),(qe&6)===0&&(Bs=ot()+500,jr()))}break;case 13:es(function(){var h=tr(n,1);if(h!==null){var m=Ft();kn(h,n,1,m)}}),Qc(n,1)}},Yn=function(n){if(n.tag===13){var i=tr(n,134217728);if(i!==null){var l=Ft();kn(i,n,134217728,l)}Qc(n,134217728)}},mr=function(n){if(n.tag===13){var i=Tr(n),l=tr(n,i);if(l!==null){var h=Ft();kn(l,n,i,h)}Qc(n,i)}},bs=function(){return Fe},vi=function(n,i){var l=Fe;try{return Fe=n,i()}finally{Fe=l}},di=function(n,i,l){switch(i){case"input":if(De(n,l),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==n&&h.form===n.form){var m=Go(h);if(!m)throw Error(t(90));Q(h),De(h,m)}}}break;case"textarea":ze(n,l);break;case"select":i=l.value,i!=null&&et(n,!!l.multiple,i,!1)}},Eo=Hc,Ao=es;var W0={usingClientEntryPoint:!1,Events:[Mi,As,Go,Wn,Co,Hc]},Yi={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H0={bundleType:Yi.bundleType,version:Yi.version,rendererPackageName:Yi.rendererPackageName,rendererConfig:Yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=pi(n),n===null?null:n.stateNode},findFiberByHostInstance:Yi.findFiberByHostInstance||U0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Da.isDisabled&&Da.supportsFiber)try{N=Da.inject(H0),$=Da}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W0,Gt.createPortal=function(n,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(i))throw Error(t(200));return $0(n,i,null,l)},Gt.createRoot=function(n,i){if(!Zc(n))throw Error(t(299));var l=!1,h="",m=jf;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=Yc(n,1,!1,null,null,l,!1,h,m),n[Qn]=i.current,Ri(n.nodeType===8?n.parentNode:n),new Jc(i)},Gt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=pi(i),n=n===null?null:n.stateNode,n},Gt.flushSync=function(n){return es(n)},Gt.hydrate=function(n,i,l){if(!Ta(i))throw Error(t(200));return Pa(null,n,i,!0,l)},Gt.hydrateRoot=function(n,i,l){if(!Zc(n))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,m=!1,g="",w=jf;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),i=_f(i,null,n,1,l??null,m,!1,g,w),n[Qn]=i.current,Ri(n),h)for(n=0;n<h.length;n++)l=h[n],m=l._getVersion,m=m(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,m]:i.mutableSourceEagerHydrationData.push(l,m);return new Aa(i)},Gt.render=function(n,i,l){if(!Ta(i))throw Error(t(200));return Pa(null,n,i,!1,l)},Gt.unmountComponentAtNode=function(n){if(!Ta(n))throw Error(t(40));return n._reactRootContainer?(es(function(){Pa(null,null,n,!1,function(){n._reactRootContainer=null,n[Qn]=null})}),!0):!1},Gt.unstable_batchedUpdates=Hc,Gt.unstable_renderSubtreeIntoContainer=function(n,i,l,h){if(!Ta(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Pa(n,i,l,!1,h)},Gt.version="18.3.1-next-f1338f8080-20240426",Gt}var Rf;function Z0(){if(Rf)return nu.exports;Rf=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),nu.exports=J0(),nu.exports}var Lf;function ex(){if(Lf)return Ra;Lf=1;var r=Z0();return Ra.createRoot=r.createRoot,Ra.hydrateRoot=r.hydrateRoot,Ra}var tx=ex();const nx=zu(tx),rx="modulepreload",sx=function(r){return"/Sistema-Contable-Nuevo/"+r},Of={},_o=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let p=function(x){return Promise.all(x.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=p;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");o=p(t.map(x=>{if(x=sx(x),x in Of)return;Of[x]=!0;const y=x.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${v}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":rx,y||(b.as="script"),b.crossOrigin="",b.href=x,f&&b.setAttribute("nonce",f),document.head.appendChild(b),y)return new Promise((_,j)=>{b.addEventListener("load",_),b.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${x}`)))})}))}function a(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return o.then(d=>{for(const f of d||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})},ix=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>_o(async()=>{const{default:s}=await Promise.resolve().then(()=>ai);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Uu extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class ox extends Uu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Mf extends Uu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class If extends Uu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _u;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(_u||(_u={}));var ax=function(r,e,t,s){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(x){try{p(s.next(x))}catch(y){c(y)}}function f(x){try{p(s.throw(x))}catch(y){c(y)}}function p(x){x.done?a(x.value):o(x.value).then(d,f)}p((s=s.apply(r,e||[])).next())})};class lx{constructor(e,{headers:t={},customFetch:s,region:o=_u.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=ix(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return ax(this,void 0,void 0,function*(){try{const{headers:o,method:a,body:c}=t;let d={},{region:f}=t;f||(f=this.region);const p=new URL(`${this.url}/${e}`);f&&f!=="any"&&(d["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let x;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",x=c):typeof c=="string"?(d["Content-Type"]="text/plain",x=c):typeof FormData<"u"&&c instanceof FormData?x=c:(d["Content-Type"]="application/json",x=JSON.stringify(c)));const y=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),o),body:x}).catch(j=>{throw new ox(j)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new Mf(y);if(!y.ok)throw new If(y);let b=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield y.json():b==="application/octet-stream"?_=yield y.blob():b==="text/event-stream"?_=y:b==="multipart/form-data"?_=yield y.formData():_=yield y.text(),{data:_,error:null,response:y}}catch(o){return{data:null,error:o,response:o instanceof If||o instanceof Mf?o.context:void 0}}})}}var Et={},Hs={},Vs={},qs={},Ks={},Gs={},cx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ii=cx();const ux=ii.fetch,mp=ii.fetch.bind(ii),pp=ii.Headers,dx=ii.Request,hx=ii.Response,ai=Object.freeze(Object.defineProperty({__proto__:null,Headers:pp,Request:dx,Response:hx,default:mp,fetch:ux},Symbol.toStringTag,{value:"Module"})),fx=q0(ai);var La={},Ff;function gp(){if(Ff)return La;Ff=1,Object.defineProperty(La,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return La.default=r,La}var zf;function xp(){if(zf)return Gs;zf=1;var r=Gs&&Gs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Gs,"__esModule",{value:!0});const e=r(fx),t=r(gp());class s{constructor(a){var c,d;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(c=a.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=a.signal,this.isMaybeSingle=(d=a.isMaybeSingle)!==null&&d!==void 0?d:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,c){return this.headers=new Headers(this.headers),this.headers.set(a,c),this}then(a,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let f=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var x,y,v,b;let _=null,j=null,k=null,D=p.status,P=p.statusText;if(p.ok){if(this.method!=="HEAD"){const z=await p.text();z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?j=z:j=JSON.parse(z))}const U=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),H=(v=p.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");U&&H&&H.length>1&&(k=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(_={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,k=null,D=406,P="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const U=await p.text();try{_=JSON.parse(U),Array.isArray(_)&&p.status===404&&(j=[],_=null,D=200,P="OK")}catch{p.status===404&&U===""?(D=204,P="No Content"):_={message:U}}if(_&&this.isMaybeSingle&&(!((b=_?.details)===null||b===void 0)&&b.includes("0 rows"))&&(_=null,D=200,P="OK"),_&&this.shouldThrowOnError)throw new t.default(_)}return{error:_,data:j,count:k,status:D,statusText:P}});return this.shouldThrowOnError||(f=f.catch(p=>{var x,y,v;return{error:{message:`${(x=p?.name)!==null&&x!==void 0?x:"FetchError"}: ${p?.message}`,details:`${(y=p?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=p?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),f.then(a,c)}returns(){return this}overrideTypes(){return this}}return Gs.default=s,Gs}var $f;function yp(){if($f)return Ks;$f=1;var r=Ks&&Ks.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ks,"__esModule",{value:!0});const e=r(xp());class t extends e.default{select(o){let a=!1;const c=(o??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:c,foreignTable:d,referencedTable:f=d}={}){const p=f?`${f}.order`:"order",x=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${x?`${x},`:""}${o}.${a?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:c=a}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,a,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${o}`),this.url.searchParams.set(p,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:c=!1,buffers:d=!1,wal:f=!1,format:p="text"}={}){var x;const y=[o?"analyze":null,a?"verbose":null,c?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${v}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Ks.default=t,Ks}var Uf;function Bu(){if(Uf)return qs;Uf=1;var r=qs&&qs.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(qs,"__esModule",{value:!0});const e=r(yp());class t extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const c=Array.from(new Set(a)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(o,`in.(${c})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:c,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const p=c===void 0?"":`(${c})`;return this.url.searchParams.append(o,`${f}fts${p}.${a}`),this}match(o){return Object.entries(o).forEach(([a,c])=>{this.url.searchParams.append(a,`eq.${c}`)}),this}not(o,a,c){return this.url.searchParams.append(o,`not.${a}.${c}`),this}or(o,{foreignTable:a,referencedTable:c=a}={}){const d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${o})`),this}filter(o,a,c){return this.url.searchParams.append(o,`${a}.${c}`),this}}return qs.default=t,qs}var Bf;function vp(){if(Bf)return Vs;Bf=1;var r=Vs&&Vs.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Vs,"__esModule",{value:!0});const e=r(Bu());class t{constructor(o,{headers:a={},schema:c,fetch:d}){this.url=o,this.headers=new Headers(a),this.schema=c,this.fetch=d}select(o,{head:a=!1,count:c}={}){const d=a?"HEAD":"GET";let f=!1;const p=(o??"*").split("").map(x=>/\s/.test(x)&&!f?"":(x==='"'&&(f=!f),x)).join("");return this.url.searchParams.set("select",p),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:c=!0}={}){var d;const f="POST";if(a&&this.headers.append("Prefer",`count=${a}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(p.length>0){const x=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:c=!1,count:d,defaultToNull:f=!0}={}){var p;const x="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const y=o.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:a}={}){var c;const d="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:o}={}){var a;const c="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Vs.default=t,Vs}var Wf;function mx(){if(Wf)return Hs;Wf=1;var r=Hs&&Hs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Hs,"__esModule",{value:!0});const e=r(vp()),t=r(Bu());class s{constructor(a,{headers:c={},schema:d,fetch:f}={}){this.url=a,this.headers=new Headers(c),this.schemaName=d,this.fetch=f}from(a){const c=new URL(`${this.url}/${a}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,c={},{head:d=!1,get:f=!1,count:p}={}){var x;let y;const v=new URL(`${this.url}/rpc/${a}`);let b;d||f?(y=d?"HEAD":"GET",Object.entries(c).filter(([j,k])=>k!==void 0).map(([j,k])=>[j,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([j,k])=>{v.searchParams.append(j,k)})):(y="POST",b=c);const _=new Headers(this.headers);return p&&_.set("Prefer",`count=${p}`),new t.default({method:y,url:v,headers:_,schema:this.schemaName,body:b,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return Hs.default=s,Hs}var Hf;function px(){if(Hf)return Et;Hf=1;var r=Et&&Et.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Et,"__esModule",{value:!0}),Et.PostgrestError=Et.PostgrestBuilder=Et.PostgrestTransformBuilder=Et.PostgrestFilterBuilder=Et.PostgrestQueryBuilder=Et.PostgrestClient=void 0;const e=r(mx());Et.PostgrestClient=e.default;const t=r(vp());Et.PostgrestQueryBuilder=t.default;const s=r(Bu());Et.PostgrestFilterBuilder=s.default;const o=r(yp());Et.PostgrestTransformBuilder=o.default;const a=r(xp());Et.PostgrestBuilder=a.default;const c=r(gp());return Et.PostgrestError=c.default,Et.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:a.default,PostgrestError:c.default},Et}var gx=px();const xx=zu(gx),{PostgrestClient:yx,PostgrestQueryBuilder:X_,PostgrestFilterBuilder:Y_,PostgrestTransformBuilder:Q_,PostgrestBuilder:J_,PostgrestError:Z_}=xx;class vx{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const wx="2.15.4",bx=`realtime-js/${wx}`,_x="1.0.0",ku=1e4,kx=1e3,jx=100;var co;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(co||(co={}));var bt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(bt||(bt={}));var Sn;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Sn||(Sn={}));var ju;(function(r){r.websocket="websocket"})(ju||(ju={}));var ds;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(ds||(ds={}));class Sx{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const o=t.getUint8(1),a=t.getUint8(2);let c=this.HEADER_LENGTH+2;const d=s.decode(e.slice(c,c+o));c=c+o;const f=s.decode(e.slice(c,c+a));c=c+a;const p=JSON.parse(s.decode(e.slice(c,e.byteLength)));return{ref:null,topic:d,event:f,payload:p}}}class wp{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Ze||(Ze={}));const Vf=(r,e,t={})=>{var s;const o=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,c)=>(a[c]=Nx(c,r,e,o),a),{})},Nx=(r,e,t,s)=>{const o=e.find(d=>d.name===r),a=o?.type,c=t[r];return a&&!s.includes(a)?bp(a,c):Su(c)},bp=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Tx(e,t)}switch(r){case Ze.bool:return Cx(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return Ex(e);case Ze.json:case Ze.jsonb:return Ax(e);case Ze.timestamp:return Px(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return Su(e);default:return Su(e)}},Su=r=>r,Cx=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Ex=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Ax=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Tx=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let a;const c=r.slice(1,t);try{a=JSON.parse("["+c+"]")}catch{a=c?c.split(","):[]}return a.map(d=>bp(e,d))}return r},Px=r=>typeof r=="string"?r.replace(" ","T"):r,_p=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class iu{constructor(e,t,s={},o=ku){this.channel=e,this.event=t,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qf;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(qf||(qf={}));class uo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:a,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=uo.syncState(this.state,o,a,c),this.pendingDiffs.forEach(f=>{this.state=uo.syncDiff(this.state,f,a,c)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},o=>{const{onJoin:a,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=uo.syncDiff(this.state,o,a,c),d())}),this.onJoin((o,a,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:c})}),this.onLeave((o,a,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,o){const a=this.cloneDeep(e),c=this.transformState(t),d={},f={};return this.map(a,(p,x)=>{c[p]||(f[p]=x)}),this.map(c,(p,x)=>{const y=a[p];if(y){const v=x.map(k=>k.presence_ref),b=y.map(k=>k.presence_ref),_=x.filter(k=>b.indexOf(k.presence_ref)<0),j=y.filter(k=>v.indexOf(k.presence_ref)<0);_.length>0&&(d[p]=_),j.length>0&&(f[p]=j)}else d[p]=x}),this.syncDiff(a,{joins:d,leaves:f},s,o)}static syncDiff(e,t,s,o){const{joins:a,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(a,(d,f)=>{var p;const x=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(f),x.length>0){const y=e[d].map(b=>b.presence_ref),v=x.filter(b=>y.indexOf(b.presence_ref)<0);e[d].unshift(...v)}s(d,x,f)}),this.map(c,(d,f)=>{let p=e[d];if(!p)return;const x=f.map(y=>y.presence_ref);p=p.filter(y=>x.indexOf(y.presence_ref)<0),e[d]=p,o(d,p,f),p.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const o=e[s];return"metas"in o?t[s]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Kf;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Kf||(Kf={}));var ho;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ho||(ho={}));var cr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(cr||(cr={}));class Wu{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new iu(this,Sn.join,this.params,this.timeout),this.rejoinTimer=new wp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sn.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new uo(this),this.broadcastEndpointURL=_p(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==bt.closed){const{config:{broadcast:c,presence:d,private:f}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(b=>b.filter))!==null&&o!==void 0?o:[],x=!!this.bindings[ho.PRESENCE]&&this.bindings[ho.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,y={},v={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:x}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(cr.CHANNEL_ERROR,b)),this._onClose(()=>e?.(cr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:b})=>{var _;if(this.socket.setAuth(),b===void 0){e?.(cr.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,k=(_=j?.length)!==null&&_!==void 0?_:0,D=[];for(let P=0;P<k;P++){const R=j[P],{filter:{event:U,schema:H,table:z,filter:q}}=R,G=b&&b[P];if(G&&G.event===U&&G.schema===H&&G.table===z&&G.filter===q)D.push(Object.assign(Object.assign({},R),{id:G.id}));else{this.unsubscribe(),this.state=bt.errored,e?.(cr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(cr.SUBSCRIBED);return}}).receive("error",b=>{this.state=bt.errored,e?.(cr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(cr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===bt.joined&&e===ho.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:c}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var c,d,f;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new iu(this,Sn.leave,{},e),s.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const o=new AbortController,a=setTimeout(()=>o.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(a),c}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new iu(this,e,t,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>jx){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var o,a;const c=e.toLocaleLowerCase(),{close:d,error:f,leave:p,join:x}=Sn;if(s&&[d,f,p,x].indexOf(c)>=0&&s!==this._joinRef())return;let v=this._onMessage(c,t,s);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var _,j,k;return((_=b.filter)===null||_===void 0?void 0:_.event)==="*"||((k=(j=b.filter)===null||j===void 0?void 0:j.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===c}).map(b=>b.callback(v,s)):(a=this.bindings[c])===null||a===void 0||a.filter(b=>{var _,j,k,D,P,R;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const U=b.id,H=(_=b.filter)===null||_===void 0?void 0:_.event;return U&&((j=t.ids)===null||j===void 0?void 0:j.includes(U))&&(H==="*"||H?.toLocaleLowerCase()===((k=t.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const U=(P=(D=b?.filter)===null||D===void 0?void 0:D.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return U==="*"||U===((R=t?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:j,table:k,commit_timestamp:D,type:P,errors:R}=_;v=Object.assign(Object.assign({},{schema:j,table:k,commit_timestamp:D,eventType:P,new:{},old:{},errors:R}),this._getPayloadRecords(_))}b.callback(v,s)})}_isClosed(){return this.state===bt.closed}_isJoined(){return this.state===bt.joined}_isJoining(){return this.state===bt.joining}_isLeaving(){return this.state===bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const o=e.toLocaleLowerCase(),a={type:o,filter:t,callback:s};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Wu.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Sn.close,{},e)}_onError(e){this._on(Sn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Vf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Vf(e.columns,e.old_record)),t}}const ou=()=>{},Oa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Dx=[1e3,2e3,5e3,1e4],Rx=1e4,Lx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ox{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ku,this.transport=null,this.heartbeatIntervalMs=Oa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ou,this.ref=0,this.reconnectTimer=null,this.logger=ou,this.conn=null,this.sendBuffer=[],this.serializer=new Sx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...c)=>_o(async()=>{const{default:d}=await Promise.resolve().then(()=>ai);return{default:d}},void 0).then(({default:d})=>d(...c)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...c)=>a(...c)},!(!((s=t?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ju.websocket}`,this.httpEndpoint=_p(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_x}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case co.connecting:return ds.Connecting;case co.open:return ds.Open;case co.closing:return ds.Closing;default:return ds.Closed}}isConnected(){return this.connectionState()===ds.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,o=this.getChannels().find(a=>a.topic===s);if(o)return o;{const a=new Wu(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:o,ref:a}=e,c=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${t} ${s} (${a})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(kx,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Oa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:a,ref:c}=t,d=c?`(${c})`:"",f=a.status||"";this.log("receive",`${f} ${s} ${o} ${d}`.trim(),a),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,a,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Sn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${s}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Lx],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const o={access_token:t,version:bx};t&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Sn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new wp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Oa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,o,a,c,d,f,p,x;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:ku,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:Oa.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:ou,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(y=>Dx[y-1]||Rx),this.encode=(p=e?.encode)!==null&&p!==void 0?p:((y,v)=>v(JSON.stringify(y))),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Hu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _t(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Mx extends Hu{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Nu extends Hu{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ix=function(r,e,t,s){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(x){try{p(s.next(x))}catch(y){c(y)}}function f(x){try{p(s.throw(x))}catch(y){c(y)}}function p(x){x.done?a(x.value):o(x.value).then(d,f)}p((s=s.apply(r,e||[])).next())})};const kp=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>_o(async()=>{const{default:s}=await Promise.resolve().then(()=>ai);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Fx=()=>Ix(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield _o(()=>Promise.resolve().then(()=>ai),void 0)).Response:Response}),Cu=r=>{if(Array.isArray(r))return r.map(t=>Cu(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const o=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=Cu(s)}),e},zx=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var ps=function(r,e,t,s){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(x){try{p(s.next(x))}catch(y){c(y)}}function f(x){try{p(s.throw(x))}catch(y){c(y)}}function p(x){x.done?a(x.value):o(x.value).then(d,f)}p((s=s.apply(r,e||[])).next())})};const au=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),$x=(r,e,t)=>ps(void 0,void 0,void 0,function*(){const s=yield Fx();r instanceof s&&!t?.noResolveJson?r.json().then(o=>{const a=r.status||500,c=o?.statusCode||a+"";e(new Mx(au(o),a,c))}).catch(o=>{e(new Nu(au(o),o))}):e(new Nu(au(r),r))}),Ux=(r,e,t,s)=>{const o={method:r,headers:e?.headers||{}};return r==="GET"||!s?o:(zx(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(s)):o.body=s,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),t))};function ko(r,e,t,s,o,a){return ps(this,void 0,void 0,function*(){return new Promise((c,d)=>{r(t,Ux(e,s,o,a)).then(f=>{if(!f.ok)throw f;return s?.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>$x(f,d,s))})})}function el(r,e,t,s){return ps(this,void 0,void 0,function*(){return ko(r,"GET",e,t,s)})}function In(r,e,t,s,o){return ps(this,void 0,void 0,function*(){return ko(r,"POST",e,s,o,t)})}function Eu(r,e,t,s,o){return ps(this,void 0,void 0,function*(){return ko(r,"PUT",e,s,o,t)})}function Bx(r,e,t,s){return ps(this,void 0,void 0,function*(){return ko(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function jp(r,e,t,s,o){return ps(this,void 0,void 0,function*(){return ko(r,"DELETE",e,s,o,t)})}var zt=function(r,e,t,s){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(x){try{p(s.next(x))}catch(y){c(y)}}function f(x){try{p(s.throw(x))}catch(y){c(y)}}function p(x){x.done?a(x.value):o(x.value).then(d,f)}p((s=s.apply(r,e||[])).next())})};const Wx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Hx{constructor(e,t={},s,o){this.url=e,this.headers=t,this.bucketId=s,this.fetch=kp(o)}uploadOrUpdate(e,t,s,o){return zt(this,void 0,void 0,function*(){try{let a;const c=Object.assign(Object.assign({},Gf),o);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),f&&a.append("metadata",this.encodeMetadata(f)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",c.cacheControl),f&&a.append("metadata",this.encodeMetadata(f))):(a=s,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),o?.headers&&(d=Object.assign(Object.assign({},d),o.headers));const p=this._removeEmptyFolders(t),x=this._getFinalPath(p),y=yield(e=="PUT"?Eu:In)(this.fetch,`${this.url}/object/${x}`,a,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(a){if(_t(a))return{data:null,error:a};throw a}})}upload(e,t,s){return zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,o){return zt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),c=this._getFinalPath(a),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",t);try{let f;const p=Object.assign({upsert:Gf.upsert},o),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",p.cacheControl)):(f=s,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const y=yield Eu(this.fetch,d.toString(),f,{headers:x});return{data:{path:a,fullPath:y.Key},error:null}}catch(f){if(_t(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return zt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const o=Object.assign({},this.headers);t?.upsert&&(o["x-upsert"]="true");const a=yield In(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),c=new URL(this.url+a.url),d=c.searchParams.get("token");if(!d)throw new Hu("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}update(e,t,s){return zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return zt(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(_t(o))return{data:null,error:o};throw o}})}copy(e,t,s){return zt(this,void 0,void 0,function*(){try{return{data:{path:(yield In(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(_t(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,s){return zt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),a=yield In(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${c}`)},{data:a,error:null}}catch(o){if(_t(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,s){return zt(this,void 0,void 0,function*(){try{const o=yield In(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${a}`):null})),error:null}}catch(o){if(_t(o))return{data:null,error:o};throw o}})}download(e,t){return zt(this,void 0,void 0,function*(){const o=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),c=a?`?${a}`:"";try{const d=this._getFinalPath(e);return{data:yield(yield el(this.fetch,`${this.url}/${o}/${d}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(_t(d))return{data:null,error:d};throw d}})}info(e){return zt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield el(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Cu(s),error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}exists(e){return zt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Bx(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(_t(s)&&s instanceof Nu){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),o=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&o.push(a);const d=typeof t?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(t?.transform||{});f!==""&&o.push(f);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${p}`)}}}remove(e){return zt(this,void 0,void 0,function*(){try{return{data:yield jp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}list(e,t,s){return zt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Wx),t),{prefix:e||""});return{data:yield In(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(_t(o))return{data:null,error:o};throw o}})}listV2(e,t){return zt(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield In(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Vx="2.11.0",qx={"X-Client-Info":`storage-js/${Vx}`};var Xs=function(r,e,t,s){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(x){try{p(s.next(x))}catch(y){c(y)}}function f(x){try{p(s.throw(x))}catch(y){c(y)}}function p(x){x.done?a(x.value):o(x.value).then(d,f)}p((s=s.apply(r,e||[])).next())})};class Kx{constructor(e,t={},s,o){const a=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},qx),t),this.fetch=kp(s)}listBuckets(){return Xs(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(_t(e))return{data:null,error:e};throw e}})}getBucket(e){return Xs(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Xs(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Xs(this,void 0,void 0,function*(){try{return{data:yield Eu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Xs(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Xs(this,void 0,void 0,function*(){try{return{data:yield jp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}}class Gx extends Kx{constructor(e,t={},s,o){super(e,t,s,o)}from(e){return new Hx(this.url,this.headers,e,this.fetch)}}const Xx="2.56.1";let so="";typeof Deno<"u"?so="deno":typeof document<"u"?so="web":typeof navigator<"u"&&navigator.product==="ReactNative"?so="react-native":so="node";const Yx={"X-Client-Info":`supabase-js-${so}/${Xx}`},Qx={headers:Yx},Jx={schema:"public"},Zx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ey={};var ty=function(r,e,t,s){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(x){try{p(s.next(x))}catch(y){c(y)}}function f(x){try{p(s.throw(x))}catch(y){c(y)}}function p(x){x.done?a(x.value):o(x.value).then(d,f)}p((s=s.apply(r,e||[])).next())})};const ny=r=>{let e;return r?e=r:typeof fetch>"u"?e=mp:e=fetch,(...t)=>e(...t)},ry=()=>typeof Headers>"u"?pp:Headers,sy=(r,e,t)=>{const s=ny(t),o=ry();return(a,c)=>ty(void 0,void 0,void 0,function*(){var d;const f=(d=yield e())!==null&&d!==void 0?d:r;let p=new o(c?.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),s(a,Object.assign(Object.assign({},c),{headers:p}))})};var iy=function(r,e,t,s){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(x){try{p(s.next(x))}catch(y){c(y)}}function f(x){try{p(s.throw(x))}catch(y){c(y)}}function p(x){x.done?a(x.value):o(x.value).then(d,f)}p((s=s.apply(r,e||[])).next())})};function oy(r){return r.endsWith("/")?r:r+"/"}function ay(r,e){var t,s;const{db:o,auth:a,realtime:c,global:d}=r,{db:f,auth:p,realtime:x,global:y}=e,v={db:Object.assign(Object.assign({},f),o),auth:Object.assign(Object.assign({},p),a),realtime:Object.assign(Object.assign({},x),c),storage:{},global:Object.assign(Object.assign(Object.assign({},y),d),{headers:Object.assign(Object.assign({},(t=y?.headers)!==null&&t!==void 0?t:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>iy(this,void 0,void 0,function*(){return""})};return r.accessToken?v.accessToken=r.accessToken:delete v.accessToken,v}const Sp="2.71.1",ni=30*1e3,Au=3,lu=Au*ni,ly="http://localhost:9999",cy="supabase.auth.token",uy={"X-Client-Info":`gotrue-js/${Sp}`},Tu="X-Supabase-Api-Version",Np={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hy=600*1e3;class Vu extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Ie(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class fy extends Vu{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function my(r){return Ie(r)&&r.name==="AuthApiError"}class Cp extends Vu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ur extends Vu{constructor(e,t,s,o){super(e,s,o),this.name=t,this.status=s}}class Or extends Ur{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function py(r){return Ie(r)&&r.name==="AuthSessionMissingError"}class Ma extends Ur{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ia extends Ur{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fa extends Ur{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gy(r){return Ie(r)&&r.name==="AuthImplicitGrantRedirectError"}class Xf extends Ur{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pu extends Ur{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function cu(r){return Ie(r)&&r.name==="AuthRetryableFetchError"}class Yf extends Ur{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Du extends Ur{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const tl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qf=` 	
\r=`.split(""),xy=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Qf.length;e+=1)r[Qf[e].charCodeAt(0)]=-2;for(let e=0;e<tl.length;e+=1)r[tl[e].charCodeAt(0)]=e;return r})();function Jf(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(tl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(tl[s]),e.queuedBits-=6}}function Ep(r,e,t){const s=xy[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Zf(r){const e=[],t=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=c=>{wy(c,s,t)};for(let c=0;c<r.length;c+=1)Ep(r.charCodeAt(c),o,a);return e.join("")}function yy(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function vy(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}yy(s,e)}}function wy(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function by(r){const e=[],t={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<r.length;o+=1)Ep(r.charCodeAt(o),t,s);return new Uint8Array(e)}function _y(r){const e=[];return vy(r,t=>e.push(t)),new Uint8Array(e)}function ky(r){const e=[],t={queue:0,queuedBits:0},s=o=>{e.push(o)};return r.forEach(o=>Jf(o,t,s)),Jf(null,t,s),e.join("")}function jy(r){return Math.round(Date.now()/1e3)+r}function Sy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const jn=()=>typeof window<"u"&&typeof document<"u",ss={tested:!1,writable:!1},Ap=()=>{if(!jn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ss.tested)return ss.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ss.tested=!0,ss.writable=!0}catch{ss.tested=!0,ss.writable=!1}return ss.writable};function Ny(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return t.searchParams.forEach((s,o)=>{e[o]=s}),e}const Tp=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>_o(async()=>{const{default:s}=await Promise.resolve().then(()=>ai);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Cy=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ri=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},is=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Lr=async(r,e)=>{await r.removeItem(e)};class hl{constructor(){this.promise=new hl.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}hl.promiseConstructor=Promise;function uu(r){const e=r.split(".");if(e.length!==3)throw new Du("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!dy.test(e[s]))throw new Du("JWT not in base64url format");return{header:JSON.parse(Zf(e[0])),payload:JSON.parse(Zf(e[1])),signature:by(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ey(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Ay(r,e){return new Promise((s,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const c=await r(a);if(!e(a,null,c)){s(c);return}}catch(c){if(!e(a,c)){o(c);return}}})()})}function Ty(r){return("0"+r.toString(16)).substr(-2)}function Py(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let o="";for(let a=0;a<56;a++)o+=t.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,Ty).join("")}async function Dy(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(s);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function Ry(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Dy(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ys(r,e,t=!1){const s=Py();let o=s;t&&(o+="/PASSWORD_RECOVERY"),await ri(r,`${e}-code-verifier`,o);const a=await Ry(s);return[a,s===a?"plain":"s256"]}const Ly=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Oy(r){const e=r.headers.get(Tu);if(!e||!e.match(Ly))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function My(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Iy(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Fy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qs(r){if(!Fy.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function du(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function em(r){return JSON.parse(JSON.stringify(r))}var zy=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t};const cs=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),$y=[502,503,504];async function tm(r){var e;if(!Cy(r))throw new Pu(cs(r),0);if($y.includes(r.status))throw new Pu(cs(r),r.status);let t;try{t=await r.json()}catch(a){throw new Cp(cs(a),a)}let s;const o=Oy(r);if(o&&o.getTime()>=Np["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Yf(cs(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Or}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0))throw new Yf(cs(t),r.status,t.weak_password.reasons);throw new fy(cs(t),r.status||500,s)}const Uy=(r,e,t,s)=>{const o={method:r,headers:e?.headers||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),t))};async function We(r,e,t,s){var o;const a=Object.assign({},s?.headers);a[Tu]||(a[Tu]=Np["2024-01-01"].name),s?.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const c=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(c.redirect_to=s.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await By(r,e,t+d,{headers:a,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(f):{data:Object.assign({},f),error:null}}async function By(r,e,t,s,o,a){const c=Uy(e,s,o,a);let d;try{d=await r(t,Object.assign({},c))}catch(f){throw console.error(f),new Pu(cs(f),0)}if(d.ok||await tm(d),s?.noResolveJson)return d;try{return await d.json()}catch(f){await tm(f)}}function or(r){var e;let t=null;qy(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=jy(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function nm(r){const e=or(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Mr(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Wy(r){return{data:r,error:null}}function Hy(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:o,verification_type:a}=r,c=zy(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:s,redirect_to:o,verification_type:a},f=Object.assign({},c);return{data:{properties:d,user:f},error:null}}function Vy(r){return r}function qy(r){return r.access_token&&r.refresh_token&&r.expires_in}const hu=["global","local","others"];var Ky=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t};class Gy{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Tp(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=hu[0]){if(hu.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hu.join(", ")}`);try{return await We(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await We(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Mr})}catch(s){if(Ie(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Ky(e,["options"]),o=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await We(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Hy,redirectTo:t?.redirectTo})}catch(t){if(Ie(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await We(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Mr})}catch(t){if(Ie(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,o,a,c,d,f;try{const p={nextPage:null,lastPage:0,total:0},x=await We(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:Vy});if(x.error)throw x.error;const y=await x.json(),v=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(f=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(_=>{const j=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(_.split(";")[1].split("=")[1]);p[`${k}Page`]=j}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Ie(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Qs(e);try{return await We(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Mr})}catch(t){if(Ie(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Qs(e);try{return await We(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Mr})}catch(s){if(Ie(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Qs(e);try{return await We(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Mr})}catch(s){if(Ie(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Qs(e.userId);try{const{data:t,error:s}=await We(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:s}}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Qs(e.userId),Qs(e.id);try{return{data:await We(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ie(t))return{data:null,error:t};throw t}}}function rm(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Xy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Js={debug:!!(globalThis&&Ap()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Pp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Yy extends Pp{}async function Qy(r,e,t){Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Js.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await t()}finally{Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(e===0)throw Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Yy(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Js.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Xy();const Jy={url:ly,storageKey:cy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sm(r,e,t){return await t()}const Zs={};class xo{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xo.nextInstanceID,xo.nextInstanceID+=1,this.instanceID>0&&jn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Jy),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Gy({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Tp(o.fetch),this.lock=o.lock||sm,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:jn()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=Qy:this.lock=sm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Ap()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rm(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=rm(this.memoryStorage)),jn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Zs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Zs[this.storageKey]=Object.assign(Object.assign({},Zs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Zs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zs[this.storageKey]=Object.assign(Object.assign({},Zs[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Sp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Ny(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),jn()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),gy(a)){const f=(e=a.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:c,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ie(t)?{error:t}:{error:new Cp("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,o;try{const a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:or}),{data:c,error:d}=a;if(d||!c)return{data:{user:null,session:null},error:d};const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,o;try{let a;if("email"in e){const{email:x,password:y,options:v}=e;let b=null,_=null;this.flowType==="pkce"&&([b,_]=await Ys(this.storage,this.storageKey)),a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:x,password:y,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:_},xform:or})}else if("phone"in e){const{phone:x,password:y,options:v}=e;a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:y,data:(s=v?.data)!==null&&s!==void 0?s:{},channel:(o=v?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:or})}else throw new Ia("You must provide either an email or phone number and a password");const{data:c,error:d}=a;if(d||!c)return{data:{user:null,session:null},error:d};const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:c,options:d}=e;t=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:nm})}else if("phone"in e){const{phone:a,password:c,options:d}=e;t=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:nm})}else throw new Ia("You must provide either an email or phone number and a password");const{data:s,error:o}=t;return o?{data:{user:null,session:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ma}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(t){if(Ie(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,o,a,c,d,f,p,x,y,v,b;let _,j;if("message"in e)_=e.message,j=e.signature;else{const{chain:k,wallet:D,statement:P,options:R}=e;let U;if(jn())if(typeof D=="object")U=D;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))U=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=D}const H=new URL((t=R?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in U&&U.signIn){const z=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),P?{statement:P}:null));let q;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")q=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)q=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in q&&"signature"in q&&(typeof q.signedMessage=="string"||q.signedMessage instanceof Uint8Array)&&q.signature instanceof Uint8Array)_=typeof q.signedMessage=="string"?q.signedMessage:new TextDecoder().decode(q.signedMessage),j=q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${H.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(o=(s=R?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=R?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((c=R?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((d=R?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((f=R?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((p=R?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((y=(x=R?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||y===void 0)&&y.length?["Resources",...R.signInWithSolana.resources.map(q=>`- ${q}`)]:[]].join(`
`);const z=await U.signMessage(new TextEncoder().encode(_),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=z}}try{const{data:k,error:D}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:ky(j)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:or});if(D)throw D;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Ma}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:D})}catch(k){if(Ie(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const t=await is(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(t??"").split("/");try{const{data:a,error:c}=await We(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:or});if(await Lr(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ma}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:c})}catch(a){if(Ie(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:o,access_token:a,nonce:c}=e,d=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:a,nonce:c,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:or}),{data:f,error:p}=d;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Ma}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(t){if(Ie(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,o,a,c;try{if("email"in e){const{email:d,options:f}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Ys(this.storage,this.storageKey));const{error:y}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:d,options:f}=e,{data:p,error:x}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=f?.data)!==null&&o!==void 0?o:{},create_user:(a=f?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(c=f?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:x}}throw new Ia("You must provide either an email or phone number.")}catch(d){if(Ie(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var t,s;try{let o,a;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:d}=await We(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:or});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,p=c.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(Ie(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var t,s,o;try{let a=null,c=null;return this.flowType==="pkce"&&([a,c]=await Ys(this.storage,this.storageKey)),await We(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:Wy})}catch(a){if(Ie(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Or;const{error:o}=await We(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:o,options:a}=e,{error:c}=await We(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:s,type:o,options:a}=e,{data:c,error:d}=await We(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:d}}throw new Ia("You must provide either an email or phone number and a type")}catch(t){if(Ie(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await is(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<lu:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await is(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=du()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,p,x)=>(!c&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,x))})}return{data:{session:e},error:null}}const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Mr}):await this._useSession(async t=>{var s,o,a;const{data:c,error:d}=t;if(d)throw d;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Or}:await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Mr})})}catch(t){if(Ie(t))return py(t)&&(await this._removeSession(),await Lr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new Or;const c=o.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await Ys(this.storage,this.storageKey));const{data:p,error:x}=await We(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:c.access_token,xform:Mr});if(x)throw x;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(s){if(Ie(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Or;const t=Date.now()/1e3;let s=t,o=!0,a=null;const{payload:c}=uu(e.access_token);if(c.exp&&(s=c.exp,o=s<=t),o){const{session:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!d)return{data:{user:null,session:null},error:null};a=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;a={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Ie(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:c,error:d}=t;if(d)throw d;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Or;const{session:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ie(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!jn())throw new Fa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Xf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fa("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Xf("No code detected.");const{data:P,error:R}=await this._exchangeCodeForSession(e.code);if(R)throw R;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:a,refresh_token:c,expires_in:d,expires_at:f,token_type:p}=e;if(!a||!d||!c||!p)throw new Fa("No session defined in URL");const x=Math.round(Date.now()/1e3),y=parseInt(d);let v=x+y;f&&(v=parseInt(f));const b=v-x;b*1e3<=ni&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const _=v-y;x-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,x):x-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,x);const{data:j,error:k}=await this._getUser(a);if(k)throw k;const D={provider_token:s,provider_refresh_token:o,access_token:a,expires_in:y,expires_at:v,refresh_token:c,token_type:p,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(s){if(Ie(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await is(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:o,error:a}=t;if(a)return{error:a};const c=(s=o.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(my(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Lr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Sy(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,o;try{const{data:{session:a},error:c}=t;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Ys(this.storage,this.storageKey,!0));try{return await We(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Ie(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:o}=await this._useSession(async a=>{var c,d,f,p,x;const{data:y,error:v}=a;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await We(this.fetch,"GET",b,{headers:this.headers,jwt:(x=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(o)throw o;return jn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(Ie(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,o;const{data:a,error:c}=t;if(c)throw c;return await We(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Ay(async o=>(o>0&&await Ey(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await We(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:or})),(o,a)=>{const c=200*Math.pow(2,o);return a&&cu(a)&&Date.now()+c-s<ni})}catch(s){if(this._debug(t,"error",s),Ie(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),jn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await is(this.storage,this.storageKey);if(o&&this.userStorage){let c=await is(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await ri(this.userStorage,this.storageKey+"-user",c)),o.user=(e=c?.user)!==null&&e!==void 0?e:du()}else if(o&&!o.user&&!o.user){const c=await is(this.storage,this.storageKey+"-user");c&&c?.user?(o.user=c.user,await Lr(this.storage,this.storageKey+"-user"),await ri(this.storage,this.storageKey,o)):o.user=du()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const a=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<lu;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${lu}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),cu(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(o.access_token);!d&&c?.user?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new hl;const{data:a,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!a.session)throw new Or;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const d={session:a.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(o,"error",a),Ie(a)){const c={session:null,error:a};return cu(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,s=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(f){a.push(f)}});if(await Promise.all(c),a.length>0){for(let d=0;d<a.length;d+=1)console.error(a[d]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await ri(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const a=em(o);await ri(this.storage,this.storageKey,a)}else{const o=em(t);await ri(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Lr(this.storage,this.storageKey),await Lr(this.storage,this.storageKey+"-code-verifier"),await Lr(this.storage,this.storageKey+"-user"),this.userStorage&&await Lr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ni);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/ni);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ni}ms, refresh threshold is ${Au} ticks`),o<=Au&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Pp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const o=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,c]=await Ys(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(d.toString())}if(s?.queryParams){const a=new URLSearchParams(s.queryParams);o.push(a.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:o,error:a}=t;return a?{data:null,error:a}:await We(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,o;const{data:a,error:c}=t;if(c)return{data:null,error:c};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:p}=await We(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((o=f?.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:o,error:a}=t;if(a)return{data:null,error:a};const{data:c,error:d}=await We(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:d})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:o,error:a}=t;return a?{data:null,error:a}:await We(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],o=s.filter(c=>c.factor_type==="totp"&&c.status==="verified"),a=s.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:s,totp:o,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:o},error:a}=e;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=uu(o.access_token);let d=null;c.aal&&(d=c.aal);let f=d;((s=(t=o.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const x=c.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(d=>d.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+hy>o)return s;const{data:a,error:c}=await We(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,s=a.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:b,error:_}=await this.getSession();if(_||!b.session)return{data:null,error:_};s=b.session.access_token}const{header:o,payload:a,signature:c,raw:{header:d,payload:f}}=uu(s);t?.allowExpired||My(a.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!p){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:a,header:o,signature:c},error:null}}const x=Iy(o.alg),y=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,y,c,_y(`${d}.${f}`)))throw new Du("Invalid JWT signature");return{data:{claims:a,header:o,signature:c},error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}}}xo.nextInstanceID=0;const Zy=xo;class ev extends Zy{constructor(e){super(e)}}var tv=function(r,e,t,s){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function d(x){try{p(s.next(x))}catch(y){c(y)}}function f(x){try{p(s.throw(x))}catch(y){c(y)}}function p(x){x.done?a(x.value):o(x.value).then(d,f)}p((s=s.apply(r,e||[])).next())})};class nv{constructor(e,t,s){var o,a,c;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=oy(e),f=new URL(d);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const p=`sb-${f.hostname.split(".")[0]}-auth-token`,x={db:Jx,realtime:ey,auth:Object.assign(Object.assign({},Zx),{storageKey:p}),global:Qx},y=ay(s??{},x);this.storageKey=(o=y.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=y.global.headers)!==null&&a!==void 0?a:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=y.auth)!==null&&c!==void 0?c:{},this.headers,y.global.fetch),this.fetch=sy(t,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new yx(new URL("rest/v1",f).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new Gx(this.storageUrl.href,this.headers,this.fetch,s?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new lx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return tv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:o,storageKey:a,flowType:c,lock:d,debug:f},p,x){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ev({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),p),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:o,flowType:c,lock:d,debug:f,fetch:x,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ox(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rv=(r,e,t)=>new nv(r,e,t);function sv(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}sv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iv="https://zcvkqujfneyphoiaqvuj.supabase.co",ov="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpjdmtxdWpmbmV5cGhvaWFxdnVqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5NTM4MjIsImV4cCI6MjA3MTUyOTgyMn0.DQYhdzdnVxRonkcaNQzzPivwTiZvhF3gc8Fz2aYw6i4",ue=rv(iv,ov),av="/Sistema-Contable-Nuevo/assets/Icon-CGQkBVuw.png";function lv({onLogin:r}){const[e,t]=L.useState(""),[s,o]=L.useState(""),[a,c]=L.useState(!1),[d,f]=L.useState(null),p=async y=>{y.preventDefault(),c(!0),f(null);try{const{data:v,error:b}=await ue.auth.signInWithPassword({email:e,password:s});if(b)throw b;v?.user&&r(v.user)}catch(v){f(v.message)}finally{c(!1)}},x=async()=>{c(!0),f(null);try{const{data:y,error:v}=await ue.auth.signUp({email:e,password:s});if(v)throw v;y?.user&&r(y.user),alert("Cuenta creada. Revisa tu email para confirmar.")}catch(y){f(y.message)}finally{c(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("img",{src:av,alt:"Logo de Gestin Patrimonial",className:"h-20 w-20 object-contain"})}),u.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Gestin Patrimonial"}),d&&u.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d}),u.jsxs("form",{onSubmit:p,children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),u.jsx("input",{type:"email",value:e,onChange:y=>t(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"tu@email.com",required:!0})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Contrasea"}),u.jsx("input",{type:"password",value:s,onChange:y=>o(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"********",required:!0})]}),u.jsxs("div",{className:"flex flex-col space-y-3",children:[u.jsx("button",{type:"submit",disabled:a,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors",children:a?"Cargando...":"Iniciar Sesin"}),u.jsx("button",{type:"button",onClick:x,disabled:a,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors",children:"Crear Cuenta"})]})]})]})})}const sn="/Sistema-Contable-Nuevo/assets/Icon-CGQkBVuw.png";function im({user:r,setCurrentView:e}){console.log("El componente Dashboard se est renderizando.");const[t,s]=L.useState({}),[o,a]=L.useState(null),[c,d]=L.useState(!0),[f,p]=L.useState(null),x=new Date,y=new Date(x.getFullYear(),x.getMonth()-1,x.getDate()),v=ee=>ee.toISOString().split("T")[0],[b,_]=L.useState(v(y)),[j,k]=L.useState(v(x)),[D,P]=L.useState({}),[R,U]=L.useState({}),H=L.useRef(null),[z,q]=L.useState({key:"fecha",direction:"descending"});L.useEffect(()=>{console.log("El useEffect se ha ejecutado. Dependencias:",{user:r}),r?G(b,j):d(!1)},[r]),L.useEffect(()=>()=>{console.log("El componente Dashboard se est desmontando.")},[]);const G=async(ee=null,oe=null)=>{if(!r){d(!1);return}try{d(!0),p(null);let I=ue.from("entradas_contables").select("fecha, importe_ars, importe_usd, tipo, tipo_cambio_id, concepto_id").eq("usuario_id",r.id).order("fecha",{ascending:!0});ee&&(I=I.gte("fecha",ee)),oe&&(I=I.lte("fecha",oe));const{data:Q,error:de}=await I;if(de)throw de;const{data:we,error:ke}=await ue.from("tipos_cambio").select("id, fecha, tasa").eq("usuario_id",r.id).order("fecha",{ascending:!0});if(ke)throw ke;const{data:je,error:De}=await ue.from("rubros").select("id, nombre");if(De)throw De;const{data:$t,error:Ut}=await ue.from("conceptos_contables").select("id, concepto, rubro_id");if(Ut)throw Ut;const Bt=je.reduce((ze,Be)=>(ze[Be.id]=Be.nombre,ze),{});U(Bt);const et=$t.reduce((ze,Be)=>(ze[Be.id]={nombre:Be.concepto,rubro_id:Be.rubro_id},ze),{});P(et);const jt=we.reduce((ze,Be)=>(ze[Be.fecha]=Be.tasa,ze),{}),xn=Q.reduce((ze,Be)=>{const Qe=Be.fecha;ze[Qe]||(ze[Qe]={"Activo Corriente":0,"Activo No Corriente":0,Pasivo:0,"Patrimonio Neto":0,"Activo Corriente_usd":0,"Activo No Corriente_usd":0,Pasivo_usd:0,"Patrimonio Neto_usd":0,tipoCambio:jt[Qe]||0});const $n=Be.importe_ars,Cn=Be.importe_usd;return Be.tipo==="Activo Corriente"?(ze[Qe]["Activo Corriente"]+=$n,ze[Qe]["Activo Corriente_usd"]+=Cn):Be.tipo==="Activo No Corriente"?(ze[Qe]["Activo No Corriente"]+=$n,ze[Qe]["Activo No Corriente_usd"]+=Cn):Be.tipo==="Pasivo"&&(ze[Qe].Pasivo+=$n,ze[Qe].Pasivo_usd+=Cn),ze[Qe]["Patrimonio Neto"]=ze[Qe]["Activo Corriente"]+ze[Qe]["Activo No Corriente"]-ze[Qe].Pasivo,ze[Qe]["Patrimonio Neto_usd"]=ze[Qe]["Activo Corriente_usd"]+ze[Qe]["Activo No Corriente_usd"]-ze[Qe].Pasivo_usd,ze},{});s(xn)}catch(I){console.error("Error al cargar datos del dashboard:",I.message),p("Error al cargar datos del dashboard. Intntalo de nuevo.")}finally{d(!1)}},fe=async ee=>{if(!r){alert("Error: No se puede cargar el detalle sin un usuario autenticado.");return}try{const{data:oe,error:I}=await ue.from("entradas_contables").select("importe_ars, importe_usd, concepto_id, tipo").eq("usuario_id",r.id).eq("fecha",ee);if(I)throw I;const Q=oe.reduce((et,jt)=>{const xn=D[jt.concepto_id];if(!xn)return et;const ze=R[xn.rubro_id]||"Sin Rubro",Be=jt.tipo;return et[Be]||(et[Be]={totalTipoArs:0,totalTipoUsd:0,rubros:{}}),et[Be].rubros[ze]||(et[Be].rubros[ze]={totalArs:0,totalUsd:0,conceptos:[]}),et[Be].rubros[ze].totalArs+=jt.importe_ars,et[Be].rubros[ze].totalUsd+=jt.importe_usd,et[Be].totalTipoArs+=jt.importe_ars,et[Be].totalTipoUsd+=jt.importe_usd,et[Be].rubros[ze].conceptos.push({nombre:xn.nombre,ars:jt.importe_ars,usd:jt.importe_usd}),et},{}),de=Q["Activo Corriente"]?.totalTipoArs||0,we=Q["Activo No Corriente"]?.totalTipoArs||0,ke=Q.Pasivo?.totalTipoArs||0,je=de+we-ke,De=Q["Activo Corriente"]?.totalTipoUsd||0,$t=Q["Activo No Corriente"]?.totalTipoUsd||0,Ut=Q.Pasivo?.totalTipoUsd||0,Bt=De+$t-Ut;a({fecha:ee,detalle:Q,totales:{"Activo Corriente":de,"Activo No Corriente":we,Pasivo:ke,"Patrimonio Neto":je},totalesUsd:{"Activo Corriente":De,"Activo No Corriente":$t,Pasivo:Ut,"Patrimonio Neto":Bt}}),setTimeout(()=>{H.current?.scrollIntoView({behavior:"smooth"})},100)}catch(oe){console.error("Error al cargar detalle:",oe.message),alert("Error al cargar el detalle de la fecha.")}},O=()=>{G(b,j)},he=ee=>{const oe={};for(let I=0;I<ee.length-1;I++){const Q=ee[I],de=ee[I+1],we=t[Q]?.["Patrimonio Neto"]||0,ke=t[Q]?.["Patrimonio Neto_usd"]||0,je=t[de]?.["Patrimonio Neto"]||0,De=t[de]?.["Patrimonio Neto_usd"]||0,$t=we-je,Ut=je!==0?($t/je*100).toFixed(2):"N/A",Bt=ke-De,et=De!==0?(Bt/De*100).toFixed(2):"N/A";oe[Q]={variationMonto:$t,variationPorcentaje:Ut,variationMontoUsd:Bt,variationPorcentajeUsd:et}}return oe},A=Object.keys(t).sort((ee,oe)=>new Date(oe)-new Date(ee)),Y=he(A),ne=A.length>0?A[A.length-1]:null,le=A.length>0?A[0]:null,me=ne?t[ne]["Patrimonio Neto"]:0,pe=ne?t[ne]["Patrimonio Neto_usd"]:0,W=le?t[le]["Patrimonio Neto"]:0,X=le?t[le]["Patrimonio Neto_usd"]:0,V=W-me,C=me!==0?(V/me*100).toFixed(2):"N/A",K=V>=0?"text-green-600":"text-red-600",be=X-pe,ve=pe!==0?(be/pe*100).toFixed(2):"N/A",xe=be>=0?"text-green-600":"text-red-600",re=ee=>{let oe="ascending";z.key===ee&&z.direction==="ascending"&&(oe="descending"),q({key:ee,direction:oe})},Z=(()=>{const ee=Object.keys(t).map(oe=>({date:oe,...t[oe]}));return z.key!==null&&ee.sort((oe,I)=>{let Q,de;if(z.key==="fecha")Q=new Date(oe.date),de=new Date(I.date);else if(z.key==="Patrimonio Neto")Q=oe["Patrimonio Neto"],de=I["Patrimonio Neto"];else if(z.key==="Patrimonio Neto_usd")Q=oe["Patrimonio Neto_usd"],de=I["Patrimonio Neto_usd"];else if(z.key==="tipoCambio")Q=oe.tipoCambio,de=I.tipoCambio;else if(z.key==="variacionPorcentaje"){const we=he(Object.keys(t).sort((ke,je)=>new Date(je)-new Date(ke)));Q=parseFloat(we[oe.date]?.variationPorcentaje)||0,de=parseFloat(we[I.date]?.variationPorcentaje)||0}else if(z.key==="variacionPorcentajeUsd"){const we=he(Object.keys(t).sort((ke,je)=>new Date(je)-new Date(ke)));Q=parseFloat(we[oe.date]?.variationPorcentajeUsd)||0,de=parseFloat(we[I.date]?.variationPorcentajeUsd)||0}else Q=oe[z.key],de=I[z.key];return Q<de?z.direction==="ascending"?-1:1:Q>de?z.direction==="ascending"?1:-1:0}),ee})();return u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mt-4",children:"Dashboard"})]}),u.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:c?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}):f?u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md shadow-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Error al cargar los datos"}),u.jsxs("p",{className:"text-sm",children:["Detalles: ",u.jsx("span",{className:"font-mono text-red-800",children:f})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filtrar por Fecha"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),u.jsx("input",{type:"date",value:b,onChange:ee=>_(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),u.jsx("input",{type:"date",value:j,onChange:ee=>k(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsx("div",{className:"flex items-end",children:u.jsx("button",{onClick:O,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Aplicar Filtro"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Patrimonio Neto Inicial"}),u.jsxs("p",{className:"text-xl font-semibold text-gray-800 mt-1",children:["$",me.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})," ",u.jsx("span",{className:"text-sm text-gray-500",children:"ARS"})]}),u.jsxs("p",{className:"text-base text-gray-600 mt-1",children:["$",pe.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})," ",u.jsx("span",{className:"text-sm text-gray-500",children:"USD"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Patrimonio Neto Actual"}),u.jsxs("p",{className:"text-xl font-semibold text-gray-800 mt-1",children:["$",W.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})," ",u.jsx("span",{className:"text-sm text-gray-500",children:"ARS"})]}),u.jsxs("p",{className:"text-base text-gray-600 mt-1",children:["$",X.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})," ",u.jsx("span",{className:"text-sm text-gray-500",children:"USD"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Variacin ARS"}),u.jsxs("p",{className:`text-xl font-semibold mt-1 ${K}`,children:["$",V.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsxs("p",{className:`text-sm mt-1 ${K}`,children:[C,"%"]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Variacin USD"}),u.jsxs("p",{className:`text-xl font-semibold mt-1 ${xe}`,children:["$",be.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsxs("p",{className:`text-sm mt-1 ${xe}`,children:[ve,"%"]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6 border border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Resumen de Patrimonio Neto por Da"}),u.jsx("div",{className:"overflow-x-auto h-96",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0",children:u.jsxs("tr",{children:[u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>re("fecha"),children:["Fecha",z.key==="fecha"&&u.jsx("span",{className:"ml-1",children:z.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>re("Patrimonio Neto"),children:["Patrimonio Neto ARS",z.key==="Patrimonio Neto"&&u.jsx("span",{className:"ml-1",children:z.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>re("Patrimonio Neto_usd"),children:["Patrimonio Neto USD",z.key==="Patrimonio Neto_usd"&&u.jsx("span",{className:"ml-1",children:z.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>re("tipoCambio"),children:["Tipo de Cambio",z.key==="tipoCambio"&&u.jsx("span",{className:"ml-1",children:z.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>re("variacionPorcentaje"),children:["Variacin ARS (%)",z.key==="variacionPorcentaje"&&u.jsx("span",{className:"ml-1",children:z.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>re("variacionPorcentajeUsd"),children:["Variacin USD (%)",z.key==="variacionPorcentajeUsd"&&u.jsx("span",{className:"ml-1",children:z.direction==="ascending"?"":""})]})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.length>0?Z.map((ee,oe)=>{const I=oe===0,Q=ee["Patrimonio Neto"],de=ee["Patrimonio Neto_usd"],we=Y[ee.date],ke=we?.variationMonto>=0?"text-green-600":"text-red-600",je=we?.variationMontoUsd>=0?"text-green-600":"text-red-600";return u.jsxs("tr",{className:`${I?"font-bold":""} hover:bg-gray-50 cursor-pointer`,onClick:()=>fe(ee.date),children:[u.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${I?"text-base text-gray-800":"text-gray-800"}`,children:new Date(ee.date+"T00:00:00").toLocaleDateString("es-AR")}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-right",children:["$",Q.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-right",children:["$",de.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 text-right",children:ee.tipoCambio.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}),u.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right ${ke}`,children:we?`${we.variationMonto.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})} (${we.variationPorcentaje}%)`:"N/A"}),u.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right ${je}`,children:we?`${we.variationMontoUsd.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})} (${we.variationPorcentajeUsd}%)`:"N/A"})]},ee.date)}):u.jsx("tr",{children:u.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No hay datos de patrimonio neto para mostrar."})})})]})})]}),o&&u.jsxs("div",{ref:H,className:"bg-white rounded-xl shadow-md p-6 mt-6 border-t-4 border-indigo-500 animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-semibold text-gray-800",children:["Detalle del ",new Date(o.fecha+"T00:00:00").toLocaleDateString("es-AR")]}),u.jsx("button",{onClick:()=>a(null),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:Object.entries(o.totales).map(([ee,oe],I)=>{const Q=ee==="Patrimonio Neto"?"text-indigo-700":ee==="Pasivo"?"text-red-700":"text-gray-800",de=ee==="Patrimonio Neto"?"text-indigo-600":ee==="Pasivo"?"text-red-600":"text-gray-600";return u.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-inner p-6 border border-gray-200",children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:ee}),u.jsxs("p",{className:`text-lg font-semibold mt-1 ${Q}`,children:["$",oe.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})," ARS"]}),u.jsxs("p",{className:`text-sm mt-1 ${de}`,children:["$",o.totalesUsd[ee].toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})," USD"]})]},I)})}),u.jsxs("div",{className:"border-t pt-6",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Detalle por Concepto"}),u.jsx("div",{className:"h-96 overflow-y-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rubro"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Concepto"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe ARS"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe USD"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(o.detalle).map(([ee,oe])=>Object.entries(oe.rubros).map(([I,Q])=>Q.conceptos.map((de,we)=>u.jsxs("tr",{children:[we===0&&u.jsx("td",{rowSpan:Q.conceptos.length,className:"px-6 py-4 text-sm text-gray-700 align-top border-r-2 border-gray-100",children:I}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:de.nombre}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 text-right",children:["$",de.ars.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 text-right",children:["$",de.usd.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},`${ee}-${I}-${we}`))))})]})})]})]})]})})]})}function cv({user:r,setCurrentView:e}){const[t,s]=L.useState([]),[o,a]=L.useState(!0),[c,d]=L.useState(null),[f,p]=L.useState(!1),[x,y]=L.useState(!1),[v,b]=L.useState(null),[_,j]=L.useState(null),[k,D]=L.useState({nombre:""}),[P,R]=L.useState("");L.useEffect(()=>{U()},[r]);const U=async()=>{try{a(!0),d(null);const{data:A,error:Y}=await ue.from("estados_financieros").select("*").eq("usuario_id",r.id).order("nombre",{ascending:!0});if(Y)throw Y;s(A||[])}catch(A){d(A.message)}finally{a(!1)}},H=(A=null)=>{A?(j(A),D({nombre:A.nombre})):(j(null),D({nombre:""})),R(""),p(!0)},z=()=>{p(!1),j(null),D({nombre:""}),R("")},q=A=>{b(A),y(!0)},G=()=>{b(null),y(!1)},fe=A=>{D({...k,[A.target.name]:A.target.value})},O=async A=>{if(A.preventDefault(),!k.nombre){R("El nombre del estado es obligatorio.");return}try{if(_){const{error:Y}=await ue.from("estados_financieros").update({nombre:k.nombre}).eq("id",_.id);if(Y)throw Y}else{const{error:Y}=await ue.from("estados_financieros").insert({usuario_id:r.id,nombre:k.nombre});if(Y)throw Y}await U(),z()}catch(Y){console.error("Error al guardar el estado financiero:",Y.message),R("Error al guardar. Intenta nuevamente.")}},he=async()=>{if(v)try{const{error:A}=await ue.from("entradas_contables").delete().eq("estado_financiero_id",v);if(A)throw A;const{error:Y}=await ue.from("estados_financieros").delete().eq("id",v);if(Y)throw Y;await U(),G()}catch(A){console.error("Error al eliminar el estado financiero:",A.message),d("Error al eliminar. Intenta nuevamente."),G()}};return u.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mt-4",children:"Estados Financieros"})]}),u.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}):c?u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md shadow-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Error al cargar los datos"}),u.jsxs("p",{className:"text-sm",children:["Detalles: ",u.jsx("span",{className:"font-mono text-red-800",children:c})]})]}):u.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200",children:[u.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Lista de Estados"}),u.jsx("button",{onClick:()=>H(),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150",children:"Nuevo Estado"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre del Estado"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha de Creacin"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length>0?t.map(A=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:A.nombre}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(A.creado_en).toLocaleDateString()}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[u.jsx("button",{onClick:()=>H(A),className:"text-indigo-600 hover:text-indigo-800 mr-4 transition-colors duration-150",children:"Editar"}),u.jsx("button",{onClick:()=>q(A.id),className:"text-red-600 hover:text-red-800 transition-colors duration-150",children:"Eliminar"})]})]},A.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-gray-500",children:"No hay estados financieros registrados."})})})]})})]})})]}),f&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:_?"Editar Estado Financiero":"Nuevo Estado Financiero"}),P&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-4 text-sm",children:P}),u.jsxs("form",{onSubmit:O,children:[u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Estado"}),u.jsx("input",{type:"text",name:"nombre",value:k.nombre,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]})}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors duration-150",children:_?"Actualizar":"Guardar"})]})]})]})}),x&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm mx-auto",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirmar Eliminacin"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Ests seguro de que deseas eliminar este estado financiero?"}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:he,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-150",children:"Eliminar"})]})]})})]})}function uv({user:r,setCurrentView:e}){const[t,s]=L.useState([]),[o,a]=L.useState(!0),[c,d]=L.useState(null),[f,p]=L.useState(!1),[x,y]=L.useState(!1),[v,b]=L.useState(null),[_,j]=L.useState(null),[k,D]=L.useState({fecha:"",tasa:""}),[P,R]=L.useState(""),[U,H]=L.useState(null),[z,q]=L.useState(""),[G,fe]=L.useState(!0);L.useEffect(()=>{if(!r){a(!1);return}G&&(async()=>{a(!0),d(null),H({type:"info",text:"Iniciando proceso automtico: Actualizando valor del dlar..."});try{const{data:V,error:C}=await ue.functions.invoke("actualizar-tipo-cambio",{body:{user_id:r.id}});if(C)throw new Error(C.message||"Error al actualizar el tipo de cambio.");H({type:"success",text:"Iniciando reclculo automtico de registros contables..."}),await new Promise(K=>setTimeout(K,1e3)),await W(),H({type:"success",text:"Proceso automtico finalizado. Tabla actualizada."})}catch(V){console.error(" Error en el proceso automtico:",V.message),H({type:"error",text:`Error en el proceso automtico: ${V.message}`})}finally{fe(!1),a(!1),O(),setTimeout(()=>H(null),5e3)}})()},[r,G]),L.useEffect(()=>{r&&!G&&O()},[r,z,G]);const O=async()=>{if(!r){a(!1);return}try{a(!0),d(null);let X=ue.from("tipos_cambio").select("*").eq("usuario_id",r.id);z&&(X=X.eq("fecha",z));const{data:V,error:C}=await X.order("fecha",{ascending:!1});if(C)throw C;s(V||[])}catch(X){console.error(" Error al cargar tipos de cambio:",X.message),d(X.message)}finally{a(!1)}},he=(X=null)=>{if(X)j(X),D({fecha:X.fecha,tasa:X.tasa?.toString()||""});else{const V=new Date().toISOString().split("T")[0];j(null),D({fecha:V,tasa:""})}R(""),p(!0)},A=()=>{p(!1),j(null),D({fecha:"",tasa:""}),R("")},Y=X=>{b(X),y(!0)},ne=()=>{b(null),y(!1)},le=X=>{D({...k,[X.target.name]:X.target.value})},me=async X=>{if(X.preventDefault(),!k.fecha||!k.tasa){R("Todos los campos son obligatorios");return}const V=parseFloat(k.tasa);if(isNaN(V)||V<=0){R("El valor del dlar debe ser un nmero vlido mayor a 0");return}try{if(_){const{error:C}=await ue.from("tipos_cambio").update({tasa:V}).eq("id",_.id).eq("usuario_id",r.id);if(C)throw C}else{const{error:C}=await ue.from("tipos_cambio").insert({usuario_id:r.id,fecha:k.fecha,tasa:V});if(C)throw C}await O(),A()}catch(C){console.error("Error al guardar:",C.message),R("Error al guardar. Intenta nuevamente.")}},pe=async()=>{if(v)try{const{error:X}=await ue.from("entradas_contables").delete().eq("tipo_cambio_id",v);if(X)throw X;const{error:V}=await ue.from("tipos_cambio").delete().eq("id",v).eq("usuario_id",r.id);if(V)throw V;await O(),ne()}catch(X){console.error("Error al eliminar:",X.message),d("Error al eliminar. Intenta nuevamente."),ne()}},W=async()=>{try{if(!r){H({type:"error",text:"Usuario no logueado."});return}const{data:X,error:V}=await ue.from("tipos_cambio").select("fecha, tasa").eq("usuario_id",r.id);if(V)throw V;if(!X||X.length===0){H({type:"success",text:"No hay tipos de cambio cargados."});return}const C=X.reduce((Ee,Z)=>(Ee[Z.fecha]=Z.tasa,Ee),{}),{data:K,error:be}=await ue.from("entradas_contables").select("id, fecha, importe_ars, importe_usd, moneda").eq("usuario_id",r.id);if(be)throw be;if(!K||K.length===0){H({type:"success",text:"No hay entradas contables para recalcular."});return}const ve=[];if(K.forEach(Ee=>{const Z=C[Ee.fecha];if(!Z||Z<=0)return;let ee=!1,oe={};if(Ee.moneda==="ARS"){const I=parseFloat((Ee.importe_ars/Z).toFixed(2));I!==Ee.importe_usd&&(ee=!0,oe={importe_usd:I})}else if(Ee.moneda==="USD"){const I=parseFloat((Ee.importe_usd*Z).toFixed(2));I!==Ee.importe_ars&&(ee=!0,oe={importe_ars:I})}ee&&ve.push(ue.from("entradas_contables").update(oe).eq("id",Ee.id).eq("usuario_id",r.id))}),ve.length===0){H({type:"success",text:"No se encontraron registros para recalcular. Ya estn actualizados."});return}const re=(await Promise.all(ve)).filter(Ee=>Ee.error);if(re.length>0)throw console.error(" Errores en actualizaciones:",re),new Error("Algunos registros no se pudieron actualizar.");H({type:"success",text:`Reclculo masivo completado: ${ve.length} registros actualizados.`})}catch(X){console.error("Error al recalcular:",X.message),H({type:"error",text:"Error al recalcular. Intenta nuevamente."})}};return u.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mt-4",children:"Tipo de Cambio"})]}),u.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 p-6",children:o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}):c?u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md shadow-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Error al cargar los datos"}),u.jsxs("p",{className:"text-sm",children:["Detalles: ",u.jsx("span",{className:"font-mono text-red-800",children:c})]})]}):u.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 flex flex-col h-full",children:[u.jsxs("div",{className:"p-6 flex justify-between items-center flex-wrap gap-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Registros de Tipo de Cambio"}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("label",{htmlFor:"filter-date",className:"text-sm text-gray-600 font-medium",children:"Filtrar por Fecha:"}),u.jsx("input",{id:"filter-date",type:"date",value:z,onChange:X=>q(X.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),z&&u.jsx("button",{onClick:()=>q(""),className:"text-gray-500 hover:text-gray-700 text-sm font-medium",children:"Limpiar"})]}),u.jsxs("button",{onClick:()=>he(),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 flex items-center space-x-2",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),u.jsx("span",{children:"Nuevo Registro"})]})]})]}),u.jsx("div",{className:"overflow-auto flex-1",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor USD"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length>0?t.map(X=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:X.fecha}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:["$",parseFloat(X.tasa).toFixed(2)]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[u.jsx("button",{onClick:()=>he(X),className:"text-indigo-600 hover:text-indigo-800 mr-4 transition-colors duration-150",children:"Editar"}),u.jsx("button",{onClick:()=>Y(X.id),className:"text-red-600 hover:text-red-800 transition-colors duration-150",children:"Eliminar"})]})]},X.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-gray-500",children:z?`No hay registros para la fecha ${z}.`:"No hay registros de tipo de cambio."})})})]})})]})})]}),f&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:_?"Editar Tipo de Cambio":"Nuevo Tipo de Cambio"}),P&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-4 text-sm",children:P}),u.jsxs("form",{onSubmit:me,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),u.jsx("input",{type:"date",name:"fecha",value:k.fecha,onChange:le,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-gray-100 disabled:opacity-75",disabled:_,required:!0}),_&&u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No se puede cambiar la fecha en edicin"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor del Dlar (ARS)"}),u.jsx("input",{type:"number",name:"tasa",value:k.tasa,onChange:le,placeholder:"Ej: 1100",step:"0.01",min:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors duration-150",children:_?"Actualizar":"Guardar"})]})]})]})}),x&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm mx-auto",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirmar Eliminacin"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Ests seguro de que deseas eliminar este registro de tipo de cambio? Esta accin no se puede deshacer."}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:ne,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:pe,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-150",children:"Eliminar"})]})]})}),U&&u.jsxs("div",{className:`fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-6 py-4 shadow-lg transition-all duration-300 ${U.type==="success"?"bg-green-100 text-green-700 border-b border-green-200":"bg-red-100 text-red-700 border-b border-red-200"}`,children:[u.jsx("p",{className:"text-sm font-medium",children:U.text}),u.jsx("button",{onClick:()=>H(null),className:"text-gray-500 hover:text-gray-700",children:""})]})]})}function dv({user:r,setCurrentView:e}){const[t,s]=L.useState([]),[o,a]=L.useState(!0),[c,d]=L.useState(null),[f,p]=L.useState(!1),[x,y]=L.useState(!1),[v,b]=L.useState(null),[_,j]=L.useState(null),[k,D]=L.useState({nombre:""}),[P,R]=L.useState("");L.useEffect(()=>{U()},[r]);const U=async()=>{try{a(!0),d(null);const{data:A,error:Y}=await ue.from("rubros").select("*").eq("usuario_id",r.id).order("nombre",{ascending:!0});if(Y)throw Y;s(A||[])}catch(A){d(A.message)}finally{a(!1)}},H=(A=null)=>{A?(j(A),D({nombre:A.nombre})):(j(null),D({nombre:""})),R(""),p(!0)},z=()=>{p(!1),j(null),D({nombre:""}),R("")},q=A=>{b(A),y(!0)},G=()=>{b(null),y(!1)},fe=A=>{D({...k,[A.target.name]:A.target.value})},O=async A=>{if(A.preventDefault(),!k.nombre){R("El nombre del rubro es obligatorio.");return}try{if(_){const{error:Y}=await ue.from("rubros").update({nombre:k.nombre}).eq("id",_.id);if(Y)throw Y}else{const{error:Y}=await ue.from("rubros").insert({usuario_id:r.id,nombre:k.nombre});if(Y)throw Y}await U(),z()}catch(Y){console.error("Error al guardar el rubro:",Y.message),R("Error al guardar. Intenta nuevamente.")}},he=async()=>{if(v)try{const{error:A}=await ue.from("conceptos_contables").delete().eq("rubro_id",v);if(A)throw A;const{error:Y}=await ue.from("rubros").delete().eq("id",v);if(Y)throw Y;await U(),G()}catch(A){console.error("Error al eliminar el rubro:",A.message),d("Error al eliminar. Intenta nuevamente."),G()}};return u.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Gestin de Rubros"})]}),u.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}):c?u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md shadow-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Error al cargar los datos"}),u.jsxs("p",{className:"text-sm",children:["Detalles: ",u.jsx("span",{className:"font-mono text-red-800",children:c})]})]}):u.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200",children:[u.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Lista de Rubros"}),u.jsxs("button",{onClick:()=>H(),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 flex items-center space-x-2",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),u.jsx("span",{children:"Nuevo Rubro"})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre del Rubro"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length>0?t.map(A=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:A.nombre}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[u.jsx("button",{onClick:()=>H(A),className:"text-indigo-600 hover:text-indigo-800 mr-4 transition-colors duration-150",children:"Editar"}),u.jsx("button",{onClick:()=>q(A.id),className:"text-red-600 hover:text-red-800 transition-colors duration-150",children:"Eliminar"})]})]},A.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:"2",className:"px-6 py-4 text-center text-gray-500",children:"No hay rubros registrados."})})})]})})]})})]}),f&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:_?"Editar Rubro":"Nuevo Rubro"}),P&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-4 text-sm",children:P}),u.jsxs("form",{onSubmit:O,children:[u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Rubro"}),u.jsx("input",{type:"text",name:"nombre",value:k.nombre,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]})}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors duration-150",children:_?"Actualizar":"Guardar"})]})]})]})}),x&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm mx-auto",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirmar Eliminacin"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Ests seguro de que deseas eliminar este rubro? Esta accin tambin eliminar todos los conceptos asociados."}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:he,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-150",children:"Eliminar"})]})]})})]})}function hv({user:r,setCurrentView:e}){const[t,s]=L.useState([]),[o,a]=L.useState([]),[c,d]=L.useState(!0),[f,p]=L.useState(null),[x,y]=L.useState(!1),[v,b]=L.useState(!1),[_,j]=L.useState(null),[k,D]=L.useState(null),[P,R]=L.useState({rubro_id:"",concepto:""}),[U,H]=L.useState("");L.useEffect(()=>{z()},[r]);const z=async()=>{try{d(!0),p(null);const{data:ne,error:le}=await ue.from("rubros").select("*").eq("usuario_id",r.id).order("nombre",{ascending:!0});if(le)throw le;a(ne||[]);const{data:me,error:pe}=await ue.from("conceptos_contables").select(`
          id,
          concepto,
          activo,
          rubro_id,
          rubros (
            nombre
          )
        `).eq("usuario_id",r.id).order("concepto",{ascending:!0});if(pe)throw pe;s(me||[])}catch(ne){p(ne.message)}finally{d(!1)}},q=(ne=null)=>{ne?(D(ne),R({rubro_id:ne.rubro_id,concepto:ne.concepto})):(D(null),R({rubro_id:"",concepto:""})),H(""),y(!0)},G=()=>{y(!1),D(null),R({rubro_id:"",concepto:""}),H("")},fe=ne=>{j(ne),b(!0)},O=()=>{j(null),b(!1)},he=ne=>{R({...P,[ne.target.name]:ne.target.value})},A=async ne=>{if(ne.preventDefault(),!P.rubro_id||!P.concepto){H("Los campos Rubro y Concepto son obligatorios");return}try{if(k){const{error:le}=await ue.from("conceptos_contables").update({rubro_id:P.rubro_id,concepto:P.concepto}).eq("id",k.id);if(le)throw le}else{const{error:le}=await ue.from("conceptos_contables").insert({usuario_id:r.id,rubro_id:P.rubro_id,concepto:P.concepto});if(le)throw le}await z(),G()}catch(le){console.error("Error al guardar el concepto:",le.message),H("Error al guardar. Intenta nuevamente.")}},Y=async()=>{if(_)try{const{error:ne}=await ue.from("conceptos_contables").update({activo:!_.activo}).eq("id",_.id);if(ne)throw ne;await z(),O()}catch(ne){console.error("Error al cambiar el estado del concepto:",ne.message),p("Error al cambiar el estado. Intenta nuevamente."),O()}};return u.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Gestin de Conceptos"})]}),u.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:c?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}):f?u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md shadow-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Error al cargar los datos"}),u.jsxs("p",{className:"text-sm",children:["Detalles: ",u.jsx("span",{className:"font-mono text-red-800",children:f})]})]}):u.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200",children:[u.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Lista de Conceptos"}),u.jsxs("button",{onClick:()=>q(),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 flex items-center space-x-2",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),u.jsx("span",{children:"Nuevo Concepto"})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Concepto"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rubro"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length>0?t.map(ne=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:ne.concepto}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:ne.rubros?.nombre}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ne.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ne.activo?"Activo":"Inactivo"})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[u.jsx("button",{onClick:()=>q(ne),className:"text-indigo-600 hover:text-indigo-800 mr-4 transition-colors duration-150",children:"Editar"}),u.jsx("button",{onClick:()=>fe(ne),className:`transition-colors duration-150 ${ne.activo?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"}`,children:ne.activo?"Deshabilitar":"Habilitar"})]})]},ne.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No hay conceptos registrados."})})})]})})]})})]}),x&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:k?"Editar Concepto":"Nuevo Concepto"}),U&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-4 text-sm",children:U}),u.jsxs("form",{onSubmit:A,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rubro"}),u.jsxs("select",{name:"rubro_id",value:P.rubro_id,onChange:he,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,children:[u.jsx("option",{value:"",children:"Selecciona un rubro"}),o.map(ne=>u.jsx("option",{value:ne.id,children:ne.nombre},ne.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Concepto"}),u.jsx("input",{type:"text",name:"concepto",value:P.concepto,onChange:he,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors duration-150",children:k?"Actualizar":"Guardar"})]})]})]})}),v&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm mx-auto",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:_?.activo?"Deshabilitar Concepto":"Habilitar Concepto"}),u.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Ests seguro de que deseas ",_?.activo?"deshabilitar":"habilitar",' el concepto "',_?.concepto,'"? Esta accin afectar la visibilidad en los formularios de entrada de datos.']}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:Y,className:`px-4 py-2 text-sm font-medium text-white rounded-md transition-colors duration-150 ${_?.activo?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:_?.activo?"Deshabilitar":"Habilitar"})]})]})})]})}function fv({user:r,setCurrentView:e}){const[t,s]=L.useState({}),[o,a]=L.useState([]),[c,d]=L.useState([]),[f,p]=L.useState(!0),[x,y]=L.useState(null),[v,b]=L.useState("list"),[_,j]=L.useState(""),[k,D]=L.useState([]),[P,R]=L.useState(!1),[U,H]=L.useState(!1),[z,q]=L.useState(null),[G,fe]=L.useState(null),[O,he]=L.useState(!1),[A,Y]=L.useState(""),ne=Z=>{j(Z),b("edit")};L.useEffect(()=>{le()},[r]),L.useEffect(()=>{if(v==="edit"){const Z=sessionStorage.getItem("editing_day_"+_);if(Z)try{const ee=JSON.parse(Z);D(ee),p(!1);return}catch{console.warn("No se pudo recuperar los datos guardados")}me()}},[v,_,r]);const le=async()=>{try{p(!0),y(null);const{data:Z,error:ee}=await ue.from("tipos_cambio").select("id, fecha, tasa").eq("usuario_id",r.id).order("fecha",{ascending:!1});if(ee)throw ee;d(Z||[]);const{data:oe,error:I}=await ue.from("entradas_contables").select(`
          id,
          fecha,
          importe_ars,
          importe_usd,
          moneda,
          estado_financiero_id,
          tipo,
          concepto_id,
          archivo_url,
          conceptos_contables (
            concepto,
            rubro_id,
            rubros (nombre)
          )
        `).eq("usuario_id",r.id).order("fecha",{ascending:!1});if(I)throw I;const Q={};oe.forEach(je=>{const De=je.fecha;Q[De]||(Q[De]=[]),Q[De].push(je)}),s(Q);const{data:de,error:we}=await ue.from("rubros").select(`
          id,
          nombre,
          conceptos_contables (
            id,
            concepto,
            activo
          )
        `).eq("usuario_id",r.id).order("nombre",{ascending:!0});if(we)throw we;const ke=[];de.forEach(je=>{je.conceptos_contables.forEach(De=>{De.activo&&ke.push({...De,rubro_id:je.id,rubro_nombre:je.nombre,tipo:je.nombre.toLowerCase().includes("activo corriente")?"Activo Corriente":je.nombre.toLowerCase().includes("activo no corriente")?"Activo No Corriente":je.nombre.toLowerCase().includes("pasivo")?"Pasivo":""})})}),ke.sort((je,De)=>je.rubro_nombre<De.rubro_nombre?-1:je.rubro_nombre>De.rubro_nombre?1:je.concepto<De.concepto?-1:je.concepto>De.concepto?1:0),a(ke)}catch(Z){console.error("Error al cargar datos:",Z.message),y("Error al cargar datos. Intntalo de nuevo.")}finally{p(!1)}},me=async()=>{p(!0),y(null);try{const{data:Z,error:ee}=await ue.from("entradas_contables").select(`
          id,
          fecha,
          importe_ars,
          importe_usd,
          moneda,
          estado_financiero_id,
          tipo,
          concepto_id,
          archivo_url,
          conceptos_contables (
            concepto,
            rubro_id,
            rubros (nombre)
          )
        `).eq("usuario_id",r.id).eq("fecha",_);if(ee)throw ee;const I=c.find(de=>de.fecha===_)?.tasa||1,Q=await Promise.all(Z.map(async de=>{const we=o.find($t=>$t.id===de.concepto_id);let ke=de.moneda==="ARS"?de.importe_ars:de.importe_usd,je=0,De=0;return I>0&&(de.moneda==="ARS"?(je=de.importe_ars,De=de.importe_ars/I):(De=de.importe_usd,je=de.importe_usd*I)),{...de,rubro_nombre:we?.rubro_nombre||"",concepto:de.conceptos_contables?.concepto||"",monto:ke,tipoCambio:I,importe_ars:parseFloat(je.toFixed(2)),importe_usd:parseFloat(De.toFixed(2))}}));Q.sort((de,we)=>de.rubro_nombre<we.rubro_nombre?-1:de.rubro_nombre>we.rubro_nombre?1:de.concepto<we.concepto?-1:de.concepto>we.concepto?1:0),D(Q);try{sessionStorage.setItem("editing_day_"+_,JSON.stringify(Q))}catch{console.warn("No se pudo guardar en sessionStorage")}}catch(Z){console.error("Error al cargar entradas para el da seleccionado:",Z.message),y("Error al cargar entradas para el da seleccionado.")}finally{p(!1)}},pe=(Z,ee,oe)=>{const I=[...k];I[Z][ee]=oe;const Q=I[Z],de=Q.tipoCambio;de>0?(ee==="monto"&&(Q.monto=parseFloat(oe)||0),ee==="moneda"&&(Q.moneda==="ARS"?Q.monto=Q.importe_ars:Q.monto=Q.importe_usd),Q.moneda==="ARS"?(Q.importe_ars=Q.monto,Q.importe_usd=Q.monto/de):(Q.importe_usd=Q.monto,Q.importe_ars=Q.importe_usd*de)):(Q.importe_ars=0,Q.importe_usd=0),D(I);try{sessionStorage.setItem("editing_day_"+_,JSON.stringify(I))}catch{console.warn("No se pudo guardar en sessionStorage")}},W=async()=>{p(!0),y(null);try{const Z=c.find(Q=>Q.fecha===_),ee=Z?Z.id:null,oe=k.map(Q=>({id:Q.id,estado_financiero_id:Q.estado_financiero_id,tipo:Q.tipo,usuario_id:r.id,fecha:_,moneda:Q.moneda,importe_ars:parseFloat(Q.importe_ars)||0,importe_usd:parseFloat(Q.importe_usd)||0,tipo_cambio_id:ee,concepto_id:Q.concepto_id,archivo_url:Q.archivo_url})),{error:I}=await ue.from("entradas_contables").upsert(oe);if(I)throw I;try{sessionStorage.removeItem("editing_day_"+_)}catch{console.warn("No se pudo limpiar sessionStorage")}alert("Cambios guardados con xito."),le(),b("list")}catch(Z){console.error("Error al guardar el da:",Z.message),y("Error al guardar el da. Intntalo de nuevo.")}finally{p(!1)}},X=async()=>{p(!0),y(null);try{const{error:Z}=await ue.from("entradas_contables").delete().eq("usuario_id",r.id).eq("fecha",_);if(Z)throw Z;try{sessionStorage.removeItem("editing_day_"+_)}catch{console.warn("No se pudo limpiar sessionStorage")}alert("Da eliminado con xito."),le(),b("list"),R(!1)}catch(Z){console.error("Error al eliminar el da:",Z.message),y("Error al eliminar el da. Intntalo de nuevo.")}finally{p(!1)}},V=Z=>{q(Z),fe(null),Y(""),H(!0)},C=()=>{H(!1),q(null)},K=Z=>{const ee=Z.target.files?.[0];ee&&fe(ee)},be=async Z=>{try{if(!Z.archivo_url){alert("No se encontr un archivo para este registro.");return}const ee=Z.archivo_url.split("/public/entradas-archivos/");if(ee.length<2){console.error("URL del archivo no tiene el formato esperado:",Z.archivo_url),alert("La URL del archivo no es vlida.");return}const oe=ee[1],{data:I,error:Q}=await ue.storage.from("entradas-archivos").createSignedUrl(oe,60);if(Q)throw Q;window.open(I.signedUrl,"_blank")}catch(ee){console.error("Error al generar la URL firmada:",ee),alert("Hubo un error al intentar ver el archivo. Intenta de nuevo.")}},ve=async(Z,ee)=>{if(window.confirm("Ests seguro de que quieres eliminar el archivo de este registro? Esta accin es irreversible.")){const I=Z.archivo_url.split("/public/entradas-archivos/")[1];try{const{error:Q}=await ue.storage.from("entradas-archivos").remove([I]);if(Q)throw Q;const{error:de}=await ue.from("entradas_contables").update({archivo_url:null}).eq("id",Z.id).eq("usuario_id",r.id);if(de)throw de;const we=[...k];we[ee].archivo_url=null,D(we),alert("Archivo eliminado con xito."),me()}catch(Q){console.error("Error al eliminar el archivo:",Q),alert("Error al eliminar el archivo. Intenta de nuevo.")}}},xe=async()=>{if(!G){Y("No se ha seleccionado ningn archivo.");return}if(z){he(!0),Y("");try{const Z=G.name.split(".").pop(),ee=`${z.id}.${Z}`,oe=`${r.id}/${ee}`,{error:I}=await ue.storage.from("entradas-archivos").upload(oe,G,{cacheControl:"3600",upsert:!0});if(I)throw I;const{data:Q}=ue.storage.from("entradas-archivos").getPublicUrl(oe);if(!Q)throw new Error("No se pudo obtener la URL pblica del archivo");const de=Q.publicUrl,{error:we}=await ue.from("entradas_contables").update({archivo_url:de}).eq("id",z.id).eq("usuario_id",r.id);if(we)throw we;const ke=[...k],je=ke.findIndex(De=>De.id===z.id);je!==-1&&(ke[je].archivo_url=de,D(ke),sessionStorage.setItem("editing_day_"+_,JSON.stringify(ke))),Y("Archivo subido y guardado con xito."),C()}catch(Z){console.error("Error al subir el archivo:",Z),Y("Error al subir el archivo. Intenta de nuevo.")}finally{he(!1),fe(null)}}},re=()=>u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Das Contables"}),u.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Object.keys(t).length>0?Object.keys(t).map(Z=>u.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-150",children:[u.jsxs("span",{className:"font-medium text-gray-800",children:[new Date(Z+"T00:00:00").toLocaleDateString("es-AR",{timeZone:"America/Argentina/Buenos_Aires"}),u.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",t[Z].length," registros)"]})]}),u.jsxs("button",{onClick:()=>ne(Z),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 flex items-center space-x-2",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2d00/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.28-8.28Z"})}),u.jsx("span",{children:"Editar"})]})]},Z)):u.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay das registrados."})})]}),Ee=()=>{const Z=k?.length>0?k.reduce((ke,je)=>(je?.tipo&&(ke[je.tipo]||(ke[je.tipo]={ars:0,usd:0}),ke[je.tipo].ars+=je.importe_ars||0,ke[je.tipo].usd+=je.importe_usd||0),ke),{}):{},ee=Z["Activo Corriente"]?.ars||0,oe=Z["Activo No Corriente"]?.ars||0,I=Z.Pasivo?.ars||0,Q=ee+oe-I,de=k[0]?.tipoCambio||1,we=de>0?Q/de:0;return u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Editar registros - ",new Date(_+"T00:00:00").toLocaleDateString("es-AR",{timeZone:"America/Argentina/Buenos_Aires"})]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:()=>b("list"),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150",children:"Volver"}),u.jsx("button",{onClick:W,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150",children:"Guardar Cambios"}),u.jsx("button",{onClick:()=>R(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150",children:"Eliminar Da"})]})]}),u.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:u.jsx("p",{className:"text-sm text-blue-800",children:"Los valores se recalculan automticamente con el tipo de cambio actual del da."})}),u.jsx("div",{className:"mb-6 border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:u.jsx("table",{className:"min-w-full divide-y divide-gray-200",children:u.jsxs("tbody",{className:"bg-white",children:[u.jsxs("tr",{className:"bg-gray-50",children:[u.jsx("td",{className:"w-[85%] px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Activo Corriente"}),u.jsxs("td",{className:"w-[15%] px-3 py-2 text-right font-bold text-green-700",children:["$",(Z["Activo Corriente"]?.ars||0).toLocaleString("es-AR",{minimumFractionDigits:2})]}),u.jsxs("td",{className:"w-[15%] px-3 py-2 text-right font-bold text-green-700",children:["$",(Z["Activo Corriente"]?.usd||0).toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),u.jsxs("tr",{className:"bg-gray-50",children:[u.jsx("td",{className:"w-[85%] px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Activo No Corriente"}),u.jsxs("td",{className:"w-[15%] px-3 py-2 text-right font-bold text-green-500",children:["$",(Z["Activo No Corriente"]?.ars||0).toLocaleString("es-AR",{minimumFractionDigits:2})]}),u.jsxs("td",{className:"w-[15%] px-3 py-2 text-right font-bold text-green-500",children:["$",(Z["Activo No Corriente"]?.usd||0).toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),u.jsxs("tr",{className:"bg-gray-50",children:[u.jsx("td",{className:"w-[85%] px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Pasivo"}),u.jsxs("td",{className:"w-[15%] px-3 py-2 text-right font-bold text-red-600",children:["$",(Z.Pasivo?.ars||0).toLocaleString("es-AR",{minimumFractionDigits:2})]}),u.jsxs("td",{className:"w-[15%] px-3 py-2 text-right font-bold text-red-600",children:["$",(Z.Pasivo?.usd||0).toLocaleString("es-AR",{minimumFractionDigits:2})]})]}),u.jsxs("tr",{className:"border-t-2 border-gray-300 font-bold bg-gray-50",children:[u.jsx("td",{className:"w-[85%] px-3 py-2 text-right text-lg text-gray-800",children:"Patrimonio Neto"}),u.jsxs("td",{className:"w-[15%] px-3 py-2 text-right text-lg text-gray-800",children:["$",Q.toLocaleString("es-AR",{minimumFractionDigits:2})]}),u.jsxs("td",{className:"w-[15%] px-3 py-2 text-right text-lg text-gray-800",children:["$",we.toLocaleString("es-AR",{minimumFractionDigits:2})]})]})]})})}),u.jsx("div",{className:"max-h-[60vh] overflow-y-auto overflow-x-auto",children:u.jsxs("table",{className:"min-w-full table-fixed divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"w-[15%] px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Rubro"}),u.jsx("th",{className:"w-[20%] px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Concepto"}),u.jsx("th",{className:"w-[10%] px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Imagen"}),u.jsx("th",{className:"w-[10%] px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Moneda"}),u.jsx("th",{className:"w-[10%] px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Monto"}),u.jsx("th",{className:"w-[15%] px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Tipo de Cambio"}),u.jsx("th",{className:"w-[10%] px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Valor ARS"}),u.jsx("th",{className:"w-[10%] px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Valor USD"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.length>0?k.map((ke,je)=>u.jsxs("tr",{children:[u.jsx("td",{className:"p-1 whitespace-nowrap text-sm text-gray-600",children:ke.rubro_nombre}),u.jsx("td",{className:"p-1 whitespace-nowrap text-sm font-medium text-gray-800",children:ke.concepto}),u.jsx("td",{className:"p-1 whitespace-nowrap text-sm flex items-center space-x-2",children:ke.archivo_url?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>be(ke),className:"px-3 py-1 rounded-md text-white text-xs font-medium transition-colors duration-150 bg-indigo-600 hover:bg-indigo-700",children:"Ver Archivo"}),u.jsx("button",{onClick:()=>ve(ke,je),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"(Eliminar)"})]}):u.jsx("button",{onClick:()=>V(ke),className:"px-3 py-1 rounded-md text-white text-xs font-medium transition-colors duration-150 bg-gray-400 hover:bg-gray-500",children:"Anexar Archivo"})}),u.jsx("td",{className:"p-1",children:u.jsxs("select",{value:ke.moneda,onChange:De=>pe(je,"moneda",De.target.value),className:"w-full text-sm px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[u.jsx("option",{value:"ARS",children:"ARS"}),u.jsx("option",{value:"USD",children:"USD"})]})}),u.jsx("td",{className:"p-1 text-right",children:u.jsx("input",{type:"number",step:"0.01",value:ke.monto,onChange:De=>pe(je,"monto",De.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-right"})}),u.jsx("td",{className:"p-1 whitespace-nowrap text-sm text-gray-600 text-right",children:ke.tipoCambio.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}),u.jsxs("td",{className:"p-1 whitespace-nowrap text-sm text-gray-600 text-right",children:["$",ke.importe_ars.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsxs("td",{className:"p-1 whitespace-nowrap text-sm text-gray-600 text-right",children:["$",ke.importe_usd.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},ke.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"No hay entradas contables para los filtros seleccionados."})})})]})})]})};return u.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Entradas Contables"})]}),u.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:f?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}):x?u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md shadow-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Error al cargar los datos"}),u.jsxs("p",{className:"text-sm",children:["Detalles: ",u.jsx("span",{className:"font-mono text-red-800",children:x})]})]}):v==="list"?re():Ee()})]}),P&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm mx-auto",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirmar Eliminacin"}),u.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Ests seguro de que deseas eliminar todas las entradas del da"," ",new Date(_+"T00:00:00").toLocaleDateString("es-AR",{timeZone:"America/Argentina/Buenos_Aires"}),"? Esta accin no se puede deshacer."]}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>R(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:X,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Eliminar"})]})]})}),U&&z&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Anexar Archivo"}),A&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-4 text-sm",children:A}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seleccionar un archivo:"}),u.jsx("input",{type:"file",onChange:K,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:file:text-indigo-700 hover:file:bg-indigo-100"}),G&&u.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Archivo seleccionado: ",u.jsx("span",{className:"font-medium",children:G.name})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsxs("button",{type:"button",onClick:xe,disabled:!G||O,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors duration-150 flex items-center space-x-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[O?u.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.962l2-2.671z"})]}):null,u.jsx("span",{children:O?"Subiendo...":"Subir y Guardar"})]})]})]})})]})}function mv({user:r,setCurrentView:e}){const[t,s]=L.useState(!0),[o,a]=L.useState(null),[c,d]=L.useState({}),[f,p]=L.useState([]),[x,y]=L.useState([]),[v,b]=L.useState([]),[_,j]=L.useState(new Date().toISOString().split("T")[0]);L.useEffect(()=>{k()},[r]);const k=async()=>{try{s(!0),a(null);const{data:P,error:R}=await ue.from("entradas_contables").select("id, fecha, concepto_id").eq("usuario_id",r.id).order("fecha",{ascending:!1});if(R)throw R;const U={};P&&P.forEach(A=>{const Y=A.fecha;U[Y]||(U[Y]=[]),U[Y].push(A)}),d(U);const{data:H,error:z}=await ue.from("rubros").select(`
          id,
          nombre,
          conceptos_contables (
            id,
            concepto,
            activo
          )
        `).eq("usuario_id",r.id).order("nombre",{ascending:!0});if(z)throw z;const q=[];H&&H.forEach(A=>{A.conceptos_contables.forEach(Y=>{Y.activo&&q.push({...Y,rubro_id:A.id,rubro_nombre:A.nombre,tipo:A.nombre.toLowerCase().includes("activo corriente")?"Activo Corriente":A.nombre.toLowerCase().includes("activo no corriente")?"Activo No Corriente":A.nombre.toLowerCase().includes("pasivo")?"Pasivo":""})})}),p(q);const{data:G,error:fe}=await ue.from("estados_financieros").select("*").eq("usuario_id",r.id).order("nombre",{ascending:!0});if(fe)throw fe;y(G||[]);const{data:O,error:he}=await ue.from("tipos_cambio").select("tasa, id, fecha").eq("usuario_id",r.id).order("fecha",{ascending:!1});if(he)throw he;b(O||[])}catch(P){console.error("Error al cargar datos iniciales:",P.message),a("Error al cargar datos iniciales. Intntalo de nuevo.")}finally{s(!1)}},D=async P=>{s(!0),a(null);const{data:R,error:U}=await ue.from("tipos_cambio").select("id, tasa").eq("usuario_id",r.id).eq("fecha",P).single();if(U){alert(`No se encontr un tipo de cambio para la fecha ${P}. Por favor, regstrelo antes de crear un nuevo da.`),s(!1);return}if(c[P]){alert("Ya existen entradas para esta fecha. Redirigiendo a la vista de edicin."),e("entradas-contables");return}let H=[];const q=Object.keys(c).sort().reverse().find(fe=>fe<P);if(q){const{data:fe,error:O}=await ue.from("entradas_contables").select("*").eq("usuario_id",r.id).eq("fecha",q);if(O){a("Error al replicar entradas del ltimo da."),s(!1);return}H=f.map(he=>{const A=fe.find(W=>W.concepto_id===he.id),Y=x.length>0?x[0].id:"",ne=R?.tasa;let le=0,me=0,pe="ARS";return A&&(pe=A.moneda,A.moneda==="USD"?(me=A.importe_usd,le=A.importe_usd*ne):(le=A.importe_ars,me=A.importe_ars/ne)),{estado_financiero_id:Y,concepto_id:he.id,importe_ars:le||0,importe_usd:me||0,tipo:he.tipo,fecha:P,tipo_cambio_id:R?.id||null,usuario_id:r.id,moneda:pe}})}else H=f.map(fe=>({estado_financiero_id:x.length>0?x[0].id:"",concepto_id:fe.id,importe_ars:0,importe_usd:0,tipo:fe.tipo,fecha:P,tipo_cambio_id:R?.id||null,usuario_id:r.id,moneda:"ARS"}));const{error:G}=await ue.from("entradas_contables").insert(H);if(G){console.error("Error al insertar nuevas entradas:",G),a("Error al registrar el nuevo da. Intntalo de nuevo."),s(!1);return}e("entradas-contables")};return u.jsx("div",{className:"flex h-screen bg-gray-100 font-sans",children:u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Registrar Nuevo Da"})]}),u.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:t?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}):o?u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md shadow-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Error al cargar los datos"}),u.jsxs("p",{className:"text-sm",children:["Detalles: ",u.jsx("span",{className:"font-mono text-red-800",children:o})]})]}):u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 w-full max-w-sm mx-auto border border-gray-200",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Selecciona una fecha"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),u.jsx("input",{type:"date",value:_,onChange:P=>j(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>e("entradas-contables"),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:()=>D(_),className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors duration-150",children:"Crear Da"})]})]})})]})})}function pv({user:r,setCurrentView:e}){const[t,s]=L.useState([]),[o,a]=L.useState({}),[c,d]=L.useState(!1),[f,p]=L.useState(null),x=new Date,y=new Date(x.getFullYear(),x.getMonth(),x.getDate());y.setMonth(y.getMonth()-1);const v=q=>q.toISOString().split("T")[0],[b,_]=L.useState(v(y)),[j,k]=L.useState(v(x)),[D,P]=L.useState(!1),[R,U]=L.useState(!1);L.useEffect(()=>{const q=document.createElement("script");return q.src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js",q.onload=()=>P(!0),q.onerror=()=>{console.error("Error al cargar la librera de Excel."),alert("Error al cargar la librera de Excel. Por favor, recarga la pgina.")},document.head.appendChild(q),()=>document.head.removeChild(q)},[]),L.useEffect(()=>{H()},[r,b,j]);const H=async()=>{d(!0),p(null);try{let q=ue.from("tipos_cambio").select("fecha, tasa").eq("usuario_id",r.id);b&&j?q=q.gte("fecha",b).lte("fecha",j):b?q=q.gte("fecha",b):j&&(q=q.lte("fecha",j));const{data:G,error:fe}=await q;if(fe)throw fe;const O={};G?.forEach(ne=>{O[ne.fecha]=parseFloat(ne.tasa)}),a(O);let he=ue.from("entradas_contables").select(`
          fecha,
          importe_ars,
          importe_usd,
          moneda,
          tipo,
          conceptos_contables (
            concepto,
            rubro_id,
            rubros (nombre)
          )
        `).eq("usuario_id",r.id).order("fecha",{ascending:!1});b&&j?he=he.gte("fecha",b).lte("fecha",j):b?he=he.gte("fecha",b):j&&(he=he.lte("fecha",j));const{data:A,error:Y}=await he;if(Y)throw Y;s(A||[])}catch(q){console.error("Error al filtrar datos:",q.message),p("Error al filtrar datos. Intntalo de nuevo.")}finally{d(!1)}},z=async()=>{if(!D){alert("La librera de exportacin a Excel an no ha cargado.");return}if(!t||t.length===0){alert("No hay datos en la tabla para exportar.");return}U(!0);try{const q=["Fecha","Rubro","Concepto","Moneda","Valor ARS","Valor USD","Tipo de Cambio (ARS/USD)"],G=t.map(A=>{const Y=new Date(A.fecha+"T00:00:00").toLocaleDateString("es-AR"),ne=o[A.fecha]??"N/A";return[{v:Y,t:"s"},{v:A.conceptos_contables?.rubros?.nombre||"",t:"s"},{v:A.conceptos_contables?.concepto||"",t:"s"},{v:A.moneda,t:"s"},{v:parseFloat(A.importe_ars),t:"n",z:"#,##0.00"},{v:parseFloat(A.importe_usd),t:"n",z:"#,##0.00"},{v:typeof ne=="number"?ne:null,t:"n",z:"#,##0.00"}]}),fe=window.XLSX.utils.aoa_to_sheet([]);window.XLSX.utils.sheet_add_aoa(fe,[q]),window.XLSX.utils.sheet_add_aoa(fe,G,{origin:"A2"}),fe["!cols"]=[{wch:12},{wch:20},{wch:25},{wch:10},{wch:15},{wch:15},{wch:18}];const O=window.XLSX.utils.book_new();window.XLSX.utils.book_append_sheet(O,fe,"Registros");const he=`Registros_${new Date().toISOString().split("T")[0]}.xlsx`;window.XLSX.writeFile(O,he)}catch(q){console.error("Error al exportar a Excel:",q),alert("Error al exportar a Excel. Intntalo de nuevo.")}finally{await new Promise(q=>setTimeout(q,100)),U(!1)}};return u.jsx("div",{className:"flex h-screen bg-gray-100 font-sans",children:u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Exportar a Excel"})]}),u.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[u.jsx("div",{className:"mb-6 space-y-4",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Desde"}),u.jsx("input",{type:"date",value:b,onChange:q=>_(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Hasta"}),u.jsx("input",{type:"date",value:j,onChange:q=>k(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),u.jsxs("div",{className:"flex items-end space-x-2",children:[u.jsx("button",{onClick:H,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150",children:"Ver"}),u.jsx("button",{onClick:z,disabled:!D||t.length===0||R,className:`w-full px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 flex items-center justify-center space-x-2 ${!D||t.length===0||R?"bg-gray-400 cursor-not-allowed text-gray-200":"bg-green-600 hover:bg-green-700 text-white"}`,children:R?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.962l2-2.671z"})]}),u.jsx("span",{children:"Generando Excel..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),u.jsx("span",{children:"Exportar a Excel"})]})})]})]})}),c?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}):f?u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md shadow-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Error al cargar los datos"}),u.jsxs("p",{className:"text-sm",children:["Detalles: ",u.jsx("span",{className:"font-mono text-red-800",children:f})]})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Rubro"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Concepto"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Moneda"}),u.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Valor ARS"}),u.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Valor USD"}),u.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Tipo Cambio"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length>0?t.map((q,G)=>{const fe=o[q.fecha]??"N/A";return u.jsxs("tr",{children:[u.jsx("td",{className:"p-1 whitespace-nowrap text-sm font-medium text-gray-800",children:new Date(q.fecha+"T00:00:00").toLocaleDateString("es-AR")}),u.jsx("td",{className:"p-1 whitespace-nowrap text-sm text-gray-600",children:q.conceptos_contables?.rubros?.nombre}),u.jsx("td",{className:"p-1 whitespace-nowrap text-sm text-gray-600",children:q.conceptos_contables?.concepto}),u.jsx("td",{className:"p-1 whitespace-nowrap text-sm text-gray-600",children:q.moneda}),u.jsxs("td",{className:"p-1 whitespace-nowrap text-sm text-gray-600 text-right",children:["$",parseFloat(q.importe_ars).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsxs("td",{className:"p-1 whitespace-nowrap text-sm text-gray-600 text-right",children:["$",parseFloat(q.importe_usd).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsx("td",{className:"p-1 whitespace-nowrap text-sm text-gray-600 text-right font-medium",children:typeof fe=="number"?`$${fe.toLocaleString("es-AR",{minimumFractionDigits:2})}`:"N/A"})]},G)}):u.jsx("tr",{children:u.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No hay entradas contables para los filtros seleccionados."})})})]})})]})})]})})}function gv({user:r,setCurrentView:e,updateMessage:t,setUpdateMessage:s}){const[o,a]=L.useState([]),[c,d]=L.useState(!0),[f,p]=L.useState(null),[x,y]=L.useState(!1),[v,b]=L.useState(!1),[_,j]=L.useState(null),[k,D]=L.useState(null),[P,R]=L.useState({tipo:"",simbolo:"",nombre:"",moneda:"",submarket:""}),[U,H]=L.useState(""),[z,q]=L.useState(!1),[G,fe]=L.useState(null),[O,he]=L.useState({key:"simbolo",direction:"ascending"}),[A,Y]=L.useState(""),[ne,le]=L.useState(""),me=["accion","cedear","etf","bono"],pe=["ARS","USD"];L.useEffect(()=>{W(),X()},[r,t]);const W=async()=>{if(!r){d(!1);return}try{d(!0),p(null);const{data:I,error:Q}=await ue.from("activos").select("*, ultimo_precio, ultimo_precio_ars, fecha_actualizacion").order("tipo",{ascending:!0}).order("simbolo",{ascending:!0});if(Q)throw Q;a(I||[])}catch(I){console.error(" Error al cargar activos:",I.message),p(I.message)}finally{d(!1)}},X=async()=>{if(r)try{const{data:I}=await ue.from("tipos_cambio").select("tasa").eq("usuario_id",r.id).order("fecha",{ascending:!1}).limit(1).single();fe(I?.tasa||null)}catch(I){console.error("Error al cargar tipo de cambio:",I.message)}},V=(I=null)=>{I?(D(I),R({tipo:I.tipo,simbolo:I.simbolo,nombre:I.nombre,moneda:I.moneda,submarket:I.submarket||""})):(D(null),R({tipo:"",simbolo:"",nombre:"",moneda:"",submarket:""})),H(""),y(!0)},C=()=>{y(!1),D(null),R({tipo:"",simbolo:"",nombre:"",moneda:"",submarket:""}),H("")},K=I=>{j(I),b(!0)},be=()=>{j(null),b(!1)},ve=I=>{R({...P,[I.target.name]:I.target.value})},xe=async I=>{I.preventDefault();const{tipo:Q,simbolo:de,nombre:we,moneda:ke,submarket:je}=P;if(!Q||!de||!we||!ke||!je){H("Todos los campos son obligatorios");return}try{if(k){const{error:De}=await ue.from("activos").update({tipo:Q,simbolo:de,nombre:we,moneda:ke,submarket:je}).eq("id",k.id);if(De)throw De}else{const{error:De}=await ue.from("activos").insert({tipo:Q,simbolo:de.toUpperCase(),nombre:we,moneda:ke,submarket:je});if(De)throw De}await W(),C(),s({type:"success",text:k?"Activo actualizado con xito.":"Activo creado con xito."})}catch(De){console.error("Error al guardar el activo:",De.message),H("Error al guardar. Intenta nuevamente."),s({type:"error",text:"Error al guardar el activo."})}finally{setTimeout(()=>s(null),5e3)}},re=async()=>{if(_)try{const{error:I}=await ue.from("activos").delete().eq("id",_);if(I)throw I;await W(),be(),s({type:"success",text:"Activo eliminado con xito."})}catch(I){console.error("Error al eliminar el activo:",I.message),p("Error al eliminar. Intenta nuevamente."),s({type:"error",text:"Error al eliminar el activo."}),be()}finally{setTimeout(()=>s(null),5e3)}},Ee=async()=>{q(!0),s(null);try{if(!r){s({type:"error",text:"Usuario no logueado."});return}const{data:I,error:Q}=await ue.functions.invoke("actualizar-precios-docta",{body:{user_id:r.id}});if(Q)throw Q;await new Promise(de=>setTimeout(de,1e3)),await W(),await X(),s({type:"success",text:I?.message||"Precios actualizados correctamente."})}catch(I){console.error("Error al actualizar precios:",I),s({type:"error",text:"Error al actualizar precios. Por favor, revisa la consola."})}finally{q(!1),setTimeout(()=>s(null),5e3)}},Z=I=>{let Q="ascending";O.key===I&&O.direction==="ascending"&&(Q="descending"),he({key:I,direction:Q})},oe=(()=>{let I=[...o];return A&&(I=I.filter(Q=>Q.tipo===A)),ne&&(I=I.filter(Q=>Q.simbolo.toLowerCase().includes(ne.toLowerCase()))),O.key!==null&&I.sort((Q,de)=>{let we,ke;return O.key==="ultimo_precio"||O.key==="ultimo_precio_ars"?(we=Q[O.key]||0,ke=de[O.key]||0):O.key==="fecha_actualizacion"?(we=Q.fecha_actualizacion?new Date(Q.fecha_actualizacion):new Date(0),ke=de.fecha_actualizacion?new Date(de.fecha_actualizacion):new Date(0)):(we=(Q[O.key]||"").toLowerCase(),ke=(de[O.key]||"").toLowerCase()),we<ke?O.direction==="ascending"?-1:1:we>ke?O.direction==="ascending"?1:-1:0}),I})();return u.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Precios"})]}),u.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6",children:c?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}):f?u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md shadow-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Error al cargar los datos"}),u.jsxs("p",{className:"text-sm",children:["Detalles: ",u.jsx("span",{className:"font-mono text-red-800",children:f})]})]}):u.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200",children:[u.jsxs("div",{className:"px-6 py-4 flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Lista de Activos"}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[G&&u.jsxs("span",{className:"text-sm text-gray-600 font-medium whitespace-nowrap",children:["T.C. actual: ",u.jsxs("span",{className:"font-mono font-semibold",children:["$",G?.toFixed(2)]})]}),u.jsx("div",{className:"flex flex-col items-end space-y-2",children:u.jsx("button",{onClick:Ee,disabled:z,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center space-x-2 ${z?"bg-gray-400 cursor-not-allowed text-gray-200":"bg-gray-600 hover:bg-gray-700 text-white"}`,children:z?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.962l2-2.671z"})]}),u.jsx("span",{children:"Actualizando precios..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.03M4.032 9.417l2.687-2.685m-2.687 2.685a8.25 8.25 0 0113.803-3.03L21.03 3.485c.036.002.071.006.106.01L2.985 19.644z"})}),u.jsx("span",{children:"Actualizar precios"})]})})}),u.jsxs("button",{onClick:()=>V(),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 flex items-center space-x-2",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),u.jsx("span",{children:"Nuevo Activo"})]})]})]}),u.jsxs("div",{className:"p-6 bg-gray-100 border-t border-gray-200 flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{htmlFor:"filter-tipo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filtrar por Tipo"}),u.jsxs("select",{id:"filter-tipo",value:A,onChange:I=>Y(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[u.jsx("option",{value:"",children:"Todos"}),me.map(I=>u.jsx("option",{value:I,children:I==="accion"?"Accin":I==="cedear"?"Cedear":I==="etf"?"ETF":"Bono"},I))]})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{htmlFor:"filter-simbolo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filtrar por Ticker"}),u.jsx("input",{type:"text",id:"filter-simbolo",value:ne,onChange:I=>le(I.target.value),placeholder:"Ej: GGAL",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:u.jsxs("tr",{children:[u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Z("tipo"),children:["Tipo",O.key==="tipo"&&u.jsx("span",{className:"ml-1",children:O.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Z("simbolo"),children:["Ticker",O.key==="simbolo"&&u.jsx("span",{className:"ml-1",children:O.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Z("submarket"),children:["Submarket",O.key==="submarket"&&u.jsx("span",{className:"ml-1",children:O.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Z("moneda"),children:["Moneda",O.key==="moneda"&&u.jsx("span",{className:"ml-1",children:O.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Z("ultimo_precio"),children:["Precio USD",O.key==="ultimo_precio"&&u.jsx("span",{className:"ml-1",children:O.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Z("ultimo_precio_ars"),children:["Precio ARS",O.key==="ultimo_precio_ars"&&u.jsx("span",{className:"ml-1",children:O.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Z("fecha_actualizacion"),children:["ltima Actualizacin",O.key==="fecha_actualizacion"&&u.jsx("span",{className:"ml-1",children:O.direction==="ascending"?"":""})]}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.length>0?oe.map(I=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:I.tipo}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-mono",children:I.simbolo}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:I.submarket}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-mono",children:I.moneda}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:I.ultimo_precio?`$${I.ultimo_precio?.toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:4})}`:u.jsx("span",{className:"text-gray-400",children:"Sin datos"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:I.ultimo_precio_ars?`$${I.ultimo_precio_ars?.toLocaleString("es-AR",{minimumFractionDigits:2})}`:u.jsx("span",{className:"text-gray-400",children:"Sin datos"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:I.fecha_actualizacion?new Date(I.fecha_actualizacion).toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short"}):"N/A"}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[u.jsx("button",{onClick:()=>V(I),className:"text-indigo-600 hover:text-indigo-800 mr-4 transition-colors duration-150",children:"Editar"}),u.jsx("button",{onClick:()=>K(I.id),className:"text-red-600 hover:text-red-800 transition-colors duration-150",children:"Eliminar"})]})]},I.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"No tens activos registrados."})})})]})})]})})]}),x&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:k?"Editar Activo":"Nuevo Activo"}),U&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-4 text-sm",children:U}),u.jsxs("form",{onSubmit:xe,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),u.jsxs("select",{name:"tipo",value:P.tipo,onChange:ve,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,children:[u.jsx("option",{value:"",children:"Seleccionar tipo"}),me.map(I=>u.jsx("option",{value:I,children:I==="accion"?"Accin":I==="cedear"?"Cedear":I==="etf"?"ETF":"Bono"},I))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ticker"}),u.jsx("input",{type:"text",name:"simbolo",value:P.simbolo,onChange:I=>R({...P,simbolo:I.target.value.toUpperCase()}),placeholder:"Ej: GGAL, AAPL, AL30",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),u.jsx("input",{type:"text",name:"nombre",value:P.nombre,onChange:ve,placeholder:"Ej: Grupo Galicia, Apple Inc.",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda"}),u.jsxs("select",{name:"moneda",value:P.moneda,onChange:ve,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,children:[u.jsx("option",{value:"",children:"Seleccionar moneda"}),pe.map(I=>u.jsx("option",{value:I,children:I},I))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Submarket"}),u.jsx("input",{type:"text",name:"submarket",value:P.submarket,onChange:ve,placeholder:"Ej: BYMA",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors duration-150",children:k?"Actualizar":"Guardar"})]})]})]})}),v&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm mx-auto",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirmar Eliminacin"}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Ests seguro de que deseas eliminar este activo? Esta accin no se puede deshacer."}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:be,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:re,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-150",children:"Eliminar"})]})]})}),t&&u.jsxs("div",{className:`fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-6 py-4 shadow-lg transition-all duration-300 ${t.type==="success"?"bg-green-100 text-green-700 border-b border-green-200":"bg-red-100 text-red-700 border-b border-red-200"}`,children:[u.jsx("p",{className:"text-sm font-medium",children:t.text}),u.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-gray-700",children:""})]})]})}function xv({user:r,setCurrentView:e,updateMessage:t,setUpdateMessage:s,portfolioCurrencies:o,setPortfolioCurrencies:a}){const[c,d]=L.useState([]),[f,p]=L.useState(!0),[x,y]=L.useState(!1),[v,b]=L.useState({name:"",description:""}),[_,j]=L.useState(""),[k,D]=L.useState([]),[P,R]=L.useState(!1);L.useEffect(()=>{r&&z()},[r]),L.useEffect(()=>{r&&k.length>0&&H()},[r,k]);const U=async()=>{try{s({type:"info",text:"Recalculando valores contables..."});const{data:A,error:Y}=await ue.from("tipos_cambio").select("fecha, tasa").eq("usuario_id",r.id);if(Y)throw Y;const ne=A.reduce((V,C)=>(V[C.fecha]=C.tasa,V),{}),{data:le,error:me}=await ue.from("entradas_contables").select("id, fecha, importe_ars, importe_usd, moneda").eq("usuario_id",r.id);if(me)throw me;const pe=le.map(V=>{const C=ne[V.fecha];if(!C||C<=0)return null;let K=!1,be={};if(V.moneda==="ARS"){const ve=parseFloat((V.importe_ars/C).toFixed(2));ve!==V.importe_usd&&(K=!0,be={importe_usd:ve})}else if(V.moneda==="USD"){const ve=parseFloat((V.importe_usd*C).toFixed(2));ve!==V.importe_ars&&(K=!0,be={importe_ars:ve})}return K?ue.from("entradas_contables").update(be).eq("id",V.id).eq("usuario_id",r.id):null}).filter(Boolean);if(pe.length>0&&(await Promise.all(pe)).filter(K=>K.error).length>0)throw new Error("Algunos registros contables no se pudieron actualizar.");s({type:"info",text:"Actualizando los valors de los registros contables y los precios de los activos en cartera..."}),await new Promise(V=>setTimeout(V,1e3));const{data:W,error:X}=await ue.functions.invoke("actualizar-precios-docta",{body:{user_id:r.id}});if(X)throw X;return{success:!0}}catch(A){throw console.error("Error al recalcular y actualizar precios:",A),new Error(A.message||"Error en el proceso de actualizacin.")}},H=async()=>{R(!0);try{s({type:"info",text:"Iniciando actualizacin completa..."}),s({type:"info",text:"Actualizando la informacin del tipo de cambio Mep..."});const{error:A}=await ue.functions.invoke("actualizar-tipo-cambio",{body:{user_id:r.id}});if(A)throw A;await new Promise(Y=>setTimeout(Y,1e3)),await U(),s({type:"success",text:"Actualizacin completa! Todos los precios han sido sincronizados."})}catch(A){console.error("Error en la actualizacin completa:",A),s({type:"error",text:A.message||"Error en la actualizacin. Por favor, intenta de nuevo."})}finally{O(),R(!1),setTimeout(()=>s(null),5e3)}},z=async()=>{try{const{data:A,error:Y}=await ue.from("tipos_cambio").select("fecha, tasa").order("fecha",{ascending:!0});if(Y)throw Y;D(A)}catch(A){console.error("Error fetching tipos de cambio:",A.message)}},q=A=>{const Y=k.find(ne=>ne.fecha===A);return Y?Y.tasa:0},G=(A,Y,ne,le)=>{if(Y===ne)return A;const me=q(le);return me===0?0:Y==="ARS"&&ne==="USD"?A/me:Y==="USD"&&ne==="ARS"?A*me:A},fe=(A,Y="todos")=>{const ne=Y==="todos"?A:A.filter(xe=>xe.broker_id===Y),le={};ne.sort((xe,re)=>new Date(xe.fecha)-new Date(re.fecha)),ne.forEach(xe=>{const re=xe.activo_id;le[re]||(le[re]={cantidad:0,costo_total_ars:0,costo_total_usd:0,activoInfo:xe.activos,brokers:{},compras:[]});const Ee=parseFloat(xe.cantidad),Z=parseFloat(xe.precio_unitario),ee=Ee*Z,oe=xe.activos?.tipo?.toLowerCase()==="bono",I=G(ee,xe.moneda,"ARS",xe.fecha),Q=G(ee,xe.moneda,"USD",xe.fecha),de=xe.broker_id;if(le[re].brokers[de]||(le[re].brokers[de]={cantidad:0,costo_total_ars:0,costo_total_usd:0}),xe.tipo_operacion==="compra"){const we=oe?I/100/Ee:I/Ee,ke=oe?Q/100/Ee:Q/Ee;le[re].compras.push({id:xe.id,cantidad_restante:Ee,costo_unitario_ars:we,costo_unitario_usd:ke,broker_id:de})}else if(xe.tipo_operacion==="venta"){let we=Ee;for(let ke=0;ke<le[re].compras.length&&we>0;ke++){const je=le[re].compras[ke];if(je.cantidad_restante>0){const De=Math.min(we,je.cantidad_restante);je.cantidad_restante-=De,we-=De}}}});for(const xe in le){const re=le[xe];re.cantidad=0,re.costo_total_ars=0,re.costo_total_usd=0;for(const oe in re.brokers)re.brokers[oe].cantidad=0,re.brokers[oe].costo_total_ars=0,re.brokers[oe].costo_total_usd=0;re.compras.forEach(oe=>{const I=oe.cantidad_restante;I>0&&(re.cantidad+=I,re.brokers[oe.broker_id].cantidad+=I,re.costo_total_ars+=I*oe.costo_unitario_ars,re.costo_total_usd+=I*oe.costo_unitario_usd,re.brokers[oe.broker_id].costo_total_ars+=I*oe.costo_unitario_ars,re.brokers[oe.broker_id].costo_total_usd+=I*oe.costo_unitario_usd)});const Ee=re.activoInfo?.tipo?.toLowerCase()==="bono",Z=re.cantidad>0?Ee?re.cantidad*re.activoInfo.ultimo_precio_ars/100:re.cantidad*re.activoInfo.ultimo_precio_ars:0,ee=re.cantidad>0?Ee?re.cantidad*re.activoInfo.ultimo_precio/100:re.cantidad*re.activoInfo.ultimo_precio:0;re.valor_actual_ars=Z,re.valor_actual_usd=ee}let me=0,pe=0,W=0,X=0,V=0;for(const xe in le){const re=le[xe];me+=re.valor_actual_ars,pe+=re.valor_actual_usd,W+=re.costo_total_ars,X+=re.costo_total_usd,re.cantidad>0&&V++}const C=me-W,K=W>0?C/W*100:0,be=pe-X,ve=X>0?be/X*100:0;return{valorActualArs:me,valorActualUsd:pe,costoTotalArs:W,costoTotalUsd:X,rendimientoMontoArs:C,rendimientoPorcentajeArs:K,rendimientoMontoUsd:be,rendimientoPorcentajeUsd:ve,cantidadActivos:V}},O=async()=>{try{p(!0);const{data:A,error:Y}=await ue.from("portfolios").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});if(Y)throw Y;const ne=await Promise.all(A.map(async le=>{const{data:me,error:pe}=await ue.from("transacciones").select("*, activos(id, tipo, ultimo_precio, ultimo_precio_ars)").eq("portafolio_id",le.id).order("fecha",{ascending:!0});if(pe)throw pe;const W=fe(me,"todos");return{...le,valorActualArs:W.valorActualArs,valorActualUsd:W.valorActualUsd,rendimientoMontoArs:W.rendimientoMontoArs,rendimientoMontoUsd:W.rendimientoMontoUsd,rendimientoPorcentajeArs:W.rendimientoPorcentajeArs,rendimientoPorcentajeUsd:W.rendimientoPorcentajeUsd,cantidadActivos:W.cantidadActivos}}));d(ne)}catch(A){console.error("Error al cargar portfolios:",A.message)}finally{p(!1)}},he=async A=>{if(A.preventDefault(),!v.name){j("El nombre es obligatorio.");return}j("");try{const{data:Y,error:ne}=await ue.from("portfolios").insert({user_id:r.id,name:v.name,description:v.description}).select();if(ne)throw ne;b({name:"",description:""}),y(!1),O()}catch(Y){console.error("Error al crear el portafolio:",Y.message),j("Error al crear el portafolio. Intenta de nuevo.")}};return u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("button",{onClick:H,disabled:P,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center space-x-2 ${P?"bg-gray-400 cursor-not-allowed text-gray-200":"bg-gray-600 hover:bg-gray-700 text-white"}`,children:P?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.962l2-2.671z"})]}),u.jsx("span",{children:"Actualizando..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.03M4.032 9.417l2.687-2.685m-2.687 2.685a8.25 8.25 0 0113.803-3.03L21.03 3.485c.036.002.071.006.106.01L2.985 19.644z"})}),u.jsx("span",{children:"Actualizar precios"})]})}),u.jsx("button",{onClick:()=>y(!0),className:"bg-black text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors duration-150",children:"Crear Portafolio"})]})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mt-4",children:"Portafolios"})]}),t&&u.jsxs("div",{className:`fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-6 py-4 shadow-lg transition-all duration-300 ${t.type==="success"?"bg-green-100 text-green-700 border-b border-green-200":"bg-red-100 text-red-700 border-b border-red-200"}`,children:[u.jsx("p",{className:"text-sm font-medium",children:t.text}),u.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),u.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:f?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})}):u.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:c.length>0?c.map(A=>u.jsx(yv,{portfolio:A,setCurrentView:e,portfolioCurrencies:o,setPortfolioCurrencies:a},A.id)):u.jsx("div",{className:"col-span-full bg-white rounded-xl shadow-md p-6 text-center text-gray-500",children:u.jsx("p",{children:"An no tienes portafolios. Crea uno para empezar!"})})})}),x&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Crear Nuevo Portafolio"}),_&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-4 text-sm",children:_}),u.jsxs("form",{onSubmit:he,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),u.jsx("input",{type:"text",name:"name",value:v.name,onChange:A=>b({...v,name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Cartera de Inversin a Largo Plazo",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin (opcional)"}),u.jsx("textarea",{name:"description",value:v.description,onChange:A=>b({...v,description:A.target.value}),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Una breve descripcin de esta cartera"})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>{y(!1),j(""),b({name:"",description:""})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors duration-150",children:"Crear"})]})]})]})})]})}const yv=({portfolio:r,setCurrentView:e,portfolioCurrencies:t,setPortfolioCurrencies:s})=>{const o=t[r.id]||"ARS",a=()=>{let d,f,p,x;o==="ARS"?(d=r.rendimientoMontoArs,f=r.rendimientoPorcentajeArs,p="ARS"):(d=r.rendimientoMontoUsd,f=r.rendimientoPorcentajeUsd,p="USD"),x=d>=0;const y=`${d.toLocaleString("es-AR",{style:"currency",currency:p,minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"})}`,v=`${f.toFixed(2)}%`,b=x?"text-green-600":"text-red-600";return u.jsxs("p",{className:`text-lg font-semibold ${b}`,children:[y," (",v,")"]})},c=(d,f)=>o==="ARS"?`$${d.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})} ARS`:`$${f.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})} USD`;return u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:r.name}),u.jsx("p",{className:"text-sm text-gray-500",children:r.description})]}),u.jsxs("div",{className:"bg-gray-200 rounded-full p-1 flex items-center flex-shrink-0",children:[u.jsx("button",{onClick:()=>s({...t,[r.id]:"ARS"}),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors duration-200 ${o==="ARS"?"bg-white text-gray-800 shadow-sm":"text-gray-500"}`,children:"ARS"}),u.jsx("button",{onClick:()=>s({...t,[r.id]:"USD"}),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors duration-200 ${o==="USD"?"bg-white text-gray-800 shadow-sm":"text-gray-500"}`,children:"USD"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Valor Actual"}),u.jsx("p",{className:"text-xl font-bold text-gray-800",children:c(r.valorActualArs,r.valorActualUsd)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Rendimiento"}),a()]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Cantidad de Activos"}),u.jsx("p",{className:"text-lg font-medium text-gray-700",children:r.cantidadActivos})]})]}),u.jsx("div",{className:"mt-6 flex justify-end",children:u.jsx("button",{onClick:()=>e("portfolio-detail",r.id,o),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-150",children:"Ver detalles del porfolio"})})]},r.id)};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function jo(r){return r+.5|0}const Ir=(r,e,t)=>Math.max(Math.min(r,t),e);function io(r){return Ir(jo(r*2.55),0,255)}function zr(r){return Ir(jo(r*255),0,255)}function ur(r){return Ir(jo(r/2.55)/100,0,1)}function om(r){return Ir(jo(r*100),0,100)}const mn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ru=[..."0123456789ABCDEF"],vv=r=>Ru[r&15],wv=r=>Ru[(r&240)>>4]+Ru[r&15],za=r=>(r&240)>>4===(r&15),bv=r=>za(r.r)&&za(r.g)&&za(r.b)&&za(r.a);function _v(r){var e=r.length,t;return r[0]==="#"&&(e===4||e===5?t={r:255&mn[r[1]]*17,g:255&mn[r[2]]*17,b:255&mn[r[3]]*17,a:e===5?mn[r[4]]*17:255}:(e===7||e===9)&&(t={r:mn[r[1]]<<4|mn[r[2]],g:mn[r[3]]<<4|mn[r[4]],b:mn[r[5]]<<4|mn[r[6]],a:e===9?mn[r[7]]<<4|mn[r[8]]:255})),t}const kv=(r,e)=>r<255?e(r):"";function jv(r){var e=bv(r)?vv:wv;return r?"#"+e(r.r)+e(r.g)+e(r.b)+kv(r.a,e):void 0}const Sv=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Dp(r,e,t){const s=e*Math.min(t,1-t),o=(a,c=(a+r/30)%12)=>t-s*Math.max(Math.min(c-3,9-c,1),-1);return[o(0),o(8),o(4)]}function Nv(r,e,t){const s=(o,a=(o+r/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[s(5),s(3),s(1)]}function Cv(r,e,t){const s=Dp(r,1,.5);let o;for(e+t>1&&(o=1/(e+t),e*=o,t*=o),o=0;o<3;o++)s[o]*=1-e-t,s[o]+=e;return s}function Ev(r,e,t,s,o){return r===o?(e-t)/s+(e<t?6:0):e===o?(t-r)/s+2:(r-e)/s+4}function qu(r){const t=r.r/255,s=r.g/255,o=r.b/255,a=Math.max(t,s,o),c=Math.min(t,s,o),d=(a+c)/2;let f,p,x;return a!==c&&(x=a-c,p=d>.5?x/(2-a-c):x/(a+c),f=Ev(t,s,o,x,a),f=f*60+.5),[f|0,p||0,d]}function Ku(r,e,t,s){return(Array.isArray(e)?r(e[0],e[1],e[2]):r(e,t,s)).map(zr)}function Gu(r,e,t){return Ku(Dp,r,e,t)}function Av(r,e,t){return Ku(Cv,r,e,t)}function Tv(r,e,t){return Ku(Nv,r,e,t)}function Rp(r){return(r%360+360)%360}function Pv(r){const e=Sv.exec(r);let t=255,s;if(!e)return;e[5]!==s&&(t=e[6]?io(+e[5]):zr(+e[5]));const o=Rp(+e[2]),a=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?s=Av(o,a,c):e[1]==="hsv"?s=Tv(o,a,c):s=Gu(o,a,c),{r:s[0],g:s[1],b:s[2],a:t}}function Dv(r,e){var t=qu(r);t[0]=Rp(t[0]+e),t=Gu(t),r.r=t[0],r.g=t[1],r.b=t[2]}function Rv(r){if(!r)return;const e=qu(r),t=e[0],s=om(e[1]),o=om(e[2]);return r.a<255?`hsla(${t}, ${s}%, ${o}%, ${ur(r.a)})`:`hsl(${t}, ${s}%, ${o}%)`}const am={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Lv(){const r={},e=Object.keys(lm),t=Object.keys(am);let s,o,a,c,d;for(s=0;s<e.length;s++){for(c=d=e[s],o=0;o<t.length;o++)a=t[o],d=d.replace(a,am[a]);a=parseInt(lm[c],16),r[d]=[a>>16&255,a>>8&255,a&255]}return r}let $a;function Ov(r){$a||($a=Lv(),$a.transparent=[0,0,0,0]);const e=$a[r.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Mv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Iv(r){const e=Mv.exec(r);let t=255,s,o,a;if(e){if(e[7]!==s){const c=+e[7];t=e[8]?io(c):Ir(c*255,0,255)}return s=+e[1],o=+e[3],a=+e[5],s=255&(e[2]?io(s):Ir(s,0,255)),o=255&(e[4]?io(o):Ir(o,0,255)),a=255&(e[6]?io(a):Ir(a,0,255)),{r:s,g:o,b:a,a:t}}}function Fv(r){return r&&(r.a<255?`rgba(${r.r}, ${r.g}, ${r.b}, ${ur(r.a)})`:`rgb(${r.r}, ${r.g}, ${r.b})`)}const fu=r=>r<=.0031308?r*12.92:Math.pow(r,1/2.4)*1.055-.055,ei=r=>r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4);function zv(r,e,t){const s=ei(ur(r.r)),o=ei(ur(r.g)),a=ei(ur(r.b));return{r:zr(fu(s+t*(ei(ur(e.r))-s))),g:zr(fu(o+t*(ei(ur(e.g))-o))),b:zr(fu(a+t*(ei(ur(e.b))-a))),a:r.a+t*(e.a-r.a)}}function Ua(r,e,t){if(r){let s=qu(r);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=Gu(s),r.r=s[0],r.g=s[1],r.b=s[2]}}function Lp(r,e){return r&&Object.assign(e||{},r)}function cm(r){var e={r:0,g:0,b:0,a:255};return Array.isArray(r)?r.length>=3&&(e={r:r[0],g:r[1],b:r[2],a:255},r.length>3&&(e.a=zr(r[3]))):(e=Lp(r,{r:0,g:0,b:0,a:1}),e.a=zr(e.a)),e}function $v(r){return r.charAt(0)==="r"?Iv(r):Pv(r)}class yo{constructor(e){if(e instanceof yo)return e;const t=typeof e;let s;t==="object"?s=cm(e):t==="string"&&(s=_v(e)||Ov(e)||$v(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Lp(this._rgb);return e&&(e.a=ur(e.a)),e}set rgb(e){this._rgb=cm(e)}rgbString(){return this._valid?Fv(this._rgb):void 0}hexString(){return this._valid?jv(this._rgb):void 0}hslString(){return this._valid?Rv(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,o=e.rgb;let a;const c=t===a?.5:t,d=2*c-1,f=s.a-o.a,p=((d*f===-1?d:(d+f)/(1+d*f))+1)/2;a=1-p,s.r=255&p*s.r+a*o.r+.5,s.g=255&p*s.g+a*o.g+.5,s.b=255&p*s.b+a*o.b+.5,s.a=c*s.a+(1-c)*o.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=zv(this._rgb,e._rgb,t)),this}clone(){return new yo(this.rgb)}alpha(e){return this._rgb.a=zr(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=jo(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ua(this._rgb,2,e),this}darken(e){return Ua(this._rgb,2,-e),this}saturate(e){return Ua(this._rgb,1,e),this}desaturate(e){return Ua(this._rgb,1,-e),this}rotate(e){return Dv(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ir(){}const Uv=(()=>{let r=0;return()=>r++})();function Mt(r){return r==null}function Pt(r){if(Array.isArray&&Array.isArray(r))return!0;const e=Object.prototype.toString.call(r);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ge(r){return r!==null&&Object.prototype.toString.call(r)==="[object Object]"}function dr(r){return(typeof r=="number"||r instanceof Number)&&isFinite(+r)}function On(r,e){return dr(r)?r:e}function Ye(r,e){return typeof r>"u"?e:r}const Bv=(r,e)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100:+r/e,Op=(r,e)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100*e:+r;function rt(r,e,t){if(r&&typeof r.call=="function")return r.apply(t,e)}function Xe(r,e,t,s){let o,a,c;if(Pt(r))for(a=r.length,o=0;o<a;o++)e.call(t,r[o],o);else if(Ge(r))for(c=Object.keys(r),a=c.length,o=0;o<a;o++)e.call(t,r[c[o]],c[o])}function nl(r,e){let t,s,o,a;if(!r||!e||r.length!==e.length)return!1;for(t=0,s=r.length;t<s;++t)if(o=r[t],a=e[t],o.datasetIndex!==a.datasetIndex||o.index!==a.index)return!1;return!0}function rl(r){if(Pt(r))return r.map(rl);if(Ge(r)){const e=Object.create(null),t=Object.keys(r),s=t.length;let o=0;for(;o<s;++o)e[t[o]]=rl(r[t[o]]);return e}return r}function Mp(r){return["__proto__","prototype","constructor"].indexOf(r)===-1}function Wv(r,e,t,s){if(!Mp(r))return;const o=e[r],a=t[r];Ge(o)&&Ge(a)?vo(o,a,s):e[r]=rl(a)}function vo(r,e,t){const s=Pt(e)?e:[e],o=s.length;if(!Ge(r))return r;t=t||{};const a=t.merger||Wv;let c;for(let d=0;d<o;++d){if(c=s[d],!Ge(c))continue;const f=Object.keys(c);for(let p=0,x=f.length;p<x;++p)a(f[p],r,c,t)}return r}function fo(r,e){return vo(r,e,{merger:Hv})}function Hv(r,e,t){if(!Mp(r))return;const s=e[r],o=t[r];Ge(s)&&Ge(o)?fo(s,o):Object.prototype.hasOwnProperty.call(e,r)||(e[r]=rl(o))}const um={"":r=>r,x:r=>r.x,y:r=>r.y};function Vv(r){const e=r.split("."),t=[];let s="";for(const o of e)s+=o,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function qv(r){const e=Vv(r);return t=>{for(const s of e){if(s==="")break;t=t&&t[s]}return t}}function wo(r,e){return(um[e]||(um[e]=qv(e)))(r)}function Xu(r){return r.charAt(0).toUpperCase()+r.slice(1)}const sl=r=>typeof r<"u",$r=r=>typeof r=="function",dm=(r,e)=>{if(r.size!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0};function Kv(r){return r.type==="mouseup"||r.type==="click"||r.type==="contextmenu"}const st=Math.PI,gt=2*st,il=Number.POSITIVE_INFINITY,Gv=st/180,kt=st/2,os=st/4,hm=st*2/3,fm=Math.sign;function Xv(r){const e=[],t=Math.sqrt(r);let s;for(s=1;s<t;s++)r%s===0&&(e.push(s),e.push(r/s));return t===(t|0)&&e.push(t),e.sort((o,a)=>o-a).pop(),e}function Yv(r){return typeof r=="symbol"||typeof r=="object"&&r!==null&&!(Symbol.toPrimitive in r||"toString"in r||"valueOf"in r)}function ol(r){return!Yv(r)&&!isNaN(parseFloat(r))&&isFinite(r)}function hs(r){return r*(st/180)}function Qv(r){return r*(180/st)}function Ip(r,e){const t=e.x-r.x,s=e.y-r.y,o=Math.sqrt(t*t+s*s);let a=Math.atan2(s,t);return a<-.5*st&&(a+=gt),{angle:a,distance:o}}function Jv(r,e){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function zn(r){return(r%gt+gt)%gt}function al(r,e,t,s){const o=zn(r),a=zn(e),c=zn(t),d=zn(a-o),f=zn(c-o),p=zn(o-a),x=zn(o-c);return o===a||o===c||s&&a===c||d>f&&p<x}function gn(r,e,t){return Math.max(e,Math.min(t,r))}function Zv(r){return gn(r,-32768,32767)}function oo(r,e,t,s=1e-6){return r>=Math.min(e,t)-s&&r<=Math.max(e,t)+s}function Yu(r,e,t){t=t||(c=>r[c]<e);let s=r.length-1,o=0,a;for(;s-o>1;)a=o+s>>1,t(a)?o=a:s=a;return{lo:o,hi:s}}const Lu=(r,e,t,s)=>Yu(r,t,s?o=>{const a=r[o][e];return a<t||a===t&&r[o+1][e]===t}:o=>r[o][e]<t),ew=(r,e,t)=>Yu(r,t,s=>r[s][e]>=t);function tw(r,e,t){let s=0,o=r.length;for(;s<o&&r[s]<e;)s++;for(;o>s&&r[o-1]>t;)o--;return s>0||o<r.length?r.slice(s,o):r}const Fp=["push","pop","shift","splice","unshift"];function nw(r,e){if(r._chartjs){r._chartjs.listeners.push(e);return}Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Fp.forEach(t=>{const s="_onData"+Xu(t),o=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...a){const c=o.apply(this,a);return r._chartjs.listeners.forEach(d=>{typeof d[s]=="function"&&d[s](...a)}),c}})})}function mm(r,e){const t=r._chartjs;if(!t)return;const s=t.listeners,o=s.indexOf(e);o!==-1&&s.splice(o,1),!(s.length>0)&&(Fp.forEach(a=>{delete r[a]}),delete r._chartjs)}function rw(r){const e=new Set(r);return e.size===r.length?r:Array.from(e)}const zp=(function(){return typeof window>"u"?function(r){return r()}:window.requestAnimationFrame})();function $p(r,e){let t=[],s=!1;return function(...o){t=o,s||(s=!0,zp.call(window,()=>{s=!1,r.apply(e,t)}))}}function sw(r,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(r,e,s)):r.apply(this,s),e}}const Up=r=>r==="start"?"left":r==="end"?"right":"center",rn=(r,e,t)=>r==="start"?e:r==="end"?t:(e+t)/2,iw=(r,e,t,s)=>r===(s?"left":"right")?t:r==="center"?(e+t)/2:e,Ba=r=>r===0||r===1,pm=(r,e,t)=>-(Math.pow(2,10*(r-=1))*Math.sin((r-e)*gt/t)),gm=(r,e,t)=>Math.pow(2,-10*r)*Math.sin((r-e)*gt/t)+1,mo={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>-r*(r-2),easeInOutQuad:r=>(r/=.5)<1?.5*r*r:-.5*(--r*(r-2)-1),easeInCubic:r=>r*r*r,easeOutCubic:r=>(r-=1)*r*r+1,easeInOutCubic:r=>(r/=.5)<1?.5*r*r*r:.5*((r-=2)*r*r+2),easeInQuart:r=>r*r*r*r,easeOutQuart:r=>-((r-=1)*r*r*r-1),easeInOutQuart:r=>(r/=.5)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2),easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>(r-=1)*r*r*r*r+1,easeInOutQuint:r=>(r/=.5)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2),easeInSine:r=>-Math.cos(r*kt)+1,easeOutSine:r=>Math.sin(r*kt),easeInOutSine:r=>-.5*(Math.cos(st*r)-1),easeInExpo:r=>r===0?0:Math.pow(2,10*(r-1)),easeOutExpo:r=>r===1?1:-Math.pow(2,-10*r)+1,easeInOutExpo:r=>Ba(r)?r:r<.5?.5*Math.pow(2,10*(r*2-1)):.5*(-Math.pow(2,-10*(r*2-1))+2),easeInCirc:r=>r>=1?r:-(Math.sqrt(1-r*r)-1),easeOutCirc:r=>Math.sqrt(1-(r-=1)*r),easeInOutCirc:r=>(r/=.5)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1),easeInElastic:r=>Ba(r)?r:pm(r,.075,.3),easeOutElastic:r=>Ba(r)?r:gm(r,.075,.3),easeInOutElastic(r){return Ba(r)?r:r<.5?.5*pm(r*2,.1125,.45):.5+.5*gm(r*2-1,.1125,.45)},easeInBack(r){return r*r*((1.70158+1)*r-1.70158)},easeOutBack(r){return(r-=1)*r*((1.70158+1)*r+1.70158)+1},easeInOutBack(r){let e=1.70158;return(r/=.5)<1?.5*(r*r*(((e*=1.525)+1)*r-e)):.5*((r-=2)*r*(((e*=1.525)+1)*r+e)+2)},easeInBounce:r=>1-mo.easeOutBounce(1-r),easeOutBounce(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},easeInOutBounce:r=>r<.5?mo.easeInBounce(r*2)*.5:mo.easeOutBounce(r*2-1)*.5+.5};function Bp(r){if(r&&typeof r=="object"){const e=r.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function xm(r){return Bp(r)?r:new yo(r)}function mu(r){return Bp(r)?r:new yo(r).saturate(.5).darken(.1).hexString()}const ow=["x","y","borderWidth","radius","tension"],aw=["color","borderColor","backgroundColor"];function lw(r){r.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),r.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),r.set("animations",{colors:{type:"color",properties:aw},numbers:{type:"number",properties:ow}}),r.describe("animations",{_fallback:"animation"}),r.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function cw(r){r.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ym=new Map;function uw(r,e){e=e||{};const t=r+JSON.stringify(e);let s=ym.get(t);return s||(s=new Intl.NumberFormat(r,e),ym.set(t,s)),s}function dw(r,e,t){return uw(e,t).format(r)}const hw={values(r){return Pt(r)?r:""+r}};var fw={formatters:hw};function mw(r){r.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),r.route("scale.ticks","color","","color"),r.route("scale.grid","color","","borderColor"),r.route("scale.border","color","","borderColor"),r.route("scale.title","color","","color"),r.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),r.describe("scales",{_fallback:"scale"}),r.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ms=Object.create(null),Ou=Object.create(null);function po(r,e){if(!e)return r;const t=e.split(".");for(let s=0,o=t.length;s<o;++s){const a=t[s];r=r[a]||(r[a]=Object.create(null))}return r}function pu(r,e,t){return typeof e=="string"?vo(po(r,e),t):vo(po(r,""),e)}class pw{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,o)=>mu(o.backgroundColor),this.hoverBorderColor=(s,o)=>mu(o.borderColor),this.hoverColor=(s,o)=>mu(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return pu(this,e,t)}get(e){return po(this,e)}describe(e,t){return pu(Ou,e,t)}override(e,t){return pu(ms,e,t)}route(e,t,s,o){const a=po(this,e),c=po(this,s),d="_"+t;Object.defineProperties(a,{[d]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const f=this[d],p=c[o];return Ge(f)?Object.assign({},p,f):Ye(f,p)},set(f){this[d]=f}}})}apply(e){e.forEach(t=>t(this))}}var ft=new pw({_scriptable:r=>!r.startsWith("on"),_indexable:r=>r!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[lw,cw,mw]);function gw(r){return!r||Mt(r.size)||Mt(r.family)?null:(r.style?r.style+" ":"")+(r.weight?r.weight+" ":"")+r.size+"px "+r.family}function vm(r,e,t,s,o){let a=e[o];return a||(a=e[o]=r.measureText(o).width,t.push(o)),a>s&&(s=a),s}function as(r,e,t){const s=r.currentDevicePixelRatio,o=t!==0?Math.max(t/2,.5):0;return Math.round((e-o)*s)/s+o}function wm(r,e){!e&&!r||(e=e||r.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,r.width,r.height),e.restore())}function bm(r,e,t,s){Wp(r,e,t,s,null)}function Wp(r,e,t,s,o){let a,c,d,f,p,x,y,v;const b=e.pointStyle,_=e.rotation,j=e.radius;let k=(_||0)*Gv;if(b&&typeof b=="object"&&(a=b.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){r.save(),r.translate(t,s),r.rotate(k),r.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),r.restore();return}if(!(isNaN(j)||j<=0)){switch(r.beginPath(),b){default:o?r.ellipse(t,s,o/2,j,0,0,gt):r.arc(t,s,j,0,gt),r.closePath();break;case"triangle":x=o?o/2:j,r.moveTo(t+Math.sin(k)*x,s-Math.cos(k)*j),k+=hm,r.lineTo(t+Math.sin(k)*x,s-Math.cos(k)*j),k+=hm,r.lineTo(t+Math.sin(k)*x,s-Math.cos(k)*j),r.closePath();break;case"rectRounded":p=j*.516,f=j-p,c=Math.cos(k+os)*f,y=Math.cos(k+os)*(o?o/2-p:f),d=Math.sin(k+os)*f,v=Math.sin(k+os)*(o?o/2-p:f),r.arc(t-y,s-d,p,k-st,k-kt),r.arc(t+v,s-c,p,k-kt,k),r.arc(t+y,s+d,p,k,k+kt),r.arc(t-v,s+c,p,k+kt,k+st),r.closePath();break;case"rect":if(!_){f=Math.SQRT1_2*j,x=o?o/2:f,r.rect(t-x,s-f,2*x,2*f);break}k+=os;case"rectRot":y=Math.cos(k)*(o?o/2:j),c=Math.cos(k)*j,d=Math.sin(k)*j,v=Math.sin(k)*(o?o/2:j),r.moveTo(t-y,s-d),r.lineTo(t+v,s-c),r.lineTo(t+y,s+d),r.lineTo(t-v,s+c),r.closePath();break;case"crossRot":k+=os;case"cross":y=Math.cos(k)*(o?o/2:j),c=Math.cos(k)*j,d=Math.sin(k)*j,v=Math.sin(k)*(o?o/2:j),r.moveTo(t-y,s-d),r.lineTo(t+y,s+d),r.moveTo(t+v,s-c),r.lineTo(t-v,s+c);break;case"star":y=Math.cos(k)*(o?o/2:j),c=Math.cos(k)*j,d=Math.sin(k)*j,v=Math.sin(k)*(o?o/2:j),r.moveTo(t-y,s-d),r.lineTo(t+y,s+d),r.moveTo(t+v,s-c),r.lineTo(t-v,s+c),k+=os,y=Math.cos(k)*(o?o/2:j),c=Math.cos(k)*j,d=Math.sin(k)*j,v=Math.sin(k)*(o?o/2:j),r.moveTo(t-y,s-d),r.lineTo(t+y,s+d),r.moveTo(t+v,s-c),r.lineTo(t-v,s+c);break;case"line":c=o?o/2:Math.cos(k)*j,d=Math.sin(k)*j,r.moveTo(t-c,s-d),r.lineTo(t+c,s+d);break;case"dash":r.moveTo(t,s),r.lineTo(t+Math.cos(k)*(o?o/2:j),s+Math.sin(k)*j);break;case!1:r.closePath();break}r.fill(),e.borderWidth>0&&r.stroke()}}function Hp(r,e,t){return t=t||.5,!e||r&&r.x>e.left-t&&r.x<e.right+t&&r.y>e.top-t&&r.y<e.bottom+t}function Qu(r,e){r.save(),r.beginPath(),r.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),r.clip()}function Ju(r){r.restore()}function xw(r,e){e.translation&&r.translate(e.translation[0],e.translation[1]),Mt(e.rotation)||r.rotate(e.rotation),e.color&&(r.fillStyle=e.color),e.textAlign&&(r.textAlign=e.textAlign),e.textBaseline&&(r.textBaseline=e.textBaseline)}function yw(r,e,t,s,o){if(o.strikethrough||o.underline){const a=r.measureText(s),c=e-a.actualBoundingBoxLeft,d=e+a.actualBoundingBoxRight,f=t-a.actualBoundingBoxAscent,p=t+a.actualBoundingBoxDescent,x=o.strikethrough?(f+p)/2:p;r.strokeStyle=r.fillStyle,r.beginPath(),r.lineWidth=o.decorationWidth||2,r.moveTo(c,x),r.lineTo(d,x),r.stroke()}}function vw(r,e){const t=r.fillStyle;r.fillStyle=e.color,r.fillRect(e.left,e.top,e.width,e.height),r.fillStyle=t}function ll(r,e,t,s,o,a={}){const c=Pt(e)?e:[e],d=a.strokeWidth>0&&a.strokeColor!=="";let f,p;for(r.save(),r.font=o.string,xw(r,a),f=0;f<c.length;++f)p=c[f],a.backdrop&&vw(r,a.backdrop),d&&(a.strokeColor&&(r.strokeStyle=a.strokeColor),Mt(a.strokeWidth)||(r.lineWidth=a.strokeWidth),r.strokeText(p,t,s,a.maxWidth)),r.fillText(p,t,s,a.maxWidth),yw(r,t,s,p,a),s+=Number(o.lineHeight);r.restore()}function Mu(r,e){const{x:t,y:s,w:o,h:a,radius:c}=e;r.arc(t+c.topLeft,s+c.topLeft,c.topLeft,1.5*st,st,!0),r.lineTo(t,s+a-c.bottomLeft),r.arc(t+c.bottomLeft,s+a-c.bottomLeft,c.bottomLeft,st,kt,!0),r.lineTo(t+o-c.bottomRight,s+a),r.arc(t+o-c.bottomRight,s+a-c.bottomRight,c.bottomRight,kt,0,!0),r.lineTo(t+o,s+c.topRight),r.arc(t+o-c.topRight,s+c.topRight,c.topRight,0,-kt,!0),r.lineTo(t+c.topLeft,s)}const ww=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,bw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _w(r,e){const t=(""+r).match(ww);if(!t||t[1]==="normal")return e*1.2;switch(r=+t[2],t[3]){case"px":return r;case"%":r/=100;break}return e*r}const kw=r=>+r||0;function Zu(r,e){const t={},s=Ge(e),o=s?Object.keys(e):e,a=Ge(r)?s?c=>Ye(r[c],r[e[c]]):c=>r[c]:()=>r;for(const c of o)t[c]=kw(a(c));return t}function jw(r){return Zu(r,{top:"y",right:"x",bottom:"y",left:"x"})}function go(r){return Zu(r,["topLeft","topRight","bottomLeft","bottomRight"])}function Nn(r){const e=jw(r);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Qt(r,e){r=r||{},e=e||ft.font;let t=Ye(r.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=Ye(r.style,e.style);s&&!(""+s).match(bw)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const o={family:Ye(r.family,e.family),lineHeight:_w(Ye(r.lineHeight,e.lineHeight),t),size:t,style:s,weight:Ye(r.weight,e.weight),string:""};return o.string=gw(o),o}function Wa(r,e,t,s){let o,a,c;for(o=0,a=r.length;o<a;++o)if(c=r[o],c!==void 0&&c!==void 0)return c}function Sw(r,e,t){const{min:s,max:o}=r,a=Op(e,(o-s)/2),c=(d,f)=>t&&d===0?0:d+f;return{min:c(s,-Math.abs(a)),max:c(o,a)}}function li(r,e){return Object.assign(Object.create(r),e)}function ed(r,e=[""],t,s,o=()=>r[0]){const a=t||r;typeof s>"u"&&(s=Gp("_fallback",r));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:r,_rootScopes:a,_fallback:s,_getTarget:o,override:d=>ed([d,...r],e,a,s)};return new Proxy(c,{deleteProperty(d,f){return delete d[f],delete d._keys,delete r[0][f],!0},get(d,f){return qp(d,f,()=>Rw(f,e,r,d))},getOwnPropertyDescriptor(d,f){return Reflect.getOwnPropertyDescriptor(d._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(r[0])},has(d,f){return km(d).includes(f)},ownKeys(d){return km(d)},set(d,f,p){const x=d._storage||(d._storage=o());return d[f]=x[f]=p,delete d._keys,!0}})}function oi(r,e,t,s){const o={_cacheable:!1,_proxy:r,_context:e,_subProxy:t,_stack:new Set,_descriptors:Vp(r,s),setContext:a=>oi(r,a,t,s),override:a=>oi(r.override(a),e,t,s)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete r[c],!0},get(a,c,d){return qp(a,c,()=>Cw(a,c,d))},getOwnPropertyDescriptor(a,c){return a._descriptors.allKeys?Reflect.has(r,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(r,c)},getPrototypeOf(){return Reflect.getPrototypeOf(r)},has(a,c){return Reflect.has(r,c)},ownKeys(){return Reflect.ownKeys(r)},set(a,c,d){return r[c]=d,delete a[c],!0}})}function Vp(r,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:o=e.allKeys}=r;return{allKeys:o,scriptable:t,indexable:s,isScriptable:$r(t)?t:()=>t,isIndexable:$r(s)?s:()=>s}}const Nw=(r,e)=>r?r+Xu(e):e,td=(r,e)=>Ge(e)&&r!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function qp(r,e,t){if(Object.prototype.hasOwnProperty.call(r,e)||e==="constructor")return r[e];const s=t();return r[e]=s,s}function Cw(r,e,t){const{_proxy:s,_context:o,_subProxy:a,_descriptors:c}=r;let d=s[e];return $r(d)&&c.isScriptable(e)&&(d=Ew(e,d,r,t)),Pt(d)&&d.length&&(d=Aw(e,d,r,c.isIndexable)),td(e,d)&&(d=oi(d,o,a&&a[e],c)),d}function Ew(r,e,t,s){const{_proxy:o,_context:a,_subProxy:c,_stack:d}=t;if(d.has(r))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+r);d.add(r);let f=e(a,c||s);return d.delete(r),td(r,f)&&(f=nd(o._scopes,o,r,f)),f}function Aw(r,e,t,s){const{_proxy:o,_context:a,_subProxy:c,_descriptors:d}=t;if(typeof a.index<"u"&&s(r))return e[a.index%e.length];if(Ge(e[0])){const f=e,p=o._scopes.filter(x=>x!==f);e=[];for(const x of f){const y=nd(p,o,r,x);e.push(oi(y,a,c&&c[r],d))}}return e}function Kp(r,e,t){return $r(r)?r(e,t):r}const Tw=(r,e)=>r===!0?e:typeof r=="string"?wo(e,r):void 0;function Pw(r,e,t,s,o){for(const a of e){const c=Tw(t,a);if(c){r.add(c);const d=Kp(c._fallback,t,o);if(typeof d<"u"&&d!==t&&d!==s)return d}else if(c===!1&&typeof s<"u"&&t!==s)return null}return!1}function nd(r,e,t,s){const o=e._rootScopes,a=Kp(e._fallback,t,s),c=[...r,...o],d=new Set;d.add(s);let f=_m(d,c,t,a||t,s);return f===null||typeof a<"u"&&a!==t&&(f=_m(d,c,a,f,s),f===null)?!1:ed(Array.from(d),[""],o,a,()=>Dw(e,t,s))}function _m(r,e,t,s,o){for(;t;)t=Pw(r,e,t,s,o);return t}function Dw(r,e,t){const s=r._getTarget();e in s||(s[e]={});const o=s[e];return Pt(o)&&Ge(t)?t:o||{}}function Rw(r,e,t,s){let o;for(const a of e)if(o=Gp(Nw(a,r),t),typeof o<"u")return td(r,o)?nd(t,s,r,o):o}function Gp(r,e){for(const t of e){if(!t)continue;const s=t[r];if(typeof s<"u")return s}}function km(r){let e=r._keys;return e||(e=r._keys=Lw(r._scopes)),e}function Lw(r){const e=new Set;for(const t of r)for(const s of Object.keys(t).filter(o=>!o.startsWith("_")))e.add(s);return Array.from(e)}function rd(){return typeof window<"u"&&typeof document<"u"}function sd(r){let e=r.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function cl(r,e,t){let s;return typeof r=="string"?(s=parseInt(r,10),r.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=r,s}const fl=r=>r.ownerDocument.defaultView.getComputedStyle(r,null);function Ow(r,e){return fl(r).getPropertyValue(e)}const Mw=["top","right","bottom","left"];function fs(r,e,t){const s={};t=t?"-"+t:"";for(let o=0;o<4;o++){const a=Mw[o];s[a]=parseFloat(r[e+"-"+a+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Iw=(r,e,t)=>(r>0||e>0)&&(!t||!t.shadowRoot);function Fw(r,e){const t=r.touches,s=t&&t.length?t[0]:r,{offsetX:o,offsetY:a}=s;let c=!1,d,f;if(Iw(o,a,r.target))d=o,f=a;else{const p=e.getBoundingClientRect();d=s.clientX-p.left,f=s.clientY-p.top,c=!0}return{x:d,y:f,box:c}}function us(r,e){if("native"in r)return r;const{canvas:t,currentDevicePixelRatio:s}=e,o=fl(t),a=o.boxSizing==="border-box",c=fs(o,"padding"),d=fs(o,"border","width"),{x:f,y:p,box:x}=Fw(r,t),y=c.left+(x&&d.left),v=c.top+(x&&d.top);let{width:b,height:_}=e;return a&&(b-=c.width+d.width,_-=c.height+d.height),{x:Math.round((f-y)/b*t.width/s),y:Math.round((p-v)/_*t.height/s)}}function zw(r,e,t){let s,o;if(e===void 0||t===void 0){const a=r&&sd(r);if(!a)e=r.clientWidth,t=r.clientHeight;else{const c=a.getBoundingClientRect(),d=fl(a),f=fs(d,"border","width"),p=fs(d,"padding");e=c.width-p.width-f.width,t=c.height-p.height-f.height,s=cl(d.maxWidth,a,"clientWidth"),o=cl(d.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:s||il,maxHeight:o||il}}const Ha=r=>Math.round(r*10)/10;function $w(r,e,t,s){const o=fl(r),a=fs(o,"margin"),c=cl(o.maxWidth,r,"clientWidth")||il,d=cl(o.maxHeight,r,"clientHeight")||il,f=zw(r,e,t);let{width:p,height:x}=f;if(o.boxSizing==="content-box"){const v=fs(o,"border","width"),b=fs(o,"padding");p-=b.width+v.width,x-=b.height+v.height}return p=Math.max(0,p-a.width),x=Math.max(0,s?p/s:x-a.height),p=Ha(Math.min(p,c,f.maxWidth)),x=Ha(Math.min(x,d,f.maxHeight)),p&&!x&&(x=Ha(p/2)),(e!==void 0||t!==void 0)&&s&&f.height&&x>f.height&&(x=f.height,p=Ha(Math.floor(x*s))),{width:p,height:x}}function jm(r,e,t){const s=e||1,o=Math.floor(r.height*s),a=Math.floor(r.width*s);r.height=Math.floor(r.height),r.width=Math.floor(r.width);const c=r.canvas;return c.style&&(t||!c.style.height&&!c.style.width)&&(c.style.height=`${r.height}px`,c.style.width=`${r.width}px`),r.currentDevicePixelRatio!==s||c.height!==o||c.width!==a?(r.currentDevicePixelRatio=s,c.height=o,c.width=a,r.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Uw=(function(){let r=!1;try{const e={get passive(){return r=!0,!1}};rd()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return r})();function Sm(r,e){const t=Ow(r,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const Bw=function(r,e){return{x(t){return r+r+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},Ww=function(){return{x(r){return r},setWidth(r){},textAlign(r){return r},xPlus(r,e){return r+e},leftForLtr(r,e){return r}}};function si(r,e,t){return r?Bw(e,t):Ww()}function Xp(r,e){let t,s;(e==="ltr"||e==="rtl")&&(t=r.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),r.prevTextDirection=s)}function Yp(r,e){e!==void 0&&(delete r.prevTextDirection,r.canvas.style.setProperty("direction",e[0],e[1]))}function Va(r,e,t){return r.options.clip?r[t]:e[t]}function Hw(r,e){const{xScale:t,yScale:s}=r;return t&&s?{left:Va(t,e,"left"),right:Va(t,e,"right"),top:Va(s,e,"top"),bottom:Va(s,e,"bottom")}:e}function Vw(r,e){const t=e._clip;if(t.disabled)return!1;const s=Hw(e,r.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?r.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?r.height:s.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class qw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,o){const a=t.listeners[o],c=t.duration;a.forEach(d=>d({chart:e,initial:t.initial,numSteps:c,currentStep:Math.min(s-t.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=zp.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,o)=>{if(!s.running||!s.items.length)return;const a=s.items;let c=a.length-1,d=!1,f;for(;c>=0;--c)f=a[c],f._active?(f._total>s.duration&&(s.duration=f._total),f.tick(e),d=!0):(a[c]=a[a.length-1],a.pop());d&&(o.draw(),this._notify(o,s,e,"progress")),a.length||(s.running=!1,this._notify(o,s,e,"complete"),s.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,o)=>Math.max(s,o._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let o=s.length-1;for(;o>=0;--o)s[o].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ar=new qw;const Nm="transparent",Kw={boolean(r,e,t){return t>.5?e:r},color(r,e,t){const s=xm(r||Nm),o=s.valid&&xm(e||Nm);return o&&o.valid?o.mix(s,t).hexString():e},number(r,e,t){return r+(e-r)*t}};class Gw{constructor(e,t,s,o){const a=t[s];o=Wa([e.to,o,a,e.from]);const c=Wa([e.from,a,o]);this._active=!0,this._fn=e.fn||Kw[e.type||typeof c],this._easing=mo[e.easing]||mo.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=c,this._to=o,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const o=this._target[this._prop],a=s-this._start,c=this._duration-a;this._start=s,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Wa([e.to,t,o,e.from]),this._from=Wa([e.from,o,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,o=this._prop,a=this._from,c=this._loop,d=this._to;let f;if(this._active=a!==d&&(c||t<s),!this._active){this._target[o]=d,this._notify(!0);return}if(t<0){this._target[o]=a;return}f=t/s%2,f=c&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[o]=this._fn(a,d,f)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let o=0;o<s.length;o++)s[o][t]()}}class Qp{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ge(e))return;const t=Object.keys(ft.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(o=>{const a=e[o];if(!Ge(a))return;const c={};for(const d of t)c[d]=a[d];(Pt(a.properties)&&a.properties||[o]).forEach(d=>{(d===o||!s.has(d))&&s.set(d,c)})})}_animateOptions(e,t){const s=t.options,o=Yw(e,s);if(!o)return[];const a=this._createAnimations(o,s);return s.$shared&&Xw(e.options.$animations,s).then(()=>{e.options=s},()=>{}),a}_createAnimations(e,t){const s=this._properties,o=[],a=e.$animations||(e.$animations={}),c=Object.keys(t),d=Date.now();let f;for(f=c.length-1;f>=0;--f){const p=c[f];if(p.charAt(0)==="$")continue;if(p==="options"){o.push(...this._animateOptions(e,t));continue}const x=t[p];let y=a[p];const v=s.get(p);if(y)if(v&&y.active()){y.update(v,x,d);continue}else y.cancel();if(!v||!v.duration){e[p]=x;continue}a[p]=y=new Gw(v,e,p,x),o.push(y)}return o}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const s=this._createAnimations(e,t);if(s.length)return ar.add(this._chart,s),!0}}function Xw(r,e){const t=[],s=Object.keys(e);for(let o=0;o<s.length;o++){const a=r[s[o]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function Yw(r,e){if(!e)return;let t=r.options;if(!t){r.options=e;return}return t.$shared&&(r.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Cm(r,e){const t=r&&r.options||{},s=t.reverse,o=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:s?a:o,end:s?o:a}}function Qw(r,e,t){if(t===!1)return!1;const s=Cm(r,t),o=Cm(e,t);return{top:o.end,right:s.end,bottom:o.start,left:s.start}}function Jw(r){let e,t,s,o;return Ge(r)?(e=r.top,t=r.right,s=r.bottom,o=r.left):e=t=s=o=r,{top:e,right:t,bottom:s,left:o,disabled:r===!1}}function Jp(r,e){const t=[],s=r._getSortedDatasetMetas(e);let o,a;for(o=0,a=s.length;o<a;++o)t.push(s[o].index);return t}function Em(r,e,t,s={}){const o=r.keys,a=s.mode==="single";let c,d,f,p;if(e===null)return;let x=!1;for(c=0,d=o.length;c<d;++c){if(f=+o[c],f===t){if(x=!0,s.all)continue;break}p=r.values[f],dr(p)&&(a||e===0||fm(e)===fm(p))&&(e+=p)}return!x&&!s.all?0:e}function Zw(r,e){const{iScale:t,vScale:s}=e,o=t.axis==="x"?"x":"y",a=s.axis==="x"?"x":"y",c=Object.keys(r),d=new Array(c.length);let f,p,x;for(f=0,p=c.length;f<p;++f)x=c[f],d[f]={[o]:x,[a]:r[x]};return d}function gu(r,e){const t=r&&r.options.stacked;return t||t===void 0&&e.stack!==void 0}function eb(r,e,t){return`${r.id}.${e.id}.${t.stack||t.type}`}function tb(r){const{min:e,max:t,minDefined:s,maxDefined:o}=r.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:o?t:Number.POSITIVE_INFINITY}}function nb(r,e,t){const s=r[e]||(r[e]={});return s[t]||(s[t]={})}function Am(r,e,t,s){for(const o of e.getMatchingVisibleMetas(s).reverse()){const a=r[o.index];if(t&&a>0||!t&&a<0)return o.index}return null}function Tm(r,e){const{chart:t,_cachedMeta:s}=r,o=t._stacks||(t._stacks={}),{iScale:a,vScale:c,index:d}=s,f=a.axis,p=c.axis,x=eb(a,c,s),y=e.length;let v;for(let b=0;b<y;++b){const _=e[b],{[f]:j,[p]:k}=_,D=_._stacks||(_._stacks={});v=D[p]=nb(o,x,j),v[d]=k,v._top=Am(v,c,!0,s.type),v._bottom=Am(v,c,!1,s.type);const P=v._visualValues||(v._visualValues={});P[d]=k}}function xu(r,e){const t=r.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function rb(r,e){return li(r,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function sb(r,e,t){return li(r,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ji(r,e){const t=r.controller.index,s=r.vScale&&r.vScale.axis;if(s){e=e||r._parsed;for(const o of e){const a=o._stacks;if(!a||a[s]===void 0||a[s][t]===void 0)return;delete a[s][t],a[s]._visualValues!==void 0&&a[s]._visualValues[t]!==void 0&&delete a[s]._visualValues[t]}}}const yu=r=>r==="reset"||r==="none",Pm=(r,e)=>e?r:Object.assign({},r),ib=(r,e,t)=>r&&!e.hidden&&e._stacked&&{keys:Jp(t,!0),values:null};class Zp{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=gu(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ji(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),o=(y,v,b,_)=>y==="x"?v:y==="r"?_:b,a=t.xAxisID=Ye(s.xAxisID,xu(e,"x")),c=t.yAxisID=Ye(s.yAxisID,xu(e,"y")),d=t.rAxisID=Ye(s.rAxisID,xu(e,"r")),f=t.indexAxis,p=t.iAxisID=o(f,a,c,d),x=t.vAxisID=o(f,c,a,d);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(c),t.rScale=this.getScaleForId(d),t.iScale=this.getScaleForId(p),t.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&mm(this._data,this),e._stacked&&Ji(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(Ge(t)){const o=this._cachedMeta;this._data=Zw(t,o)}else if(s!==t){if(s){mm(s,this);const o=this._cachedMeta;Ji(o),o._parsed=[]}t&&Object.isExtensible(t)&&nw(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let o=!1;this._dataCheck();const a=t._stacked;t._stacked=gu(t.vScale,t),t.stack!==s.stack&&(o=!0,Ji(t),t.stack=s.stack),this._resyncElements(e),(o||a!==t._stacked)&&(Tm(this,t._parsed),t._stacked=gu(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:o}=this,{iScale:a,_stacked:c}=s,d=a.axis;let f=e===0&&t===o.length?!0:s._sorted,p=e>0&&s._parsed[e-1],x,y,v;if(this._parsing===!1)s._parsed=o,s._sorted=!0,v=o;else{Pt(o[e])?v=this.parseArrayData(s,o,e,t):Ge(o[e])?v=this.parseObjectData(s,o,e,t):v=this.parsePrimitiveData(s,o,e,t);const b=()=>y[d]===null||p&&y[d]<p[d];for(x=0;x<t;++x)s._parsed[x+e]=y=v[x],f&&(b()&&(f=!1),p=y);s._sorted=f}c&&Tm(this,v)}parsePrimitiveData(e,t,s,o){const{iScale:a,vScale:c}=e,d=a.axis,f=c.axis,p=a.getLabels(),x=a===c,y=new Array(o);let v,b,_;for(v=0,b=o;v<b;++v)_=v+s,y[v]={[d]:x||a.parse(p[_],_),[f]:c.parse(t[_],_)};return y}parseArrayData(e,t,s,o){const{xScale:a,yScale:c}=e,d=new Array(o);let f,p,x,y;for(f=0,p=o;f<p;++f)x=f+s,y=t[x],d[f]={x:a.parse(y[0],x),y:c.parse(y[1],x)};return d}parseObjectData(e,t,s,o){const{xScale:a,yScale:c}=e,{xAxisKey:d="x",yAxisKey:f="y"}=this._parsing,p=new Array(o);let x,y,v,b;for(x=0,y=o;x<y;++x)v=x+s,b=t[v],p[x]={x:a.parse(wo(b,d),v),y:c.parse(wo(b,f),v)};return p}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const o=this.chart,a=this._cachedMeta,c=t[e.axis],d={keys:Jp(o,!0),values:t._stacks[e.axis]._visualValues};return Em(d,c,a.index,{mode:s})}updateRangeFromParsed(e,t,s,o){const a=s[t.axis];let c=a===null?NaN:a;const d=o&&s._stacks[t.axis];o&&d&&(o.values=d,c=Em(o,a,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,t){const s=this._cachedMeta,o=s._parsed,a=s._sorted&&e===s.iScale,c=o.length,d=this._getOtherScale(e),f=ib(t,s,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:y}=tb(d);let v,b;function _(){b=o[v];const j=b[d.axis];return!dr(b[e.axis])||x>j||y<j}for(v=0;v<c&&!(!_()&&(this.updateRangeFromParsed(p,e,b,f),a));++v);if(a){for(v=c-1;v>=0;--v)if(!_()){this.updateRangeFromParsed(p,e,b,f);break}}return p}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let o,a,c;for(o=0,a=t.length;o<a;++o)c=t[o][e.axis],dr(c)&&s.push(c);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,o=t.vScale,a=this.getParsed(e);return{label:s?""+s.getLabelForValue(a[s.axis]):"",value:o?""+o.getLabelForValue(a[o.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Jw(Ye(this.options.clip,Qw(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,o=s.data||[],a=t.chartArea,c=[],d=this._drawStart||0,f=this._drawCount||o.length-d,p=this.options.drawActiveElementsOnTop;let x;for(s.dataset&&s.dataset.draw(e,a,d,f),x=d;x<d+f;++x){const y=o[x];y.hidden||(y.active&&p?c.push(y):y.draw(e,a))}for(x=0;x<c.length;++x)c[x].draw(e,a)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const o=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];a=c.$context||(c.$context=sb(this.getContext(),e,c)),a.parsed=this.getParsed(e),a.raw=o.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=rb(this.chart.getContext(),this.index)),a.dataset=o,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=s,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const o=t==="active",a=this._cachedDataOpts,c=e+"-"+t,d=a[c],f=this.enableOptionSharing&&sl(s);if(d)return Pm(d,f);const p=this.chart.config,x=p.datasetElementScopeKeys(this._type,e),y=o?[`${e}Hover`,"hover",e,""]:[e,""],v=p.getOptionScopes(this.getDataset(),x),b=Object.keys(ft.elements[e]),_=()=>this.getContext(s,o,t),j=p.resolveNamedOptions(v,b,_,y);return j.$shared&&(j.$shared=f,a[c]=Object.freeze(Pm(j,f))),j}_resolveAnimations(e,t,s){const o=this.chart,a=this._cachedDataOpts,c=`animation-${t}`,d=a[c];if(d)return d;let f;if(o.options.animation!==!1){const x=this.chart.config,y=x.datasetAnimationScopeKeys(this._type,t),v=x.getOptionScopes(this.getDataset(),y);f=x.createResolver(v,this.getContext(e,s,t))}const p=new Qp(o,f&&f.animations);return f&&f._cacheable&&(a[c]=Object.freeze(p)),p}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||yu(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),o=this._sharedOptions,a=this.getSharedOptions(s),c=this.includeOptions(t,a)||a!==o;return this.updateSharedOptions(a,t,s),{sharedOptions:a,includeOptions:c}}updateElement(e,t,s,o){yu(o)?Object.assign(e,s):this._resolveAnimations(t,o).update(e,s)}updateSharedOptions(e,t,s){e&&!yu(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,o){e.active=o;const a=this.getStyle(t,o);this._resolveAnimations(t,s,o).update(e,{options:!o&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[d,f,p]of this._syncList)this[d](f,p);this._syncList=[];const o=s.length,a=t.length,c=Math.min(a,o);c&&this.parse(0,c),a>o?this._insertElements(o,a-o,e):a<o&&this._removeElements(a,o-a)}_insertElements(e,t,s=!0){const o=this._cachedMeta,a=o.data,c=e+t;let d;const f=p=>{for(p.length+=t,d=p.length-1;d>=c;d--)p[d]=p[d-t]};for(f(a),d=e;d<c;++d)a[d]=new this.dataElementType;this._parsing&&f(o._parsed),this.parse(e,t),s&&this.updateElements(a,e,t,"reset")}updateElements(e,t,s,o){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const o=s._parsed.splice(e,t);s._stacked&&Ji(s,o)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,o]=e;this[t](s,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ob(r,e,t){let s=1,o=1,a=0,c=0;if(e<gt){const d=r,f=d+e,p=Math.cos(d),x=Math.sin(d),y=Math.cos(f),v=Math.sin(f),b=(R,U,H)=>al(R,d,f,!0)?1:Math.max(U,U*t,H,H*t),_=(R,U,H)=>al(R,d,f,!0)?-1:Math.min(U,U*t,H,H*t),j=b(0,p,y),k=b(kt,x,v),D=_(st,p,y),P=_(st+kt,x,v);s=(j-D)/2,o=(k-P)/2,a=-(j+D)/2,c=-(k+P)/2}return{ratioX:s,ratioY:o,offsetX:a,offsetY:c}}class ab extends Zp{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:o}}=e.legend.options;return t.labels.map((a,c)=>{const f=e.getDatasetMeta(0).controller.getStyle(c);return{text:a,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:o,lineWidth:f.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(c),index:c}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=s;else{let a=f=>+s[f];if(Ge(s[e])){const{key:f="value"}=this._parsing;a=p=>+wo(s[p],f)}let c,d;for(c=e,d=e+t;c<d;++c)o._parsed[c]=a(c)}}_getRotation(){return hs(this.options.rotation-90)}_getCircumference(){return hs(this.options.circumference)}_getRotationExtents(){let e=gt,t=-gt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const o=this.chart.getDatasetMeta(s).controller,a=o._getRotation(),c=o._getCircumference();e=Math.min(e,a),t=Math.max(t,a+c)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,o=this._cachedMeta,a=o.data,c=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,d=Math.max((Math.min(s.width,s.height)-c)/2,0),f=Math.min(Bv(this.options.cutout,d),1),p=this._getRingWeight(this.index),{circumference:x,rotation:y}=this._getRotationExtents(),{ratioX:v,ratioY:b,offsetX:_,offsetY:j}=ob(y,x,f),k=(s.width-c)/v,D=(s.height-c)/b,P=Math.max(Math.min(k,D)/2,0),R=Op(this.options.radius,P),U=Math.max(R*f,0),H=(R-U)/this._getVisibleDatasetWeightTotal();this.offsetX=_*R,this.offsetY=j*R,o.total=this.calculateTotal(),this.outerRadius=R-H*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-H*p,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const s=this.options,o=this._cachedMeta,a=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||o._parsed[e]===null||o.data[e].hidden?0:this.calculateCircumference(o._parsed[e]*a/gt)}updateElements(e,t,s,o){const a=o==="reset",c=this.chart,d=c.chartArea,p=c.options.animation,x=(d.left+d.right)/2,y=(d.top+d.bottom)/2,v=a&&p.animateScale,b=v?0:this.innerRadius,_=v?0:this.outerRadius,{sharedOptions:j,includeOptions:k}=this._getSharedOptions(t,o);let D=this._getRotation(),P;for(P=0;P<t;++P)D+=this._circumference(P,a);for(P=t;P<t+s;++P){const R=this._circumference(P,a),U=e[P],H={x:x+this.offsetX,y:y+this.offsetY,startAngle:D,endAngle:D+R,circumference:R,outerRadius:_,innerRadius:b};k&&(H.options=j||this.resolveDataElementOptions(P,U.active?"active":o)),D+=R,this.updateElement(U,P,H,o)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s=0,o;for(o=0;o<t.length;o++){const a=e._parsed[o];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(o)&&!t[o].hidden&&(s+=Math.abs(a))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?gt*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,o=s.data.labels||[],a=dw(t._parsed[e],s.options.locale);return{label:o[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const s=this.chart;let o,a,c,d,f;if(!e){for(o=0,a=s.data.datasets.length;o<a;++o)if(s.isDatasetVisible(o)){c=s.getDatasetMeta(o),e=c.data,d=c.controller;break}}if(!e)return 0;for(o=0,a=e.length;o<a;++o)f=d.resolveDataElementOptions(o),f.borderAlign!=="inner"&&(t=Math.max(t,f.borderWidth||0,f.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,o=e.length;s<o;++s){const a=this.resolveDataElementOptions(s);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(Ye(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function ls(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class id{static override(e){Object.assign(id.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ls()}parse(){return ls()}format(){return ls()}add(){return ls()}diff(){return ls()}startOf(){return ls()}endOf(){return ls()}}var lb={_date:id};function cb(r,e,t,s){const{controller:o,data:a,_sorted:c}=r,d=o._cachedMeta.iScale,f=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null;if(d&&e===d.axis&&e!=="r"&&c&&a.length){const p=d._reversePixels?ew:Lu;if(s){if(o._sharedOptions){const x=a[0],y=typeof x.getRange=="function"&&x.getRange(e);if(y){const v=p(a,e,t-y),b=p(a,e,t+y);return{lo:v.lo,hi:b.hi}}}}else{const x=p(a,e,t);if(f){const{vScale:y}=o._cachedMeta,{_parsed:v}=r,b=v.slice(0,x.lo+1).reverse().findIndex(j=>!Mt(j[y.axis]));x.lo-=Math.max(0,b);const _=v.slice(x.hi).findIndex(j=>!Mt(j[y.axis]));x.hi+=Math.max(0,_)}return x}}return{lo:0,hi:a.length-1}}function ml(r,e,t,s,o){const a=r.getSortedVisibleDatasetMetas(),c=t[e];for(let d=0,f=a.length;d<f;++d){const{index:p,data:x}=a[d],{lo:y,hi:v}=cb(a[d],e,c,o);for(let b=y;b<=v;++b){const _=x[b];_.skip||s(_,p,b)}}}function ub(r){const e=r.indexOf("x")!==-1,t=r.indexOf("y")!==-1;return function(s,o){const a=e?Math.abs(s.x-o.x):0,c=t?Math.abs(s.y-o.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(c,2))}}function vu(r,e,t,s,o){const a=[];return!o&&!r.isPointInArea(e)||ml(r,t,e,function(d,f,p){!o&&!Hp(d,r.chartArea,0)||d.inRange(e.x,e.y,s)&&a.push({element:d,datasetIndex:f,index:p})},!0),a}function db(r,e,t,s){let o=[];function a(c,d,f){const{startAngle:p,endAngle:x}=c.getProps(["startAngle","endAngle"],s),{angle:y}=Ip(c,{x:e.x,y:e.y});al(y,p,x)&&o.push({element:c,datasetIndex:d,index:f})}return ml(r,t,e,a),o}function hb(r,e,t,s,o,a){let c=[];const d=ub(t);let f=Number.POSITIVE_INFINITY;function p(x,y,v){const b=x.inRange(e.x,e.y,o);if(s&&!b)return;const _=x.getCenterPoint(o);if(!(!!a||r.isPointInArea(_))&&!b)return;const k=d(e,_);k<f?(c=[{element:x,datasetIndex:y,index:v}],f=k):k===f&&c.push({element:x,datasetIndex:y,index:v})}return ml(r,t,e,p),c}function wu(r,e,t,s,o,a){return!a&&!r.isPointInArea(e)?[]:t==="r"&&!s?db(r,e,t,o):hb(r,e,t,s,o,a)}function Dm(r,e,t,s,o){const a=[],c=t==="x"?"inXRange":"inYRange";let d=!1;return ml(r,t,e,(f,p,x)=>{f[c]&&f[c](e[t],o)&&(a.push({element:f,datasetIndex:p,index:x}),d=d||f.inRange(e.x,e.y,o))}),s&&!d?[]:a}var fb={modes:{index(r,e,t,s){const o=us(e,r),a=t.axis||"x",c=t.includeInvisible||!1,d=t.intersect?vu(r,o,a,s,c):wu(r,o,a,!1,s,c),f=[];return d.length?(r.getSortedVisibleDatasetMetas().forEach(p=>{const x=d[0].index,y=p.data[x];y&&!y.skip&&f.push({element:y,datasetIndex:p.index,index:x})}),f):[]},dataset(r,e,t,s){const o=us(e,r),a=t.axis||"xy",c=t.includeInvisible||!1;let d=t.intersect?vu(r,o,a,s,c):wu(r,o,a,!1,s,c);if(d.length>0){const f=d[0].datasetIndex,p=r.getDatasetMeta(f).data;d=[];for(let x=0;x<p.length;++x)d.push({element:p[x],datasetIndex:f,index:x})}return d},point(r,e,t,s){const o=us(e,r),a=t.axis||"xy",c=t.includeInvisible||!1;return vu(r,o,a,s,c)},nearest(r,e,t,s){const o=us(e,r),a=t.axis||"xy",c=t.includeInvisible||!1;return wu(r,o,a,t.intersect,s,c)},x(r,e,t,s){const o=us(e,r);return Dm(r,o,"x",t.intersect,s)},y(r,e,t,s){const o=us(e,r);return Dm(r,o,"y",t.intersect,s)}}};const eg=["left","top","right","bottom"];function Zi(r,e){return r.filter(t=>t.pos===e)}function Rm(r,e){return r.filter(t=>eg.indexOf(t.pos)===-1&&t.box.axis===e)}function eo(r,e){return r.sort((t,s)=>{const o=e?s:t,a=e?t:s;return o.weight===a.weight?o.index-a.index:o.weight-a.weight})}function mb(r){const e=[];let t,s,o,a,c,d;for(t=0,s=(r||[]).length;t<s;++t)o=r[t],{position:a,options:{stack:c,stackWeight:d=1}}=o,e.push({index:t,box:o,pos:a,horizontal:o.isHorizontal(),weight:o.weight,stack:c&&a+c,stackWeight:d});return e}function pb(r){const e={};for(const t of r){const{stack:s,pos:o,stackWeight:a}=t;if(!s||!eg.includes(o))continue;const c=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=a}return e}function gb(r,e){const t=pb(r),{vBoxMaxWidth:s,hBoxMaxHeight:o}=e;let a,c,d;for(a=0,c=r.length;a<c;++a){d=r[a];const{fullSize:f}=d.box,p=t[d.stack],x=p&&d.stackWeight/p.weight;d.horizontal?(d.width=x?x*s:f&&e.availableWidth,d.height=o):(d.width=s,d.height=x?x*o:f&&e.availableHeight)}return t}function xb(r){const e=mb(r),t=eo(e.filter(p=>p.box.fullSize),!0),s=eo(Zi(e,"left"),!0),o=eo(Zi(e,"right")),a=eo(Zi(e,"top"),!0),c=eo(Zi(e,"bottom")),d=Rm(e,"x"),f=Rm(e,"y");return{fullSize:t,leftAndTop:s.concat(a),rightAndBottom:o.concat(f).concat(c).concat(d),chartArea:Zi(e,"chartArea"),vertical:s.concat(o).concat(f),horizontal:a.concat(c).concat(d)}}function Lm(r,e,t,s){return Math.max(r[t],e[t])+Math.max(r[s],e[s])}function tg(r,e){r.top=Math.max(r.top,e.top),r.left=Math.max(r.left,e.left),r.bottom=Math.max(r.bottom,e.bottom),r.right=Math.max(r.right,e.right)}function yb(r,e,t,s){const{pos:o,box:a}=t,c=r.maxPadding;if(!Ge(o)){t.size&&(r[o]-=t.size);const y=s[t.stack]||{size:0,count:1};y.size=Math.max(y.size,t.horizontal?a.height:a.width),t.size=y.size/y.count,r[o]+=t.size}a.getPadding&&tg(c,a.getPadding());const d=Math.max(0,e.outerWidth-Lm(c,r,"left","right")),f=Math.max(0,e.outerHeight-Lm(c,r,"top","bottom")),p=d!==r.w,x=f!==r.h;return r.w=d,r.h=f,t.horizontal?{same:p,other:x}:{same:x,other:p}}function vb(r){const e=r.maxPadding;function t(s){const o=Math.max(e[s]-r[s],0);return r[s]+=o,o}r.y+=t("top"),r.x+=t("left"),t("right"),t("bottom")}function wb(r,e){const t=e.maxPadding;function s(o){const a={left:0,top:0,right:0,bottom:0};return o.forEach(c=>{a[c]=Math.max(e[c],t[c])}),a}return s(r?["left","right"]:["top","bottom"])}function ao(r,e,t,s){const o=[];let a,c,d,f,p,x;for(a=0,c=r.length,p=0;a<c;++a){d=r[a],f=d.box,f.update(d.width||e.w,d.height||e.h,wb(d.horizontal,e));const{same:y,other:v}=yb(e,t,d,s);p|=y&&o.length,x=x||v,f.fullSize||o.push(d)}return p&&ao(o,e,t,s)||x}function qa(r,e,t,s,o){r.top=t,r.left=e,r.right=e+s,r.bottom=t+o,r.width=s,r.height=o}function Om(r,e,t,s){const o=t.padding;let{x:a,y:c}=e;for(const d of r){const f=d.box,p=s[d.stack]||{placed:0,weight:1},x=d.stackWeight/p.weight||1;if(d.horizontal){const y=e.w*x,v=p.size||f.height;sl(p.start)&&(c=p.start),f.fullSize?qa(f,o.left,c,t.outerWidth-o.right-o.left,v):qa(f,e.left+p.placed,c,y,v),p.start=c,p.placed+=y,c=f.bottom}else{const y=e.h*x,v=p.size||f.width;sl(p.start)&&(a=p.start),f.fullSize?qa(f,a,o.top,v,t.outerHeight-o.bottom-o.top):qa(f,a,e.top+p.placed,v,y),p.start=a,p.placed+=y,a=f.right}}e.x=a,e.y=c}var Fr={addBox(r,e){r.boxes||(r.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},r.boxes.push(e)},removeBox(r,e){const t=r.boxes?r.boxes.indexOf(e):-1;t!==-1&&r.boxes.splice(t,1)},configure(r,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(r,e,t,s){if(!r)return;const o=Nn(r.options.layout.padding),a=Math.max(e-o.width,0),c=Math.max(t-o.height,0),d=xb(r.boxes),f=d.vertical,p=d.horizontal;Xe(r.boxes,j=>{typeof j.beforeLayout=="function"&&j.beforeLayout()});const x=f.reduce((j,k)=>k.box.options&&k.box.options.display===!1?j:j+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:t,padding:o,availableWidth:a,availableHeight:c,vBoxMaxWidth:a/2/x,hBoxMaxHeight:c/2}),v=Object.assign({},o);tg(v,Nn(s));const b=Object.assign({maxPadding:v,w:a,h:c,x:o.left,y:o.top},o),_=gb(f.concat(p),y);ao(d.fullSize,b,y,_),ao(f,b,y,_),ao(p,b,y,_)&&ao(f,b,y,_),vb(b),Om(d.leftAndTop,b,y,_),b.x+=b.w,b.y+=b.h,Om(d.rightAndBottom,b,y,_),r.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},Xe(d.chartArea,j=>{const k=j.box;Object.assign(k,r.chartArea),k.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class ng{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,o){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,o?Math.floor(t/o):s)}}isAttached(e){return!0}updateConfig(e){}}class bb extends ng{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ja="$chartjs",_b={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Mm=r=>r===null||r==="";function kb(r,e){const t=r.style,s=r.getAttribute("height"),o=r.getAttribute("width");if(r[Ja]={initial:{height:s,width:o,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Mm(o)){const a=Sm(r,"width");a!==void 0&&(r.width=a)}if(Mm(s))if(r.style.height==="")r.height=r.width/(e||2);else{const a=Sm(r,"height");a!==void 0&&(r.height=a)}return r}const rg=Uw?{passive:!0}:!1;function jb(r,e,t){r&&r.addEventListener(e,t,rg)}function Sb(r,e,t){r&&r.canvas&&r.canvas.removeEventListener(e,t,rg)}function Nb(r,e){const t=_b[r.type]||r.type,{x:s,y:o}=us(r,e);return{type:t,chart:e,native:r,x:s!==void 0?s:null,y:o!==void 0?o:null}}function ul(r,e){for(const t of r)if(t===e||t.contains(e))return!0}function Cb(r,e,t){const s=r.canvas,o=new MutationObserver(a=>{let c=!1;for(const d of a)c=c||ul(d.addedNodes,s),c=c&&!ul(d.removedNodes,s);c&&t()});return o.observe(document,{childList:!0,subtree:!0}),o}function Eb(r,e,t){const s=r.canvas,o=new MutationObserver(a=>{let c=!1;for(const d of a)c=c||ul(d.removedNodes,s),c=c&&!ul(d.addedNodes,s);c&&t()});return o.observe(document,{childList:!0,subtree:!0}),o}const bo=new Map;let Im=0;function sg(){const r=window.devicePixelRatio;r!==Im&&(Im=r,bo.forEach((e,t)=>{t.currentDevicePixelRatio!==r&&e()}))}function Ab(r,e){bo.size||window.addEventListener("resize",sg),bo.set(r,e)}function Tb(r){bo.delete(r),bo.size||window.removeEventListener("resize",sg)}function Pb(r,e,t){const s=r.canvas,o=s&&sd(s);if(!o)return;const a=$p((d,f)=>{const p=o.clientWidth;t(d,f),p<o.clientWidth&&t()},window),c=new ResizeObserver(d=>{const f=d[0],p=f.contentRect.width,x=f.contentRect.height;p===0&&x===0||a(p,x)});return c.observe(o),Ab(r,a),c}function bu(r,e,t){t&&t.disconnect(),e==="resize"&&Tb(r)}function Db(r,e,t){const s=r.canvas,o=$p(a=>{r.ctx!==null&&t(Nb(a,r))},r);return jb(s,e,o),o}class Rb extends ng{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(kb(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[Ja])return!1;const s=t[Ja].initial;["height","width"].forEach(a=>{const c=s[a];Mt(c)?t.removeAttribute(a):t.setAttribute(a,c)});const o=s.style||{};return Object.keys(o).forEach(a=>{t.style[a]=o[a]}),t.width=t.width,delete t[Ja],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const o=e.$proxies||(e.$proxies={}),c={attach:Cb,detach:Eb,resize:Pb}[t]||Db;o[t]=c(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),o=s[t];if(!o)return;({attach:bu,detach:bu,resize:bu}[t]||Sb)(e,t,o),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,o){return $w(e,t,s,o)}isAttached(e){const t=e&&sd(e);return!!(t&&t.isConnected)}}function Lb(r){return!rd()||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas?bb:Rb}class So{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return ol(this.x)&&ol(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const o={};return e.forEach(a=>{o[a]=s[a]&&s[a].active()?s[a]._to:this[a]}),o}}function Ob(r,e){const t=r.options.ticks,s=Mb(r),o=Math.min(t.maxTicksLimit||s,s),a=t.major.enabled?Fb(e):[],c=a.length,d=a[0],f=a[c-1],p=[];if(c>o)return zb(e,p,a,c/o),p;const x=Ib(a,e,o);if(c>0){let y,v;const b=c>1?Math.round((f-d)/(c-1)):null;for(Ka(e,p,x,Mt(b)?0:d-b,d),y=0,v=c-1;y<v;y++)Ka(e,p,x,a[y],a[y+1]);return Ka(e,p,x,f,Mt(b)?e.length:f+b),p}return Ka(e,p,x),p}function Mb(r){const e=r.options.offset,t=r._tickSize(),s=r._length/t+(e?0:1),o=r._maxLength/t;return Math.floor(Math.min(s,o))}function Ib(r,e,t){const s=$b(r),o=e.length/t;if(!s)return Math.max(o,1);const a=Xv(s);for(let c=0,d=a.length-1;c<d;c++){const f=a[c];if(f>o)return f}return Math.max(o,1)}function Fb(r){const e=[];let t,s;for(t=0,s=r.length;t<s;t++)r[t].major&&e.push(t);return e}function zb(r,e,t,s){let o=0,a=t[0],c;for(s=Math.ceil(s),c=0;c<r.length;c++)c===a&&(e.push(r[c]),o++,a=t[o*s])}function Ka(r,e,t,s,o){const a=Ye(s,0),c=Math.min(Ye(o,r.length),r.length);let d=0,f,p,x;for(t=Math.ceil(t),o&&(f=o-s,t=f/Math.floor(f/t)),x=a;x<0;)d++,x=Math.round(a+d*t);for(p=Math.max(a,0);p<c;p++)p===x&&(e.push(r[p]),d++,x=Math.round(a+d*t))}function $b(r){const e=r.length;let t,s;if(e<2)return!1;for(s=r[0],t=1;t<e;++t)if(r[t]-r[t-1]!==s)return!1;return s}const Ub=r=>r==="left"?"right":r==="right"?"left":r,Fm=(r,e,t)=>e==="top"||e==="left"?r[e]+t:r[e]-t,zm=(r,e)=>Math.min(e||r,r);function $m(r,e){const t=[],s=r.length/e,o=r.length;let a=0;for(;a<o;a+=s)t.push(r[Math.floor(a)]);return t}function Bb(r,e,t){const s=r.ticks.length,o=Math.min(e,s-1),a=r._startPixel,c=r._endPixel,d=1e-6;let f=r.getPixelForTick(o),p;if(!(t&&(s===1?p=Math.max(f-a,c-f):e===0?p=(r.getPixelForTick(1)-f)/2:p=(f-r.getPixelForTick(o-1))/2,f+=o<e?p:-p,f<a-d||f>c+d)))return f}function Wb(r,e){Xe(r,t=>{const s=t.gc,o=s.length/2;let a;if(o>e){for(a=0;a<o;++a)delete t.data[s[a]];s.splice(0,o)}})}function to(r){return r.drawTicks?r.tickLength:0}function Um(r,e){if(!r.display)return 0;const t=Qt(r.font,e),s=Nn(r.padding);return(Pt(r.text)?r.text.length:1)*t.lineHeight+s.height}function Hb(r,e){return li(r,{scale:e,type:"scale"})}function Vb(r,e,t){return li(r,{tick:t,index:e,type:"tick"})}function qb(r,e,t){let s=Up(r);return(t&&e!=="right"||!t&&e==="right")&&(s=Ub(s)),s}function Kb(r,e,t,s){const{top:o,left:a,bottom:c,right:d,chart:f}=r,{chartArea:p,scales:x}=f;let y=0,v,b,_;const j=c-o,k=d-a;if(r.isHorizontal()){if(b=rn(s,a,d),Ge(t)){const D=Object.keys(t)[0],P=t[D];_=x[D].getPixelForValue(P)+j-e}else t==="center"?_=(p.bottom+p.top)/2+j-e:_=Fm(r,t,e);v=d-a}else{if(Ge(t)){const D=Object.keys(t)[0],P=t[D];b=x[D].getPixelForValue(P)-k+e}else t==="center"?b=(p.left+p.right)/2-k+e:b=Fm(r,t,e);_=rn(s,c,o),y=t==="left"?-kt:kt}return{titleX:b,titleY:_,maxWidth:v,rotation:y}}class pl extends So{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:o}=this;return e=On(e,Number.POSITIVE_INFINITY),t=On(t,Number.NEGATIVE_INFINITY),s=On(s,Number.POSITIVE_INFINITY),o=On(o,Number.NEGATIVE_INFINITY),{min:On(e,s),max:On(t,o),minDefined:dr(e),maxDefined:dr(t)}}getMinMax(e){let{min:t,max:s,minDefined:o,maxDefined:a}=this.getUserBounds(),c;if(o&&a)return{min:t,max:s};const d=this.getMatchingVisibleMetas();for(let f=0,p=d.length;f<p;++f)c=d[f].controller.getMinMax(this,e),o||(t=Math.min(t,c.min)),a||(s=Math.max(s,c.max));return t=a&&t>s?s:t,s=o&&t>s?t:s,{min:On(t,On(s,t)),max:On(s,On(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rt(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:o,grace:a,ticks:c}=this.options,d=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Sw(this,a,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=d<this.ticks.length;this._convertTicksToLabels(f?$m(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=Ob(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,e=!e),this._startPixel=t,this._endPixel=s,this._reversePixels=e,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rt(this.options.afterUpdate,[this])}beforeSetDimensions(){rt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),rt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,o,a;for(s=0,o=e.length;s<o;s++)a=e[s],a.label=rt(t.callback,[a.value,s,e],this)}afterTickToLabelConversion(){rt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=zm(this.ticks.length,e.ticks.maxTicksLimit),o=t.minRotation||0,a=t.maxRotation;let c=o,d,f,p;if(!this._isVisible()||!t.display||o>=a||s<=1||!this.isHorizontal()){this.labelRotation=o;return}const x=this._getLabelSizes(),y=x.widest.width,v=x.highest.height,b=gn(this.chart.width-y,0,this.maxWidth);d=e.offset?this.maxWidth/s:b/(s-1),y+6>d&&(d=b/(s-(e.offset?.5:1)),f=this.maxHeight-to(e.grid)-t.padding-Um(e.title,this.chart.options.font),p=Math.sqrt(y*y+v*v),c=Qv(Math.min(Math.asin(gn((x.highest.height+6)/d,-1,1)),Math.asin(gn(f/p,-1,1))-Math.asin(gn(v/p,-1,1)))),c=Math.max(o,Math.min(a,c))),this.labelRotation=c}afterCalculateLabelRotation(){rt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:o,grid:a}}=this,c=this._isVisible(),d=this.isHorizontal();if(c){const f=Um(o,t.options.font);if(d?(e.width=this.maxWidth,e.height=to(a)+f):(e.height=this.maxHeight,e.width=to(a)+f),s.display&&this.ticks.length){const{first:p,last:x,widest:y,highest:v}=this._getLabelSizes(),b=s.padding*2,_=hs(this.labelRotation),j=Math.cos(_),k=Math.sin(_);if(d){const D=s.mirror?0:k*y.width+j*v.height;e.height=Math.min(this.maxHeight,e.height+D+b)}else{const D=s.mirror?0:j*y.width+k*v.height;e.width=Math.min(this.maxWidth,e.width+D+b)}this._calculatePadding(p,x,k,j)}}this._handleMargins(),d?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,o){const{ticks:{align:a,padding:c},position:d}=this.options,f=this.labelRotation!==0,p=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const x=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,b=0;f?p?(v=o*e.width,b=s*t.height):(v=s*e.height,b=o*t.width):a==="start"?b=t.width:a==="end"?v=e.width:a!=="inner"&&(v=e.width/2,b=t.width/2),this.paddingLeft=Math.max((v-x+c)*this.width/(this.width-x),0),this.paddingRight=Math.max((b-y+c)*this.width/(this.width-y),0)}else{let x=t.height/2,y=e.height/2;a==="start"?(x=0,y=e.height):a==="end"&&(x=t.height,y=0),this.paddingTop=x+c,this.paddingBottom=y+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,s;for(t=0,s=e.length;t<s;t++)Mt(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=$m(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:o,_longestTextCache:a}=this,c=[],d=[],f=Math.floor(t/zm(t,s));let p=0,x=0,y,v,b,_,j,k,D,P,R,U,H;for(y=0;y<t;y+=f){if(_=e[y].label,j=this._resolveTickFontOptions(y),o.font=k=j.string,D=a[k]=a[k]||{data:{},gc:[]},P=j.lineHeight,R=U=0,!Mt(_)&&!Pt(_))R=vm(o,D.data,D.gc,R,_),U=P;else if(Pt(_))for(v=0,b=_.length;v<b;++v)H=_[v],!Mt(H)&&!Pt(H)&&(R=vm(o,D.data,D.gc,R,H),U+=P);c.push(R),d.push(U),p=Math.max(R,p),x=Math.max(U,x)}Wb(a,t);const z=c.indexOf(p),q=d.indexOf(x),G=fe=>({width:c[fe]||0,height:d[fe]||0});return{first:G(0),last:G(t-1),widest:G(z),highest:G(q),widths:c,heights:d}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Zv(this._alignToPixels?as(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=Vb(this.getContext(),e,s))}return this.$context||(this.$context=Hb(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=hs(this.labelRotation),s=Math.abs(Math.cos(t)),o=Math.abs(Math.sin(t)),a=this._getLabelSizes(),c=e.autoSkipPadding||0,d=a?a.widest.width+c:0,f=a?a.highest.height+c:0;return this.isHorizontal()?f*s>d*o?d/s:f/o:f*o<d*s?f/s:d/o}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,o=this.options,{grid:a,position:c,border:d}=o,f=a.offset,p=this.isHorizontal(),y=this.ticks.length+(f?1:0),v=to(a),b=[],_=d.setContext(this.getContext()),j=_.display?_.width:0,k=j/2,D=function(me){return as(s,me,j)};let P,R,U,H,z,q,G,fe,O,he,A,Y;if(c==="top")P=D(this.bottom),q=this.bottom-v,fe=P-k,he=D(e.top)+k,Y=e.bottom;else if(c==="bottom")P=D(this.top),he=e.top,Y=D(e.bottom)-k,q=P+k,fe=this.top+v;else if(c==="left")P=D(this.right),z=this.right-v,G=P-k,O=D(e.left)+k,A=e.right;else if(c==="right")P=D(this.left),O=e.left,A=D(e.right)-k,z=P+k,G=this.left+v;else if(t==="x"){if(c==="center")P=D((e.top+e.bottom)/2+.5);else if(Ge(c)){const me=Object.keys(c)[0],pe=c[me];P=D(this.chart.scales[me].getPixelForValue(pe))}he=e.top,Y=e.bottom,q=P+k,fe=q+v}else if(t==="y"){if(c==="center")P=D((e.left+e.right)/2);else if(Ge(c)){const me=Object.keys(c)[0],pe=c[me];P=D(this.chart.scales[me].getPixelForValue(pe))}z=P-k,G=z-v,O=e.left,A=e.right}const ne=Ye(o.ticks.maxTicksLimit,y),le=Math.max(1,Math.ceil(y/ne));for(R=0;R<y;R+=le){const me=this.getContext(R),pe=a.setContext(me),W=d.setContext(me),X=pe.lineWidth,V=pe.color,C=W.dash||[],K=W.dashOffset,be=pe.tickWidth,ve=pe.tickColor,xe=pe.tickBorderDash||[],re=pe.tickBorderDashOffset;U=Bb(this,R,f),U!==void 0&&(H=as(s,U,X),p?z=G=O=A=H:q=fe=he=Y=H,b.push({tx1:z,ty1:q,tx2:G,ty2:fe,x1:O,y1:he,x2:A,y2:Y,width:X,color:V,borderDash:C,borderDashOffset:K,tickWidth:be,tickColor:ve,tickBorderDash:xe,tickBorderDashOffset:re}))}return this._ticksLength=y,this._borderValue=P,b}_computeLabelItems(e){const t=this.axis,s=this.options,{position:o,ticks:a}=s,c=this.isHorizontal(),d=this.ticks,{align:f,crossAlign:p,padding:x,mirror:y}=a,v=to(s.grid),b=v+x,_=y?-x:b,j=-hs(this.labelRotation),k=[];let D,P,R,U,H,z,q,G,fe,O,he,A,Y="middle";if(o==="top")z=this.bottom-_,q=this._getXAxisLabelAlignment();else if(o==="bottom")z=this.top+_,q=this._getXAxisLabelAlignment();else if(o==="left"){const le=this._getYAxisLabelAlignment(v);q=le.textAlign,H=le.x}else if(o==="right"){const le=this._getYAxisLabelAlignment(v);q=le.textAlign,H=le.x}else if(t==="x"){if(o==="center")z=(e.top+e.bottom)/2+b;else if(Ge(o)){const le=Object.keys(o)[0],me=o[le];z=this.chart.scales[le].getPixelForValue(me)+b}q=this._getXAxisLabelAlignment()}else if(t==="y"){if(o==="center")H=(e.left+e.right)/2-b;else if(Ge(o)){const le=Object.keys(o)[0],me=o[le];H=this.chart.scales[le].getPixelForValue(me)}q=this._getYAxisLabelAlignment(v).textAlign}t==="y"&&(f==="start"?Y="top":f==="end"&&(Y="bottom"));const ne=this._getLabelSizes();for(D=0,P=d.length;D<P;++D){R=d[D],U=R.label;const le=a.setContext(this.getContext(D));G=this.getPixelForTick(D)+a.labelOffset,fe=this._resolveTickFontOptions(D),O=fe.lineHeight,he=Pt(U)?U.length:1;const me=he/2,pe=le.color,W=le.textStrokeColor,X=le.textStrokeWidth;let V=q;c?(H=G,q==="inner"&&(D===P-1?V=this.options.reverse?"left":"right":D===0?V=this.options.reverse?"right":"left":V="center"),o==="top"?p==="near"||j!==0?A=-he*O+O/2:p==="center"?A=-ne.highest.height/2-me*O+O:A=-ne.highest.height+O/2:p==="near"||j!==0?A=O/2:p==="center"?A=ne.highest.height/2-me*O:A=ne.highest.height-he*O,y&&(A*=-1),j!==0&&!le.showLabelBackdrop&&(H+=O/2*Math.sin(j))):(z=G,A=(1-he)*O/2);let C;if(le.showLabelBackdrop){const K=Nn(le.backdropPadding),be=ne.heights[D],ve=ne.widths[D];let xe=A-K.top,re=0-K.left;switch(Y){case"middle":xe-=be/2;break;case"bottom":xe-=be;break}switch(q){case"center":re-=ve/2;break;case"right":re-=ve;break;case"inner":D===P-1?re-=ve:D>0&&(re-=ve/2);break}C={left:re,top:xe,width:ve+K.width,height:be+K.height,color:le.backdropColor}}k.push({label:U,font:fe,textOffset:A,options:{rotation:j,color:pe,strokeColor:W,strokeWidth:X,textAlign:V,textBaseline:Y,translation:[H,z],backdrop:C}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-hs(this.labelRotation))return e==="top"?"left":"right";let o="center";return t.align==="start"?o="left":t.align==="end"?o="right":t.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:o,padding:a}}=this.options,c=this._getLabelSizes(),d=e+a,f=c.widest.width;let p,x;return t==="left"?o?(x=this.right+a,s==="near"?p="left":s==="center"?(p="center",x+=f/2):(p="right",x+=f)):(x=this.right-d,s==="near"?p="right":s==="center"?(p="center",x-=f/2):(p="left",x=this.left)):t==="right"?o?(x=this.left+a,s==="near"?p="right":s==="center"?(p="center",x-=f/2):(p="left",x-=f)):(x=this.left+d,s==="near"?p="left":s==="center"?(p="center",x+=f/2):(p="right",x=this.right)):p="right",{textAlign:p,x}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:o,width:a,height:c}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,o,a,c),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const o=this.ticks.findIndex(a=>a.value===e);return o>=0?t.setContext(this.getContext(o)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,c;const d=(f,p,x)=>{!x.width||!x.color||(s.save(),s.lineWidth=x.width,s.strokeStyle=x.color,s.setLineDash(x.borderDash||[]),s.lineDashOffset=x.borderDashOffset,s.beginPath(),s.moveTo(f.x,f.y),s.lineTo(p.x,p.y),s.stroke(),s.restore())};if(t.display)for(a=0,c=o.length;a<c;++a){const f=o[a];t.drawOnChartArea&&d({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),t.drawTicks&&d({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:o}}=this,a=s.setContext(this.getContext()),c=s.display?a.width:0;if(!c)return;const d=o.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let p,x,y,v;this.isHorizontal()?(p=as(e,this.left,c)-c/2,x=as(e,this.right,d)+d/2,y=v=f):(y=as(e,this.top,c)-c/2,v=as(e,this.bottom,d)+d/2,p=x=f),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(p,y),t.lineTo(x,v),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,o=this._computeLabelArea();o&&Qu(s,o);const a=this.getLabelItems(e);for(const c of a){const d=c.options,f=c.font,p=c.label,x=c.textOffset;ll(s,p,0,x,f,d)}o&&Ju(s)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:o}}=this;if(!s.display)return;const a=Qt(s.font),c=Nn(s.padding),d=s.align;let f=a.lineHeight/2;t==="bottom"||t==="center"||Ge(t)?(f+=c.bottom,Pt(s.text)&&(f+=a.lineHeight*(s.text.length-1))):f+=c.top;const{titleX:p,titleY:x,maxWidth:y,rotation:v}=Kb(this,f,t,d);ll(e,s.text,0,0,a,{color:s.color,maxWidth:y,rotation:v,textAlign:qb(d,t,o),textBaseline:"middle",translation:[p,x]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=Ye(e.grid&&e.grid.z,-1),o=Ye(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==pl.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:s,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",o=[];let a,c;for(a=0,c=t.length;a<c;++a){const d=t[a];d[s]===this.id&&(!e||d.type===e)&&o.push(d)}return o}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Qt(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ga{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;Yb(t)&&(s=this.register(t));const o=this.items,a=e.id,c=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in o||(o[a]=e,Gb(e,c,s),this.override&&ft.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,o=this.scope;s in t&&delete t[s],o&&s in ft[o]&&(delete ft[o][s],this.override&&delete ms[s])}}function Gb(r,e,t){const s=vo(Object.create(null),[t?ft.get(t):{},ft.get(e),r.defaults]);ft.set(e,s),r.defaultRoutes&&Xb(e,r.defaultRoutes),r.descriptors&&ft.describe(e,r.descriptors)}function Xb(r,e){Object.keys(e).forEach(t=>{const s=t.split("."),o=s.pop(),a=[r].concat(s).join("."),c=e[t].split("."),d=c.pop(),f=c.join(".");ft.route(a,o,f,d)})}function Yb(r){return"id"in r&&"defaults"in r}class Qb{constructor(){this.controllers=new Ga(Zp,"datasets",!0),this.elements=new Ga(So,"elements"),this.plugins=new Ga(Object,"plugins"),this.scales=new Ga(pl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(o=>{const a=s||this._getRegistryForType(o);s||a.isForType(o)||a===this.plugins&&o.id?this._exec(e,a,o):Xe(o,c=>{const d=s||this._getRegistryForType(c);this._exec(e,d,c)})})}_exec(e,t,s){const o=Xu(e);rt(s["before"+o],[],s),t[e](s),rt(s["after"+o],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const o=t.get(e);if(o===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return o}}var Fn=new Qb;class Jb{constructor(){this._init=[]}notify(e,t,s,o){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=o?this._descriptors(e).filter(o):this._descriptors(e),c=this._notify(a,e,t,s);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),c}_notify(e,t,s,o){o=o||{};for(const a of e){const c=a.plugin,d=c[s],f=[t,o,a.options];if(rt(d,f,c)===!1&&o.cancelable)return!1}return!0}invalidate(){Mt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,o=Ye(s.options&&s.options.plugins,{}),a=Zb(s);return o===!1&&!t?[]:t_(e,a,o,t)}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,o=(a,c)=>a.filter(d=>!c.some(f=>d.plugin.id===f.plugin.id));this._notify(o(t,s),e,"stop"),this._notify(o(s,t),e,"start")}}function Zb(r){const e={},t=[],s=Object.keys(Fn.plugins.items);for(let a=0;a<s.length;a++)t.push(Fn.getPlugin(s[a]));const o=r.plugins||[];for(let a=0;a<o.length;a++){const c=o[a];t.indexOf(c)===-1&&(t.push(c),e[c.id]=!0)}return{plugins:t,localIds:e}}function e_(r,e){return!e&&r===!1?null:r===!0?{}:r}function t_(r,{plugins:e,localIds:t},s,o){const a=[],c=r.getContext();for(const d of e){const f=d.id,p=e_(s[f],o);p!==null&&a.push({plugin:d,options:n_(r.config,{plugin:d,local:t[f]},p,c)})}return a}function n_(r,{plugin:e,local:t},s,o){const a=r.pluginScopeKeys(e),c=r.getOptionScopes(s,a);return t&&e.defaults&&c.push(e.defaults),r.createResolver(c,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Iu(r,e){const t=ft.datasets[r]||{};return((e.datasets||{})[r]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function r_(r,e){let t=r;return r==="_index_"?t=e:r==="_value_"&&(t=e==="x"?"y":"x"),t}function s_(r,e){return r===e?"_index_":"_value_"}function Bm(r){if(r==="x"||r==="y"||r==="r")return r}function i_(r){if(r==="top"||r==="bottom")return"x";if(r==="left"||r==="right")return"y"}function Fu(r,...e){if(Bm(r))return r;for(const t of e){const s=t.axis||i_(t.position)||r.length>1&&Bm(r[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${r}' axis. Please provide 'axis' or 'position' option.`)}function Wm(r,e,t){if(t[e+"AxisID"]===r)return{axis:e}}function o_(r,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(s=>s.xAxisID===r||s.yAxisID===r);if(t.length)return Wm(r,"x",t[0])||Wm(r,"y",t[0])}return{}}function a_(r,e){const t=ms[r.type]||{scales:{}},s=e.scales||{},o=Iu(r.type,e),a=Object.create(null);return Object.keys(s).forEach(c=>{const d=s[c];if(!Ge(d))return console.error(`Invalid scale configuration for scale: ${c}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const f=Fu(c,d,o_(c,r),ft.scales[d.type]),p=s_(f,o),x=t.scales||{};a[c]=fo(Object.create(null),[{axis:f},d,x[f],x[p]])}),r.data.datasets.forEach(c=>{const d=c.type||r.type,f=c.indexAxis||Iu(d,e),x=(ms[d]||{}).scales||{};Object.keys(x).forEach(y=>{const v=r_(y,f),b=c[v+"AxisID"]||v;a[b]=a[b]||Object.create(null),fo(a[b],[{axis:v},s[b],x[y]])})}),Object.keys(a).forEach(c=>{const d=a[c];fo(d,[ft.scales[d.type],ft.scale])}),a}function ig(r){const e=r.options||(r.options={});e.plugins=Ye(e.plugins,{}),e.scales=a_(r,e)}function og(r){return r=r||{},r.datasets=r.datasets||[],r.labels=r.labels||[],r}function l_(r){return r=r||{},r.data=og(r.data),ig(r),r}const Hm=new Map,ag=new Set;function Xa(r,e){let t=Hm.get(r);return t||(t=e(),Hm.set(r,t),ag.add(t)),t}const no=(r,e,t)=>{const s=wo(e,t);s!==void 0&&r.add(s)};class c_{constructor(e){this._config=l_(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=og(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ig(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xa(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Xa(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Xa(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return Xa(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let o=s.get(e);return(!o||t)&&(o=new Map,s.set(e,o)),o}getOptionScopes(e,t,s){const{options:o,type:a}=this,c=this._cachedScopes(e,s),d=c.get(t);if(d)return d;const f=new Set;t.forEach(x=>{e&&(f.add(e),x.forEach(y=>no(f,e,y))),x.forEach(y=>no(f,o,y)),x.forEach(y=>no(f,ms[a]||{},y)),x.forEach(y=>no(f,ft,y)),x.forEach(y=>no(f,Ou,y))});const p=Array.from(f);return p.length===0&&p.push(Object.create(null)),ag.has(t)&&c.set(t,p),p}chartOptionScopes(){const{options:e,type:t}=this;return[e,ms[t]||{},ft.datasets[t]||{},{type:t},ft,Ou]}resolveNamedOptions(e,t,s,o=[""]){const a={$shared:!0},{resolver:c,subPrefixes:d}=Vm(this._resolverCache,e,o);let f=c;if(d_(c,t)){a.$shared=!1,s=$r(s)?s():s;const p=this.createResolver(e,s,d);f=oi(c,s,p)}for(const p of t)a[p]=f[p];return a}createResolver(e,t,s=[""],o){const{resolver:a}=Vm(this._resolverCache,e,s);return Ge(t)?oi(a,t,void 0,o):a}}function Vm(r,e,t){let s=r.get(e);s||(s=new Map,r.set(e,s));const o=t.join();let a=s.get(o);return a||(a={resolver:ed(e,t),subPrefixes:t.filter(d=>!d.toLowerCase().includes("hover"))},s.set(o,a)),a}const u_=r=>Ge(r)&&Object.getOwnPropertyNames(r).some(e=>$r(r[e]));function d_(r,e){const{isScriptable:t,isIndexable:s}=Vp(r);for(const o of e){const a=t(o),c=s(o),d=(c||a)&&r[o];if(a&&($r(d)||u_(d))||c&&Pt(d))return!0}return!1}var h_="4.5.0";const f_=["top","bottom","left","right","chartArea"];function qm(r,e){return r==="top"||r==="bottom"||f_.indexOf(r)===-1&&e==="x"}function Km(r,e){return function(t,s){return t[r]===s[r]?t[e]-s[e]:t[r]-s[r]}}function Gm(r){const e=r.chart,t=e.options.animation;e.notifyPlugins("afterRender"),rt(t&&t.onComplete,[r],e)}function m_(r){const e=r.chart,t=e.options.animation;rt(t&&t.onProgress,[r],e)}function lg(r){return rd()&&typeof r=="string"?r=document.getElementById(r):r&&r.length&&(r=r[0]),r&&r.canvas&&(r=r.canvas),r}const Za={},Xm=r=>{const e=lg(r);return Object.values(Za).filter(t=>t.canvas===e).pop()};function p_(r,e,t){const s=Object.keys(r);for(const o of s){const a=+o;if(a>=e){const c=r[o];delete r[o],(t>0||a>e)&&(r[a+t]=c)}}}function g_(r,e,t,s){return!t||r.type==="mouseout"?null:s?e:r}let gl=class{static defaults=ft;static instances=Za;static overrides=ms;static registry=Fn;static version=h_;static getChart=Xm;static register(...e){Fn.add(...e),Ym()}static unregister(...e){Fn.remove(...e),Ym()}constructor(e,t){const s=this.config=new c_(t),o=lg(e),a=Xm(o);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const c=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Lb(o)),this.platform.updateConfig(s);const d=this.platform.acquireContext(o,c.aspectRatio),f=d&&d.canvas,p=f&&f.height,x=f&&f.width;if(this.id=Uv(),this.ctx=d,this.canvas=f,this.width=x,this.height=p,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Jb,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=sw(y=>this.update(y),c.resizeDelay||0),this._dataChanges=[],Za[this.id]=this,!d||!f){console.error("Failed to create chart: can't acquire context from the given item");return}ar.listen(this,"complete",Gm),ar.listen(this,"progress",m_),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:o,_aspectRatio:a}=this;return Mt(e)?t&&a?a:o?s/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():jm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return wm(this.canvas,this.ctx),this}stop(){return ar.stop(this),this}resize(e,t){ar.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,o=this.canvas,a=s.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(o,e,t,a),d=s.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,jm(this,d,!0)&&(this.notifyPlugins("resize",{size:c}),rt(s.onResize,[this,c],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Xe(t,(s,o)=>{s.id=o})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,o=Object.keys(s).reduce((c,d)=>(c[d]=!1,c),{});let a=[];t&&(a=a.concat(Object.keys(t).map(c=>{const d=t[c],f=Fu(c,d),p=f==="r",x=f==="x";return{options:d,dposition:p?"chartArea":x?"bottom":"left",dtype:p?"radialLinear":x?"category":"linear"}}))),Xe(a,c=>{const d=c.options,f=d.id,p=Fu(f,d),x=Ye(d.type,c.dtype);(d.position===void 0||qm(d.position,p)!==qm(c.dposition))&&(d.position=c.dposition),o[f]=!0;let y=null;if(f in s&&s[f].type===x)y=s[f];else{const v=Fn.getScale(x);y=new v({id:f,type:x,ctx:this.ctx,chart:this}),s[y.id]=y}y.init(d,e)}),Xe(o,(c,d)=>{c||delete s[d]}),Xe(s,c=>{Fr.configure(this,c,c.options),Fr.addBox(this,c)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((o,a)=>o.index-a.index),s>t){for(let o=t;o<s;++o)this._destroyDatasetMeta(o);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(Km("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,o)=>{t.filter(a=>a===s._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,o;for(this._removeUnreferencedMetasets(),s=0,o=t.length;s<o;s++){const a=t[s];let c=this.getDatasetMeta(s);const d=a.type||this.config.type;if(c.type&&c.type!==d&&(this._destroyDatasetMeta(s),c=this.getDatasetMeta(s)),c.type=d,c.indexAxis=a.indexAxis||Iu(d,this.options),c.order=a.order||0,c.index=s,c.label=""+a.label,c.visible=this.isDatasetVisible(s),c.controller)c.controller.updateIndex(s),c.controller.linkScales();else{const f=Fn.getController(d),{datasetElementType:p,dataElementType:x}=ft.datasets[d];Object.assign(f,{dataElementType:Fn.getElement(x),datasetElementType:p&&Fn.getElement(p)}),c.controller=new f(this,s),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){Xe(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let p=0,x=this.data.datasets.length;p<x;p++){const{controller:y}=this.getDatasetMeta(p),v=!o&&a.indexOf(y)===-1;y.buildOrUpdateElements(v),c=Math.max(+y.getMaxOverflow(),c)}c=this._minPadding=s.layout.autoPadding?c:0,this._updateLayout(c),o||Xe(a,p=>{p.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Km("z","_idx"));const{_active:d,_lastEvent:f}=this;f?this._eventHandler(f,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){Xe(this.scales,e=>{Fr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!dm(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:o,count:a}of t){const c=s==="_removeElements"?-a:a;p_(e,o,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=a=>new Set(e.filter(c=>c[0]===a).map((c,d)=>d+","+c.splice(1).join(","))),o=s(0);for(let a=1;a<t;a++)if(!dm(o,s(a)))return;return Array.from(o).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fr.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],Xe(this.boxes,o=>{s&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,a)=>{o._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,$r(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),o={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(s.controller._update(t),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ar.has(this)?this.attached&&!ar.running(this)&&ar.start(this):(this.draw(),Gm({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let o,a;for(o=0,a=t.length;o<a;++o){const c=t[o];(!e||c.visible)&&s.push(c)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},o=Vw(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(o&&Qu(t,o),e.controller.draw(),o&&Ju(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Hp(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,o){const a=fb.modes[t];return typeof a=="function"?a(this,e,s,o):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let o=s.filter(a=>a&&a._dataset===t).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(o)),o}getContext(){return this.$context||(this.$context=li(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){const s=this.getDatasetMeta(e);s.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const o=s?"show":"hide",a=this.getDatasetMeta(e),c=a.controller._resolveAnimations(void 0,o);sl(t)?(a.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),c.update(a,{visible:s}),this.update(d=>d.datasetIndex===e?o:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ar.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),wm(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Za[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(a,c)=>{t.addEventListener(this,a,c),e[a]=c},o=(a,c,d)=>{a.offsetX=c,a.offsetY=d,this._eventHandler(a)};Xe(this.options.events,a=>s(a,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(f,p)=>{t.addEventListener(this,f,p),e[f]=p},o=(f,p)=>{e[f]&&(t.removeEventListener(this,f,p),delete e[f])},a=(f,p)=>{this.canvas&&this.resize(f,p)};let c;const d=()=>{o("attach",d),this.attached=!0,this.resize(),s("resize",a),s("detach",c)};c=()=>{this.attached=!1,o("resize",a),this._stop(),this._resize(0,0),s("attach",d)},t.isAttached(this.canvas)?d():c()}unbindEvents(){Xe(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Xe(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const o=s?"set":"remove";let a,c,d,f;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+o+"DatasetHoverStyle"]()),d=0,f=e.length;d<f;++d){c=e[d];const p=c&&this.getDatasetMeta(c.datasetIndex).controller;p&&p[o+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:a,index:c})=>{const d=this.getDatasetMeta(a);if(!d)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:d.data[c],index:c}});!nl(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const o=this.options.hover,a=(f,p)=>f.filter(x=>!p.some(y=>x.datasetIndex===y.datasetIndex&&x.index===y.index)),c=a(t,e),d=s?e:a(e,t);c.length&&this.updateHoverStyle(c,o.mode,!1),d.length&&o.mode&&this.updateHoverStyle(d,o.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},o=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,o)===!1)return;const a=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,o),(a||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:o=[],options:a}=this,c=t,d=this._getActiveElements(e,o,s,c),f=Kv(e),p=g_(e,this._lastEvent,s,f);s&&(this._lastEvent=null,rt(a.onHover,[e,d,this],this),f&&rt(a.onClick,[e,d,this],this));const x=!nl(d,o);return(x||t)&&(this._active=d,this._updateHoverStyles(d,o,t)),this._lastEvent=p,x}_getActiveElements(e,t,s,o){if(e.type==="mouseout")return[];if(!s)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,o)}};function Ym(){return Xe(gl.instances,r=>r._plugins.invalidate())}function x_(r,e,t){const{startAngle:s,x:o,y:a,outerRadius:c,innerRadius:d,options:f}=e,{borderWidth:p,borderJoinStyle:x}=f,y=Math.min(p/c,zn(s-t));if(r.beginPath(),r.arc(o,a,c-p/2,s+y/2,t-y/2),d>0){const v=Math.min(p/d,zn(s-t));r.arc(o,a,d+p/2,t-v/2,s+v/2,!0)}else{const v=Math.min(p/2,c*zn(s-t));if(x==="round")r.arc(o,a,v,t-st/2,s+st/2,!0);else if(x==="bevel"){const b=2*v*v,_=-b*Math.cos(t+st/2)+o,j=-b*Math.sin(t+st/2)+a,k=b*Math.cos(s+st/2)+o,D=b*Math.sin(s+st/2)+a;r.lineTo(_,j),r.lineTo(k,D)}}r.closePath(),r.moveTo(0,0),r.rect(0,0,r.canvas.width,r.canvas.height),r.clip("evenodd")}function y_(r,e,t){const{startAngle:s,pixelMargin:o,x:a,y:c,outerRadius:d,innerRadius:f}=e;let p=o/d;r.beginPath(),r.arc(a,c,d,s-p,t+p),f>o?(p=o/f,r.arc(a,c,f,t+p,s-p,!0)):r.arc(a,c,o,t+kt,s-kt),r.closePath(),r.clip()}function v_(r){return Zu(r,["outerStart","outerEnd","innerStart","innerEnd"])}function w_(r,e,t,s){const o=v_(r.options.borderRadius),a=(t-e)/2,c=Math.min(a,s*e/2),d=f=>{const p=(t-Math.min(a,f))*s/2;return gn(f,0,Math.min(a,p))};return{outerStart:d(o.outerStart),outerEnd:d(o.outerEnd),innerStart:gn(o.innerStart,0,c),innerEnd:gn(o.innerEnd,0,c)}}function ti(r,e,t,s){return{x:t+r*Math.cos(e),y:s+r*Math.sin(e)}}function dl(r,e,t,s,o,a){const{x:c,y:d,startAngle:f,pixelMargin:p,innerRadius:x}=e,y=Math.max(e.outerRadius+s+t-p,0),v=x>0?x+s+t+p:0;let b=0;const _=o-f;if(s){const le=x>0?x-s:0,me=y>0?y-s:0,pe=(le+me)/2,W=pe!==0?_*pe/(pe+s):_;b=(_-W)/2}const j=Math.max(.001,_*y-t/st)/y,k=(_-j)/2,D=f+k+b,P=o-k-b,{outerStart:R,outerEnd:U,innerStart:H,innerEnd:z}=w_(e,v,y,P-D),q=y-R,G=y-U,fe=D+R/q,O=P-U/G,he=v+H,A=v+z,Y=D+H/he,ne=P-z/A;if(r.beginPath(),a){const le=(fe+O)/2;if(r.arc(c,d,y,fe,le),r.arc(c,d,y,le,O),U>0){const X=ti(G,O,c,d);r.arc(X.x,X.y,U,O,P+kt)}const me=ti(A,P,c,d);if(r.lineTo(me.x,me.y),z>0){const X=ti(A,ne,c,d);r.arc(X.x,X.y,z,P+kt,ne+Math.PI)}const pe=(P-z/v+(D+H/v))/2;if(r.arc(c,d,v,P-z/v,pe,!0),r.arc(c,d,v,pe,D+H/v,!0),H>0){const X=ti(he,Y,c,d);r.arc(X.x,X.y,H,Y+Math.PI,D-kt)}const W=ti(q,D,c,d);if(r.lineTo(W.x,W.y),R>0){const X=ti(q,fe,c,d);r.arc(X.x,X.y,R,D-kt,fe)}}else{r.moveTo(c,d);const le=Math.cos(fe)*y+c,me=Math.sin(fe)*y+d;r.lineTo(le,me);const pe=Math.cos(O)*y+c,W=Math.sin(O)*y+d;r.lineTo(pe,W)}r.closePath()}function b_(r,e,t,s,o){const{fullCircles:a,startAngle:c,circumference:d}=e;let f=e.endAngle;if(a){dl(r,e,t,s,f,o);for(let p=0;p<a;++p)r.fill();isNaN(d)||(f=c+(d%gt||gt))}return dl(r,e,t,s,f,o),r.fill(),f}function __(r,e,t,s,o){const{fullCircles:a,startAngle:c,circumference:d,options:f}=e,{borderWidth:p,borderJoinStyle:x,borderDash:y,borderDashOffset:v,borderRadius:b}=f,_=f.borderAlign==="inner";if(!p)return;r.setLineDash(y||[]),r.lineDashOffset=v,_?(r.lineWidth=p*2,r.lineJoin=x||"round"):(r.lineWidth=p,r.lineJoin=x||"bevel");let j=e.endAngle;if(a){dl(r,e,t,s,j,o);for(let k=0;k<a;++k)r.stroke();isNaN(d)||(j=c+(d%gt||gt))}_&&y_(r,e,j),f.selfJoin&&j-c>=st&&b===0&&x!=="miter"&&x_(r,e,j),a||(dl(r,e,t,s,j,o),r.stroke())}class k_ extends So{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const o=this.getProps(["x","y"],s),{angle:a,distance:c}=Ip(o,{x:e,y:t}),{startAngle:d,endAngle:f,innerRadius:p,outerRadius:x,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),v=(this.options.spacing+this.options.borderWidth)/2,b=Ye(y,f-d),_=al(a,d,f)&&d!==f,j=b>=gt||_,k=oo(c,p+v,x+v);return j&&k}getCenterPoint(e){const{x:t,y:s,startAngle:o,endAngle:a,innerRadius:c,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:f,spacing:p}=this.options,x=(o+a)/2,y=(c+d+p+f)/2;return{x:t+Math.cos(x)*y,y:s+Math.sin(x)*y}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,o=(t.offset||0)/4,a=(t.spacing||0)/2,c=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=s>gt?Math.floor(s/gt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const d=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(d)*o,Math.sin(d)*o);const f=1-Math.sin(Math.min(st,s||0)),p=o*f;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,b_(e,this,p,a,c),__(e,this,p,a,c),e.restore()}}const Qm=(r,e)=>{let{boxHeight:t=e,boxWidth:s=e}=r;return r.usePointStyle&&(t=Math.min(t,e),s=r.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}},j_=(r,e)=>r!==null&&e!==null&&r.datasetIndex===e.datasetIndex&&r.index===e.index;class Jm extends So{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=rt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,o)=>e.sort(s,o,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,o=Qt(s.font),a=o.size,c=this._computeTitleHeight(),{boxWidth:d,itemHeight:f}=Qm(s,a);let p,x;t.font=o.string,this.isHorizontal()?(p=this.maxWidth,x=this._fitRows(c,a,d,f)+10):(x=this.maxHeight,p=this._fitCols(c,o,d,f)+10),this.width=Math.min(p,e.maxWidth||this.maxWidth),this.height=Math.min(x,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,o){const{ctx:a,maxWidth:c,options:{labels:{padding:d}}}=this,f=this.legendHitBoxes=[],p=this.lineWidths=[0],x=o+d;let y=e;a.textAlign="left",a.textBaseline="middle";let v=-1,b=-x;return this.legendItems.forEach((_,j)=>{const k=s+t/2+a.measureText(_.text).width;(j===0||p[p.length-1]+k+2*d>c)&&(y+=x,p[p.length-(j>0?0:1)]=0,b+=x,v++),f[j]={left:0,top:b,row:v,width:k,height:o},p[p.length-1]+=k+d}),y}_fitCols(e,t,s,o){const{ctx:a,maxHeight:c,options:{labels:{padding:d}}}=this,f=this.legendHitBoxes=[],p=this.columnSizes=[],x=c-e;let y=d,v=0,b=0,_=0,j=0;return this.legendItems.forEach((k,D)=>{const{itemWidth:P,itemHeight:R}=S_(s,t,a,k,o);D>0&&b+R+2*d>x&&(y+=v+d,p.push({width:v,height:b}),_+=v+d,j++,v=b=0),f[D]={left:_,top:b,col:j,width:P,height:R},v=Math.max(v,P),b+=R+d}),y+=v,p.push({width:v,height:b}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:o},rtl:a}}=this,c=si(a,this.left,this.width);if(this.isHorizontal()){let d=0,f=rn(s,this.left+o,this.right-this.lineWidths[d]);for(const p of t)d!==p.row&&(d=p.row,f=rn(s,this.left+o,this.right-this.lineWidths[d])),p.top+=this.top+e+o,p.left=c.leftForLtr(c.x(f),p.width),f+=p.width+o}else{let d=0,f=rn(s,this.top+e+o,this.bottom-this.columnSizes[d].height);for(const p of t)p.col!==d&&(d=p.col,f=rn(s,this.top+e+o,this.bottom-this.columnSizes[d].height)),p.top=f,p.left+=this.left+o,p.left=c.leftForLtr(c.x(p.left),p.width),f+=p.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Qu(e,this),this._draw(),Ju(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:o}=this,{align:a,labels:c}=e,d=ft.color,f=si(e.rtl,this.left,this.width),p=Qt(c.font),{padding:x}=c,y=p.size,v=y/2;let b;this.drawTitle(),o.textAlign=f.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=p.string;const{boxWidth:_,boxHeight:j,itemHeight:k}=Qm(c,y),D=function(z,q,G){if(isNaN(_)||_<=0||isNaN(j)||j<0)return;o.save();const fe=Ye(G.lineWidth,1);if(o.fillStyle=Ye(G.fillStyle,d),o.lineCap=Ye(G.lineCap,"butt"),o.lineDashOffset=Ye(G.lineDashOffset,0),o.lineJoin=Ye(G.lineJoin,"miter"),o.lineWidth=fe,o.strokeStyle=Ye(G.strokeStyle,d),o.setLineDash(Ye(G.lineDash,[])),c.usePointStyle){const O={radius:j*Math.SQRT2/2,pointStyle:G.pointStyle,rotation:G.rotation,borderWidth:fe},he=f.xPlus(z,_/2),A=q+v;Wp(o,O,he,A,c.pointStyleWidth&&_)}else{const O=q+Math.max((y-j)/2,0),he=f.leftForLtr(z,_),A=go(G.borderRadius);o.beginPath(),Object.values(A).some(Y=>Y!==0)?Mu(o,{x:he,y:O,w:_,h:j,radius:A}):o.rect(he,O,_,j),o.fill(),fe!==0&&o.stroke()}o.restore()},P=function(z,q,G){ll(o,G.text,z,q+k/2,p,{strikethrough:G.hidden,textAlign:f.textAlign(G.textAlign)})},R=this.isHorizontal(),U=this._computeTitleHeight();R?b={x:rn(a,this.left+x,this.right-s[0]),y:this.top+x+U,line:0}:b={x:this.left+x,y:rn(a,this.top+U+x,this.bottom-t[0].height),line:0},Xp(this.ctx,e.textDirection);const H=k+x;this.legendItems.forEach((z,q)=>{o.strokeStyle=z.fontColor,o.fillStyle=z.fontColor;const G=o.measureText(z.text).width,fe=f.textAlign(z.textAlign||(z.textAlign=c.textAlign)),O=_+v+G;let he=b.x,A=b.y;f.setWidth(this.width),R?q>0&&he+O+x>this.right&&(A=b.y+=H,b.line++,he=b.x=rn(a,this.left+x,this.right-s[b.line])):q>0&&A+H>this.bottom&&(he=b.x=he+t[b.line].width+x,b.line++,A=b.y=rn(a,this.top+U+x,this.bottom-t[b.line].height));const Y=f.x(he);if(D(Y,A,z),he=iw(fe,he+_+v,R?he+O:this.right,e.rtl),P(f.x(he),A,z),R)b.x+=O+x;else if(typeof z.text!="string"){const ne=p.lineHeight;b.y+=cg(z,ne)+x}else b.y+=H}),Yp(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=Qt(t.font),o=Nn(t.padding);if(!t.display)return;const a=si(e.rtl,this.left,this.width),c=this.ctx,d=t.position,f=s.size/2,p=o.top+f;let x,y=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),x=this.top+p,y=rn(e.align,y,this.right-v);else{const _=this.columnSizes.reduce((j,k)=>Math.max(j,k.height),0);x=p+rn(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const b=rn(d,y,y+v);c.textAlign=a.textAlign(Up(d)),c.textBaseline="middle",c.strokeStyle=t.color,c.fillStyle=t.color,c.font=s.string,ll(c,t.text,b,x,s)}_computeTitleHeight(){const e=this.options.title,t=Qt(e.font),s=Nn(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,o,a;if(oo(e,this.left,this.right)&&oo(t,this.top,this.bottom)){for(a=this.legendHitBoxes,s=0;s<a.length;++s)if(o=a[s],oo(e,o.left,o.left+o.width)&&oo(t,o.top,o.top+o.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!E_(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const o=this._hoveredItem,a=j_(o,s);o&&!a&&rt(t.onLeave,[e,o,this],this),this._hoveredItem=s,s&&!a&&rt(t.onHover,[e,s,this],this)}else s&&rt(t.onClick,[e,s,this],this)}}function S_(r,e,t,s,o){const a=N_(s,r,e,t),c=C_(o,s,e.lineHeight);return{itemWidth:a,itemHeight:c}}function N_(r,e,t,s){let o=r.text;return o&&typeof o!="string"&&(o=o.reduce((a,c)=>a.length>c.length?a:c)),e+t.size/2+s.measureText(o).width}function C_(r,e,t){let s=r;return typeof e.text!="string"&&(s=cg(e,t)),s}function cg(r,e){const t=r.text?r.text.length:0;return e*t}function E_(r,e){return!!((r==="mousemove"||r==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(r==="click"||r==="mouseup"))}var A_={id:"legend",_element:Jm,start(r,e,t){const s=r.legend=new Jm({ctx:r.ctx,options:t,chart:r});Fr.configure(r,s,t),Fr.addBox(r,s)},stop(r){Fr.removeBox(r,r.legend),delete r.legend},beforeUpdate(r,e,t){const s=r.legend;Fr.configure(r,s,t),s.options=t},afterUpdate(r){const e=r.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(r,e){e.replay||r.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(r,e,t){const s=e.datasetIndex,o=t.chart;o.isDatasetVisible(s)?(o.hide(s),e.hidden=!0):(o.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:r=>r.chart.options.color,boxWidth:40,padding:10,generateLabels(r){const e=r.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:o,color:a,useBorderRadius:c,borderRadius:d}}=r.legend.options;return r._getSortedDatasetMetas().map(f=>{const p=f.controller.getStyle(t?0:void 0),x=Nn(p.borderWidth);return{text:e[f.index].label,fillStyle:p.backgroundColor,fontColor:a,hidden:!f.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:p.borderColor,pointStyle:s||p.pointStyle,rotation:p.rotation,textAlign:o||p.textAlign,borderRadius:c&&(d||p.borderRadius),datasetIndex:f.index}},this)}},title:{color:r=>r.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:r=>!r.startsWith("on"),labels:{_scriptable:r=>!["generateLabels","filter","sort"].includes(r)}}};const lo={average(r){if(!r.length)return!1;let e,t,s=new Set,o=0,a=0;for(e=0,t=r.length;e<t;++e){const d=r[e].element;if(d&&d.hasValue()){const f=d.tooltipPosition();s.add(f.x),o+=f.y,++a}}return a===0||s.size===0?!1:{x:[...s].reduce((d,f)=>d+f)/s.size,y:o/a}},nearest(r,e){if(!r.length)return!1;let t=e.x,s=e.y,o=Number.POSITIVE_INFINITY,a,c,d;for(a=0,c=r.length;a<c;++a){const f=r[a].element;if(f&&f.hasValue()){const p=f.getCenterPoint(),x=Jv(e,p);x<o&&(o=x,d=f)}}if(d){const f=d.tooltipPosition();t=f.x,s=f.y}return{x:t,y:s}}};function Mn(r,e){return e&&(Pt(e)?Array.prototype.push.apply(r,e):r.push(e)),r}function lr(r){return(typeof r=="string"||r instanceof String)&&r.indexOf(`
`)>-1?r.split(`
`):r}function T_(r,e){const{element:t,datasetIndex:s,index:o}=e,a=r.getDatasetMeta(s).controller,{label:c,value:d}=a.getLabelAndValue(o);return{chart:r,label:c,parsed:a.getParsed(o),raw:r.data.datasets[s].data[o],formattedValue:d,dataset:a.getDataset(),dataIndex:o,datasetIndex:s,element:t}}function Zm(r,e){const t=r.chart.ctx,{body:s,footer:o,title:a}=r,{boxWidth:c,boxHeight:d}=e,f=Qt(e.bodyFont),p=Qt(e.titleFont),x=Qt(e.footerFont),y=a.length,v=o.length,b=s.length,_=Nn(e.padding);let j=_.height,k=0,D=s.reduce((U,H)=>U+H.before.length+H.lines.length+H.after.length,0);if(D+=r.beforeBody.length+r.afterBody.length,y&&(j+=y*p.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),D){const U=e.displayColors?Math.max(d,f.lineHeight):f.lineHeight;j+=b*U+(D-b)*f.lineHeight+(D-1)*e.bodySpacing}v&&(j+=e.footerMarginTop+v*x.lineHeight+(v-1)*e.footerSpacing);let P=0;const R=function(U){k=Math.max(k,t.measureText(U).width+P)};return t.save(),t.font=p.string,Xe(r.title,R),t.font=f.string,Xe(r.beforeBody.concat(r.afterBody),R),P=e.displayColors?c+2+e.boxPadding:0,Xe(s,U=>{Xe(U.before,R),Xe(U.lines,R),Xe(U.after,R)}),P=0,t.font=x.string,Xe(r.footer,R),t.restore(),k+=_.width,{width:k,height:j}}function P_(r,e){const{y:t,height:s}=e;return t<s/2?"top":t>r.height-s/2?"bottom":"center"}function D_(r,e,t,s){const{x:o,width:a}=s,c=t.caretSize+t.caretPadding;if(r==="left"&&o+a+c>e.width||r==="right"&&o-a-c<0)return!0}function R_(r,e,t,s){const{x:o,width:a}=t,{width:c,chartArea:{left:d,right:f}}=r;let p="center";return s==="center"?p=o<=(d+f)/2?"left":"right":o<=a/2?p="left":o>=c-a/2&&(p="right"),D_(p,r,e,t)&&(p="center"),p}function ep(r,e,t){const s=t.yAlign||e.yAlign||P_(r,t);return{xAlign:t.xAlign||e.xAlign||R_(r,e,t,s),yAlign:s}}function L_(r,e){let{x:t,width:s}=r;return e==="right"?t-=s:e==="center"&&(t-=s/2),t}function O_(r,e,t){let{y:s,height:o}=r;return e==="top"?s+=t:e==="bottom"?s-=o+t:s-=o/2,s}function tp(r,e,t,s){const{caretSize:o,caretPadding:a,cornerRadius:c}=r,{xAlign:d,yAlign:f}=t,p=o+a,{topLeft:x,topRight:y,bottomLeft:v,bottomRight:b}=go(c);let _=L_(e,d);const j=O_(e,f,p);return f==="center"?d==="left"?_+=p:d==="right"&&(_-=p):d==="left"?_-=Math.max(x,v)+o:d==="right"&&(_+=Math.max(y,b)+o),{x:gn(_,0,s.width-e.width),y:gn(j,0,s.height-e.height)}}function Ya(r,e,t){const s=Nn(t.padding);return e==="center"?r.x+r.width/2:e==="right"?r.x+r.width-s.right:r.x+s.left}function np(r){return Mn([],lr(r))}function M_(r,e,t){return li(r,{tooltip:e,tooltipItems:t,type:"tooltip"})}function rp(r,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?r.override(t):r}const ug={beforeTitle:ir,title(r){if(r.length>0){const e=r[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:ir,beforeBody:ir,beforeLabel:ir,label(r){if(this&&this.options&&this.options.mode==="dataset")return r.label+": "+r.formattedValue||r.formattedValue;let e=r.dataset.label||"";e&&(e+=": ");const t=r.formattedValue;return Mt(t)||(e+=t),e},labelColor(r){const t=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(r){const t=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ir,afterBody:ir,beforeFooter:ir,footer:ir,afterFooter:ir};function Xt(r,e,t,s){const o=r[e].call(t,s);return typeof o>"u"?ug[e].call(t,s):o}class sp extends So{static positioners=lo;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),o=s.enabled&&t.options.animation&&s.animations,a=new Qp(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=M_(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,o=Xt(s,"beforeTitle",this,e),a=Xt(s,"title",this,e),c=Xt(s,"afterTitle",this,e);let d=[];return d=Mn(d,lr(o)),d=Mn(d,lr(a)),d=Mn(d,lr(c)),d}getBeforeBody(e,t){return np(Xt(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,o=[];return Xe(e,a=>{const c={before:[],lines:[],after:[]},d=rp(s,a);Mn(c.before,lr(Xt(d,"beforeLabel",this,a))),Mn(c.lines,Xt(d,"label",this,a)),Mn(c.after,lr(Xt(d,"afterLabel",this,a))),o.push(c)}),o}getAfterBody(e,t){return np(Xt(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,o=Xt(s,"beforeFooter",this,e),a=Xt(s,"footer",this,e),c=Xt(s,"afterFooter",this,e);let d=[];return d=Mn(d,lr(o)),d=Mn(d,lr(a)),d=Mn(d,lr(c)),d}_createItems(e){const t=this._active,s=this.chart.data,o=[],a=[],c=[];let d=[],f,p;for(f=0,p=t.length;f<p;++f)d.push(T_(this.chart,t[f]));return e.filter&&(d=d.filter((x,y,v)=>e.filter(x,y,v,s))),e.itemSort&&(d=d.sort((x,y)=>e.itemSort(x,y,s))),Xe(d,x=>{const y=rp(e.callbacks,x);o.push(Xt(y,"labelColor",this,x)),a.push(Xt(y,"labelPointStyle",this,x)),c.push(Xt(y,"labelTextColor",this,x))}),this.labelColors=o,this.labelPointStyles=a,this.labelTextColors=c,this.dataPoints=d,d}update(e,t){const s=this.options.setContext(this.getContext()),o=this._active;let a,c=[];if(!o.length)this.opacity!==0&&(a={opacity:0});else{const d=lo[s.position].call(this,o,this._eventPosition);c=this._createItems(s),this.title=this.getTitle(c,s),this.beforeBody=this.getBeforeBody(c,s),this.body=this.getBody(c,s),this.afterBody=this.getAfterBody(c,s),this.footer=this.getFooter(c,s);const f=this._size=Zm(this,s),p=Object.assign({},d,f),x=ep(this.chart,s,p),y=tp(s,p,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,a={opacity:1,x:y.x,y:y.y,width:f.width,height:f.height,caretX:d.x,caretY:d.y}}this._tooltipItems=c,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,o){const a=this.getCaretPosition(e,s,o);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,s){const{xAlign:o,yAlign:a}=this,{caretSize:c,cornerRadius:d}=s,{topLeft:f,topRight:p,bottomLeft:x,bottomRight:y}=go(d),{x:v,y:b}=e,{width:_,height:j}=t;let k,D,P,R,U,H;return a==="center"?(U=b+j/2,o==="left"?(k=v,D=k-c,R=U+c,H=U-c):(k=v+_,D=k+c,R=U-c,H=U+c),P=k):(o==="left"?D=v+Math.max(f,x)+c:o==="right"?D=v+_-Math.max(p,y)-c:D=this.caretX,a==="top"?(R=b,U=R-c,k=D-c,P=D+c):(R=b+j,U=R+c,k=D+c,P=D-c),H=R),{x1:k,x2:D,x3:P,y1:R,y2:U,y3:H}}drawTitle(e,t,s){const o=this.title,a=o.length;let c,d,f;if(a){const p=si(s.rtl,this.x,this.width);for(e.x=Ya(this,s.titleAlign,s),t.textAlign=p.textAlign(s.titleAlign),t.textBaseline="middle",c=Qt(s.titleFont),d=s.titleSpacing,t.fillStyle=s.titleColor,t.font=c.string,f=0;f<a;++f)t.fillText(o[f],p.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+d,f+1===a&&(e.y+=s.titleMarginBottom-d)}}_drawColorBox(e,t,s,o,a){const c=this.labelColors[s],d=this.labelPointStyles[s],{boxHeight:f,boxWidth:p}=a,x=Qt(a.bodyFont),y=Ya(this,"left",a),v=o.x(y),b=f<x.lineHeight?(x.lineHeight-f)/2:0,_=t.y+b;if(a.usePointStyle){const j={radius:Math.min(p,f)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},k=o.leftForLtr(v,p)+p/2,D=_+f/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,bm(e,j,k,D),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,bm(e,j,k,D)}else{e.lineWidth=Ge(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const j=o.leftForLtr(v,p),k=o.leftForLtr(o.xPlus(v,1),p-2),D=go(c.borderRadius);Object.values(D).some(P=>P!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Mu(e,{x:j,y:_,w:p,h:f,radius:D}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),Mu(e,{x:k,y:_+1,w:p-2,h:f-2,radius:D}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(j,_,p,f),e.strokeRect(j,_,p,f),e.fillStyle=c.backgroundColor,e.fillRect(k,_+1,p-2,f-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:o}=this,{bodySpacing:a,bodyAlign:c,displayColors:d,boxHeight:f,boxWidth:p,boxPadding:x}=s,y=Qt(s.bodyFont);let v=y.lineHeight,b=0;const _=si(s.rtl,this.x,this.width),j=function(G){t.fillText(G,_.x(e.x+b),e.y+v/2),e.y+=v+a},k=_.textAlign(c);let D,P,R,U,H,z,q;for(t.textAlign=c,t.textBaseline="middle",t.font=y.string,e.x=Ya(this,k,s),t.fillStyle=s.bodyColor,Xe(this.beforeBody,j),b=d&&k!=="right"?c==="center"?p/2+x:p+2+x:0,U=0,z=o.length;U<z;++U){for(D=o[U],P=this.labelTextColors[U],t.fillStyle=P,Xe(D.before,j),R=D.lines,d&&R.length&&(this._drawColorBox(t,e,U,_,s),v=Math.max(y.lineHeight,f)),H=0,q=R.length;H<q;++H)j(R[H]),v=y.lineHeight;Xe(D.after,j)}b=0,v=y.lineHeight,Xe(this.afterBody,j),e.y-=a}drawFooter(e,t,s){const o=this.footer,a=o.length;let c,d;if(a){const f=si(s.rtl,this.x,this.width);for(e.x=Ya(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=f.textAlign(s.footerAlign),t.textBaseline="middle",c=Qt(s.footerFont),t.fillStyle=s.footerColor,t.font=c.string,d=0;d<a;++d)t.fillText(o[d],f.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+s.footerSpacing}}drawBackground(e,t,s,o){const{xAlign:a,yAlign:c}=this,{x:d,y:f}=e,{width:p,height:x}=s,{topLeft:y,topRight:v,bottomLeft:b,bottomRight:_}=go(o.cornerRadius);t.fillStyle=o.backgroundColor,t.strokeStyle=o.borderColor,t.lineWidth=o.borderWidth,t.beginPath(),t.moveTo(d+y,f),c==="top"&&this.drawCaret(e,t,s,o),t.lineTo(d+p-v,f),t.quadraticCurveTo(d+p,f,d+p,f+v),c==="center"&&a==="right"&&this.drawCaret(e,t,s,o),t.lineTo(d+p,f+x-_),t.quadraticCurveTo(d+p,f+x,d+p-_,f+x),c==="bottom"&&this.drawCaret(e,t,s,o),t.lineTo(d+b,f+x),t.quadraticCurveTo(d,f+x,d,f+x-b),c==="center"&&a==="left"&&this.drawCaret(e,t,s,o),t.lineTo(d,f+y),t.quadraticCurveTo(d,f,d+y,f),t.closePath(),t.fill(),o.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,o=s&&s.x,a=s&&s.y;if(o||a){const c=lo[e.position].call(this,this._active,this._eventPosition);if(!c)return;const d=this._size=Zm(this,e),f=Object.assign({},c,this._size),p=ep(t,e,f),x=tp(e,f,p,t);(o._to!==x.x||a._to!==x.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=d.width,this.height=d.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const o={width:this.width,height:this.height},a={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const c=Nn(t.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&d&&(e.save(),e.globalAlpha=s,this.drawBackground(a,e,o,t),Xp(e,t.textDirection),a.y+=c.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),Yp(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,o=e.map(({datasetIndex:d,index:f})=>{const p=this.chart.getDatasetMeta(d);if(!p)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:p.data[f],index:f}}),a=!nl(s,o),c=this._positionChanged(o,t);(a||c)&&(this._active=o,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,a=this._active||[],c=this._getActiveElements(e,a,t,s),d=this._positionChanged(c,e),f=t||!nl(c,a)||d;return f&&(this._active=c,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),f}_getActiveElements(e,t,s,o){const a=this.options;if(e.type==="mouseout")return[];if(!o)return t.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,a.mode,a,s);return a.reverse&&c.reverse(),c}_positionChanged(e,t){const{caretX:s,caretY:o,options:a}=this,c=lo[a.position].call(this,e,t);return c!==!1&&(s!==c.x||o!==c.y)}}var I_={id:"tooltip",_element:sp,positioners:lo,afterInit(r,e,t){t&&(r.tooltip=new sp({chart:r,options:t}))},beforeUpdate(r,e,t){r.tooltip&&r.tooltip.initialize(t)},reset(r,e,t){r.tooltip&&r.tooltip.initialize(t)},afterDraw(r){const e=r.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(r.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(r.ctx),r.notifyPlugins("afterTooltipDraw",t)}},afterEvent(r,e){if(r.tooltip){const t=e.replay;r.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(r,e)=>e.bodyFont.size,boxWidth:(r,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ug},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:r=>r!=="filter"&&r!=="itemSort"&&r!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const xl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yt=Object.keys(xl);function ip(r,e){return r-e}function op(r,e){if(Mt(e))return null;const t=r._adapter,{parser:s,round:o,isoWeekday:a}=r._parseOpts;let c=e;return typeof s=="function"&&(c=s(c)),dr(c)||(c=typeof s=="string"?t.parse(c,s):t.parse(c)),c===null?null:(o&&(c=o==="week"&&(ol(a)||a===!0)?t.startOf(c,"isoWeek",a):t.startOf(c,o)),+c)}function ap(r,e,t,s){const o=Yt.length;for(let a=Yt.indexOf(r);a<o-1;++a){const c=xl[Yt[a]],d=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((t-e)/(d*c.size))<=s)return Yt[a]}return Yt[o-1]}function F_(r,e,t,s,o){for(let a=Yt.length-1;a>=Yt.indexOf(t);a--){const c=Yt[a];if(xl[c].common&&r._adapter.diff(o,s,c)>=e-1)return c}return Yt[t?Yt.indexOf(t):0]}function z_(r){for(let e=Yt.indexOf(r)+1,t=Yt.length;e<t;++e)if(xl[Yt[e]].common)return Yt[e]}function lp(r,e,t){if(!t)r[e]=!0;else if(t.length){const{lo:s,hi:o}=Yu(t,e),a=t[s]>=e?t[s]:t[o];r[a]=!0}}function $_(r,e,t,s){const o=r._adapter,a=+o.startOf(e[0].value,s),c=e[e.length-1].value;let d,f;for(d=a;d<=c;d=+o.add(d,1,s))f=t[d],f>=0&&(e[f].major=!0);return e}function cp(r,e,t){const s=[],o={},a=e.length;let c,d;for(c=0;c<a;++c)d=e[c],o[d]=c,s.push({value:d,major:!1});return a===0||!t?s:$_(r,s,o,t)}class up extends pl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),o=this._adapter=new lb._date(e.adapters.date);o.init(t),fo(s.displayFormats,o.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:op(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:o,max:a,minDefined:c,maxDefined:d}=this.getUserBounds();function f(p){!c&&!isNaN(p.min)&&(o=Math.min(o,p.min)),!d&&!isNaN(p.max)&&(a=Math.max(a,p.max))}(!c||!d)&&(f(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&f(this.getMinMax(!1))),o=dr(o)&&!isNaN(o)?o:+t.startOf(Date.now(),s),a=dr(a)&&!isNaN(a)?a:+t.endOf(Date.now(),s)+1,this.min=Math.min(o,a-1),this.max=Math.max(o+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,o=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const a=this.min,c=this.max,d=tw(o,a,c);return this._unit=t.unit||(s.autoSkip?ap(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):F_(this,d.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:z_(this._unit),this.initOffsets(o),e.reverse&&d.reverse(),cp(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,s=0,o,a;this.options.offset&&e.length&&(o=this.getDecimalForValue(e[0]),e.length===1?t=1-o:t=(this.getDecimalForValue(e[1])-o)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?s=a:s=(a-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;t=gn(t,0,c),s=gn(s,0,c),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,o=this.options,a=o.time,c=a.unit||ap(a.minUnit,t,s,this._getLabelCapacity(t)),d=Ye(o.ticks.stepSize,1),f=c==="week"?a.isoWeekday:!1,p=ol(f)||f===!0,x={};let y=t,v,b;if(p&&(y=+e.startOf(y,"isoWeek",f)),y=+e.startOf(y,p?"day":c),e.diff(s,t,c)>1e5*d)throw new Error(t+" and "+s+" are too far apart with stepSize of "+d+" "+c);const _=o.ticks.source==="data"&&this.getDataTimestamps();for(v=y,b=0;v<s;v=+e.add(v,d,c),b++)lp(x,v,_);return(v===s||o.bounds==="ticks"||b===1)&&lp(x,v,_),Object.keys(x).sort(ip).map(j=>+j)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const o=this.options.time.displayFormats,a=this._unit,c=t||o[a];return this._adapter.format(e,c)}_tickFormatFunction(e,t,s,o){const a=this.options,c=a.ticks.callback;if(c)return rt(c,[e,t,s],this);const d=a.time.displayFormats,f=this._unit,p=this._majorUnit,x=f&&d[f],y=p&&d[p],v=s[t],b=p&&y&&v&&v.major;return this._adapter.format(e,o||(b?y:x))}generateTickLabels(e){let t,s,o;for(t=0,s=e.length;t<s;++t)o=e[t],o.label=this._tickFormatFunction(o.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,o=hs(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(o),c=Math.sin(o),d=this._resolveTickFontOptions(0).size;return{w:s*a+d*c,h:s*c+d*a}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,o=s[t.unit]||s.millisecond,a=this._tickFormatFunction(e,0,cp(this,[e],this._majorUnit),o),c=this._getLabelSize(a),d=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return d>0?d:1}getDataTimestamps(){let e=this._cache.data||[],t,s;if(e.length)return e;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(t=0,s=o.length;t<s;++t)e=e.concat(o[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const o=this.getLabels();for(t=0,s=o.length;t<s;++t)e.push(op(this,o[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return rw(e.sort(ip))}}function Qa(r,e,t){let s=0,o=r.length-1,a,c,d,f;t?(e>=r[s].pos&&e<=r[o].pos&&({lo:s,hi:o}=Lu(r,"pos",e)),{pos:a,time:d}=r[s],{pos:c,time:f}=r[o]):(e>=r[s].time&&e<=r[o].time&&({lo:s,hi:o}=Lu(r,"time",e)),{time:a,pos:d}=r[s],{time:c,pos:f}=r[o]);const p=c-a;return p?d+(f-d)*(e-a)/p:d}class t1 extends up{static id="timeseries";static defaults=up.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Qa(t,this.min),this._tableRange=Qa(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,o=[],a=[];let c,d,f,p,x;for(c=0,d=e.length;c<d;++c)p=e[c],p>=t&&p<=s&&o.push(p);if(o.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(c=0,d=o.length;c<d;++c)x=o[c+1],f=o[c-1],p=o[c],Math.round((x+f)/2)!==p&&a.push({time:p,pos:c/(d-1)});return a}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((o,a)=>o-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?e=this.normalize(t.concat(s)):e=t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Qa(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return Qa(this._table,s*this._tableRange+this._minPos,!0)}}const dg="label";function dp(r,e){typeof r=="function"?r(e):r&&(r.current=e)}function U_(r,e){const t=r.options;t&&e&&Object.assign(t,e)}function hg(r,e){r.labels=e}function fg(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dg;const s=[];r.datasets=e.map(o=>{const a=r.datasets.find(c=>c[t]===o[t]);return!a||!o.data||s.includes(a)?{...o}:(s.push(a),Object.assign(a,o),a)})}function B_(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dg;const t={labels:[],datasets:[]};return hg(t,r.labels),fg(t,r.datasets,e),t}function W_(r,e){const{height:t=150,width:s=300,redraw:o=!1,datasetIdKey:a,type:c,data:d,options:f,plugins:p=[],fallbackContent:x,updateMode:y,...v}=r,b=L.useRef(null),_=L.useRef(null),j=()=>{b.current&&(_.current=new gl(b.current,{type:c,data:B_(d,a),options:f&&{...f},plugins:p}),dp(e,_.current))},k=()=>{dp(e,null),_.current&&(_.current.destroy(),_.current=null)};return L.useEffect(()=>{!o&&_.current&&f&&U_(_.current,f)},[o,f]),L.useEffect(()=>{!o&&_.current&&hg(_.current.config.data,d.labels)},[o,d.labels]),L.useEffect(()=>{!o&&_.current&&d.datasets&&fg(_.current.config.data,d.datasets,a)},[o,d.datasets]),L.useEffect(()=>{_.current&&(o?(k(),setTimeout(j)):_.current.update(y))},[o,f,d.labels,d.datasets,y]),L.useEffect(()=>{_.current&&(k(),setTimeout(j))},[c]),L.useEffect(()=>(j(),()=>k()),[]),fp.createElement("canvas",{ref:b,role:"img",height:t,width:s,...v},x)}const H_=L.forwardRef(W_);function V_(r,e){return gl.register(e),L.forwardRef((t,s)=>fp.createElement(H_,{...t,ref:s,type:r}))}const hp=V_("doughnut",ab);gl.register(k_,I_,A_);const ro={resumen:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 0a2.25 2.25 0 0 0 2.25 2.25h12.75a2.25 2.25 0 0 0 2.25-2.25M3.75 12a2.25 2.25 0 0 1 2.25-2.25h12.75a2.25 2.25 0 0 1 2.25 2.25m-16.5 0v2.25a2.25 2.25 0 0 0 2.25 2.25h12.75a2.25 2.25 0 0 0 2.25-2.25V12"})}),graficos:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM15.75 6h-6M1.5 12h16.5m-16.5 0a2.25 2.25 0 0 0 2.25 2.25h12.75a2.25 2.25 0 0 0 2.25-2.25M1.5 12a2.25 2.25 0 0 1 2.25-2.25h12.75a2.25 2.25 0 0 1 2.25 2.25m-16.5 0v2.25a2.25 2.25 0 0 0 2.25 2.25h12.75a2.25 2.25 0 0 0 2.25-2.25V12"})}),tenencia:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v2.25a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25V14.25m15 0a3 3 0 0 0-3-3H8.25a3 3 0 0 0-3 3m15 0v-3a3 3 0 0 0-3-3h-9a3 3 0 0 0-3 3v3m15 0-3-3-3 3"})}),transacciones:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.28-8.28Z"})}),brokers:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-1.5-18L19.5 21M5.25 3h13.5m-3-6H8.25m-3.75 3h13.5M9 6v15M15 6v15"})})};function q_({portfolioId:r,user:e,setCurrentView:t,selectedCurrency:s}){const[o,a]=L.useState(null),[c,d]=L.useState([]),[f,p]=L.useState([]),[x,y]=L.useState([]),[v,b]=L.useState([]),[_,j]=L.useState(!0),[k,D]=L.useState(null),[P,R]=L.useState("resumen"),[U,H]=L.useState(!1),[z,q]=L.useState(null),[G,fe]=L.useState({activo_id:"",tipo_operacion:"compra",cantidad:"",precio_unitario:"",fecha:new Date().toISOString().split("T")[0],moneda:"ARS",broker_id:""}),[O,he]=L.useState(s||"ARS"),[A,Y]=L.useState(s||"ARS"),[ne,le]=L.useState(!1),[me,pe]=L.useState(!1),[W,X]=L.useState({key:"fecha",direction:"descending"}),[V,C]=L.useState({key:null,direction:"ascending"}),[K,be]=L.useState(!1),[ve,xe]=L.useState(!1),[re,Ee]=L.useState(null),[Z,ee]=L.useState(null),[oe,I]=L.useState({nombre:"",descripcion:"",cuenta_comitente:""}),[Q,de]=L.useState(""),[we,ke]=L.useState("todos"),[je,De]=L.useState("todos"),[$t,Ut]=L.useState([]),[Bt,et]=L.useState(0),[jt,xn]=L.useState(!1),[ze,Be]=L.useState(null),[Qe,$n]=L.useState(r),[Cn,No]=L.useState([]),[Jt,Un]=L.useState({valor:null,variacion:null,porcentaje:null,tendencia:null}),[od,yl]=L.useState(!1),[vl,ad]=L.useState(!1);L.useEffect(()=>{const N=document.createElement("script");return N.src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js",N.onload=()=>le(!0),N.onerror=()=>{console.error("Error al cargar la librera de Excel."),alert("Error al cargar la librera de Excel. Por favor, recarga la pgina.")},document.head.appendChild(N),()=>document.head.removeChild(N)},[]),L.useEffect(()=>{e&&Qe&&(hr(),di(),Bn(),En())},[e,Qe]),L.useEffect(()=>{e&&(ci(),gs())},[e]),L.useEffect(()=>{if(f.length>0){const N=qn(f).holdings,$=Object.values(N).filter(J=>J.cantidad>0).map(J=>J.activoInfo.submarket).filter(Boolean);Ut([...new Set($)].sort())}else Ut([])},[f,v]),L.useEffect(()=>{he(s),Y(s)},[s]);const gs=async()=>{try{const{data:N,error:$}=await ue.from("tipos_cambio").select("fecha, tasa").order("fecha",{ascending:!1}).limit(2);if($)throw $;if(N&&N.length>=2){const J=N[0].tasa,te=N[1].tasa,ge=J-te,Re=ge/te*100;Un({valor:J,variacion:ge,porcentaje:Re,tendencia:ge>=0?"subida":"bajada"})}else console.warn("No hay suficientes datos para calcular la variacin del dlar MEP."),Un({valor:null,variacion:null,porcentaje:null,tendencia:null})}catch(N){console.error("Error fetching MEP price:",N.message),Un({valor:null,variacion:null,porcentaje:null,tendencia:null})}},ci=async()=>{try{const{data:N,error:$}=await ue.from("portfolios").select("*").eq("user_id",e.id);if($)throw $;d(N||[])}catch(N){console.error("Error fetching all portfolios:",N.message)}},ui=async()=>{xn(!0);try{Be({type:"info",text:"Iniciando actualizacin completa..."}),Be({type:"info",text:"Actualizando la informacin del tipo de cambio Mep..."});const{error:N}=await ue.functions.invoke("actualizar-tipo-cambio",{body:{user_id:e.id}});if(N)throw N;await new Promise(Oe=>setTimeout(Oe,1e3)),Be({type:"info",text:"Actualizando valores contables y el precios de los activos en cartera..."});const{data:$,error:J}=await ue.from("tipos_cambio").select("fecha, tasa").eq("usuario_id",e.id);if(J)throw J;const te=$.reduce((Oe,Me)=>(Oe[Me.fecha]=Me.tasa,Oe),{}),{data:ge,error:Re}=await ue.from("entradas_contables").select("id, fecha, importe_ars, importe_usd, moneda").eq("usuario_id",e.id);if(Re)throw Re;const $e=ge.map(Oe=>{const Me=te[Oe.fecha];if(!Me||Me<=0)return null;let Ve=!1,ut={};if(Oe.moneda==="ARS"){const dt=parseFloat((Oe.importe_ars/Me).toFixed(2));dt!==Oe.importe_usd&&(Ve=!0,ut={importe_usd:dt})}else if(Oe.moneda==="USD"){const dt=parseFloat((Oe.importe_usd*Me).toFixed(2));dt!==Oe.importe_ars&&(Ve=!0,ut={importe_ars:dt})}return Ve?ue.from("entradas_contables").update(ut).eq("id",Oe.id).eq("usuario_id",e.id):null}).filter(Boolean);if($e.length>0&&(await Promise.all($e)).filter(Ve=>Ve.error).length>0)throw new Error("Algunos registros contables no se pudieron actualizar.");await ue.functions.invoke("actualizar-precios-docta",{body:{user_id:e.id}}),Be({type:"success",text:"Actualizacin completa! Los precios han sido sincronizados."})}catch(N){console.error("Error en la actualizacin completa:",N),Be({type:"error",text:N.message||"Error en la actualizacin. Por favor, intenta de nuevo."})}finally{hr(),Bn(),gs(),xn(!1),setTimeout(()=>Be(null),5e3)}},hr=async()=>{try{j(!0),D(null);const{data:N,error:$}=await ue.from("portfolios").select("*").eq("id",Qe).eq("user_id",e.id).single();if($)throw $;if(!N)throw new Error("No se encontr el portafolio.");a(N);const{data:J,error:te}=await ue.from("transacciones").select("*, activos(id, simbolo, nombre, moneda, tipo, ultimo_precio, ultimo_precio_ars, submarket), brokers(nombre, cuenta_comitente)").eq("portafolio_id",Qe);if(te)throw te;p(Array.isArray(J)?J:[])}catch(N){console.error("Error fetching portfolio details:",N.message),D(N.message||"Error al cargar los detalles del portafolio. Intntalo de nuevo.")}finally{j(!1)}},di=async()=>{try{const{data:N,error:$}=await ue.from("activos").select("id, nombre, simbolo, tipo, moneda, ultimo_precio, ultimo_precio_ars, submarket").order("simbolo",{ascending:!0});if($)throw $;No(Array.isArray(N)?N:[])}catch(N){console.error("Error fetching activos:",N.message)}},En=async()=>{try{const{data:N,error:$}=await ue.from("brokers").select("id, nombre, descripcion, cuenta_comitente").eq("user_id",e.id).order("nombre",{ascending:!0});if($)throw $;b(N||[])}catch(N){console.error("Error fetching brokers:",N.message)}},Bn=async()=>{try{const{data:N,error:$}=await ue.from("tipos_cambio").select("fecha, tasa").order("fecha",{ascending:!0});if($)throw $;y(Array.isArray(N)?N:[])}catch(N){console.error("Error fetching tipos de cambio:",N.message)}},hi=N=>{q(null),fe({activo_id:"",tipo_operacion:N,cantidad:"",precio_unitario:"",fecha:new Date().toISOString().split("T")[0],moneda:"ARS",broker_id:""}),et(0),H(!0)},Wn=N=>{const{name:$,value:J}=N.target;fe(te=>({...te,[$]:J}))},Co=N=>{q(N),fe({activo_id:N.activo_id,tipo_operacion:N.tipo_operacion,cantidad:N.cantidad,precio_unitario:N.precio_unitario,fecha:N.fecha,moneda:N.moneda,broker_id:N.broker_id||""});const J=qn(f,we,je).holdings[N.activo_id]?.brokers[N.broker_id]?.cantidad||0;et(J),H(!0)},Eo=async N=>{N.preventDefault();try{if(!G.activo_id||!G.cantidad||!G.precio_unitario||!G.broker_id){alert("Por favor, completa todos los campos obligatorios, incluyendo el brker.");return}if(G.tipo_operacion==="venta"){const Re=qn(f,we,je).holdings[G.activo_id]?.brokers[G.broker_id]?.cantidad||0;if(parseFloat(G.cantidad)>Re){alert("No puedes vender una cantidad mayor a la que posees en este brker.");return}}if((G.moneda!=="ARS"||A==="ARS")&&G.fecha&&Vn(G.fecha)===0){alert("No se puede guardar la transaccin. No hay tipo de cambio cargado para la fecha seleccionada. Por favor, elige otra fecha o carga el tipo de cambio para esa fecha.");return}const J={activo_id:G.activo_id,tipo_operacion:G.tipo_operacion,cantidad:parseFloat(G.cantidad),precio_unitario:parseFloat(G.precio_unitario),fecha:G.fecha,moneda:G.moneda,portafolio_id:Qe,broker_id:G.broker_id};let te=null;if(z){const{error:ge}=await ue.from("transacciones").update(J).eq("id",z.id);te=ge}else{const{error:ge}=await ue.from("transacciones").insert([J]);te=ge}if(te)throw te;H(!1),q(null),fe({activo_id:"",tipo_operacion:"compra",cantidad:"",precio_unitario:"",fecha:new Date().toISOString().split("T")[0],moneda:"ARS",broker_id:""}),hr()}catch($){console.error("Error al guardar la transaccin:",$.message),alert("Error al guardar la transaccin: "+$.message)}},Ao=async N=>{if(window.confirm("Ests seguro de que quieres eliminar esta transaccin?"))try{const{error:$}=await ue.from("transacciones").delete().eq("id",N);if($)throw $;hr()}catch($){console.error("Error deleting transaction:",$.message),alert("Error al eliminar la transaccin.")}},Hn=N=>{R(N)},Vn=N=>{const $=x.find(J=>J.fecha===N);return $?$.tasa:0},An=(N,$,J,te)=>{if($===J)return N;const ge=Vn(te);return ge===0?0:$==="ARS"&&J==="USD"?N/ge:$==="USD"&&J==="ARS"?N*ge:N},qn=(N,$="todos",J="todos")=>{const te=N.filter(He=>{const Ae=$==="todos"||He.broker_id===$,xt=J==="todos"||He.activos&&He.activos.submarket===J;return Ae&&xt}),ge={};te.sort((He,Ae)=>new Date(He.fecha)-new Date(Ae.fecha)),te.forEach(He=>{const Ae=He.activo_id;ge[Ae]||(ge[Ae]={cantidad:0,costo_total_ars:0,costo_total_usd:0,activoInfo:He.activos,brokers:{},compras:[]});const xt=parseFloat(He.cantidad),Xn=parseFloat(He.precio_unitario),vs=xt*Xn,yt=He.activos?.tipo?.toLowerCase()==="bono",Fe=An(vs,He.moneda,"ARS",He.fecha),yi=An(vs,He.moneda,"USD",He.fecha),ws=He.broker_id;if(ge[Ae].brokers[ws]||(ge[Ae].brokers[ws]={cantidad:0,costo_total_ars:0,costo_total_usd:0}),He.tipo_operacion==="compra"){const Yn=yt?Fe/100/xt:Fe/xt,mr=yt?yi/100/xt:yi/xt;ge[Ae].compras.push({id:He.id,cantidad_restante:xt,costo_unitario_ars:Yn,costo_unitario_usd:mr,broker_id:ws})}else if(He.tipo_operacion==="venta"){let Yn=xt;for(let mr=0;mr<ge[Ae].compras.length&&Yn>0;mr++){const bs=ge[Ae].compras[mr];if(bs.cantidad_restante>0){const vi=Math.min(Yn,bs.cantidad_restante);bs.cantidad_restante-=vi,Yn-=vi}}}});for(const He in ge){const Ae=ge[He];Ae.cantidad=0,Ae.costo_total_ars=0,Ae.costo_total_usd=0;for(const yt in Ae.brokers)Ae.brokers[yt].cantidad=0,Ae.brokers[yt].costo_total_ars=0,Ae.brokers[yt].costo_total_usd=0;Ae.compras.forEach(yt=>{const Fe=yt.cantidad_restante;Fe>0&&(Ae.cantidad+=Fe,Ae.brokers[yt.broker_id].cantidad+=Fe,Ae.costo_total_ars+=Fe*yt.costo_unitario_ars,Ae.costo_total_usd+=Fe*yt.costo_unitario_usd,Ae.brokers[yt.broker_id].costo_total_ars+=Fe*yt.costo_unitario_ars,Ae.brokers[yt.broker_id].costo_total_usd+=Fe*yt.costo_unitario_usd)});const xt=Ae.activoInfo?.tipo?.toLowerCase()==="bono",Xn=Ae.cantidad>0?xt?Ae.cantidad*Ae.activoInfo.ultimo_precio_ars/100:Ae.cantidad*Ae.activoInfo.ultimo_precio_ars:0,vs=Ae.cantidad>0?xt?Ae.cantidad*Ae.activoInfo.ultimo_precio/100:Ae.cantidad*Ae.activoInfo.ultimo_precio:0;Ae.valor_actual_ars=Xn,Ae.valor_actual_usd=vs}let Re=0,$e=0,Oe=0,Me=0;for(const He in ge){const Ae=ge[He];Re+=Ae.valor_actual_ars,$e+=Ae.valor_actual_usd,Oe+=Ae.costo_total_ars,Me+=Ae.costo_total_usd}const Ve=Re-Oe,ut=Oe>0?Ve/Oe*100:0,dt=$e-Me,an=Me>0?dt/Me*100:0;return{valorActualArs:Re,valorActualUsd:$e,costoTotalArs:Oe,costoTotalUsd:Me,rendimientoMontoArs:Ve,rendimientoPorcentajeArs:ut,rendimientoMontoUsd:dt,rendimientoPorcentajeUsd:an,holdings:ge}},on=(N,$)=>{const J=N.activos?.tipo?.toLowerCase()==="bono";let te=N.cantidad*N.precio_unitario;return J&&(te=te/100),An(te,N.moneda,$,N.fecha)},Kn=(N,$)=>{const J=N.activos?.tipo?.toLowerCase()==="bono";let te=N.precio_unitario;return J&&(te=te/100),An(te,N.moneda,$,N.fecha)},Tn=N=>{if(!N)return"";const[$,J,te]=N.split("-");return`${te}/${J}/${$}`},xs=N=>{const $=v.find(J=>J.id===N);return $?$.nombre:"N/A"},mt=qn(f,we,je),fi=async()=>{if(!ne){alert("La librera de exportacin a Excel an no ha cargado.");return}const N=f.filter($=>$.tipo_operacion==="compra").sort(($,J)=>new Date($.fecha)-new Date(J.fecha));if(N.length===0){alert("No hay transacciones de compra para exportar.");return}pe(!0);try{const $=["Activo","Brker","Fecha","Nominales",`Precio de Compra (${O})`,`Precio Actual (${O})`,`Costo Total (${O})`,`Valor Actual Total (${O})`,`Rendimiento (${O})`,"Rendimiento (%)"],J=N.map($e=>{const Oe=on($e,O),Me=$e.activos?.tipo?.toLowerCase()==="bono",Ve=O==="ARS"?$e.activos.ultimo_precio_ars:$e.activos.ultimo_precio,ut=(Me?Ve/100:Ve)*$e.cantidad,dt=ut-Oe,an=Oe>0?ut/Oe-1:0,He=Kn($e,O),Ae=Me?Ve/100:Ve;return[{v:`${$e.activos.nombre} (${$e.activos.simbolo})`,t:"s"},{v:xs($e.broker_id),t:"s"},{v:Tn($e.fecha),t:"s"},{v:parseFloat($e.cantidad),t:"n"},{v:parseFloat(He),t:"n",z:O==="USD"?"#,##0.0000":"#,##0.00"},{v:parseFloat(Ae),t:"n",z:O==="USD"?"#,##0.0000":"#,##0.00"},{v:parseFloat(Oe),t:"n",z:"#,##0.00"},{v:parseFloat(ut),t:"n",z:"#,##0.00"},{v:parseFloat(dt),t:"n",z:"#,##0.00"},{v:parseFloat(an),t:"n"}]}),te=window.XLSX.utils.aoa_to_sheet([]);window.XLSX.utils.sheet_add_aoa(te,[$]),window.XLSX.utils.sheet_add_aoa(te,J,{origin:"A2"}),te["!cols"]=[{wch:25},{wch:20},{wch:12},{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:20},{wch:20}];const ge=window.XLSX.utils.book_new();window.XLSX.utils.book_append_sheet(ge,te,"Detalle de Compras");const Re=`Detalle_Tenencia_${o.name.replace(/\s/g,"_")}.xlsx`;window.XLSX.writeFile(ge,Re)}catch($){console.error("Error al exportar a Excel:",$),alert("Error al exportar a Excel. Intntalo de nuevo.")}finally{await new Promise($=>setTimeout($,100)),pe(!1)}},wl=async()=>{if(!ne){alert("La librera de exportacin a Excel an no ha cargado.");return}if(f.length===0){alert("No hay transacciones para exportar.");return}pe(!0);try{const N=["Activo","Brker","Fecha","Tipo","Nominales","Moneda de Origen","Tipo de Cambio",`Precio Unitario (${A})`,`Costo Total (${A})`],$=mi.map(Re=>{const $e=Kn(Re,A),Oe=on(Re,A);return[{v:`${Re.activos.nombre} (${Re.activos.simbolo})`,t:"s"},{v:Re.brokers?.nombre||"-",t:"s"},{v:Tn(Re.fecha),t:"s"},{v:Re.tipo_operacion.toUpperCase(),t:"s"},{v:parseFloat(Re.cantidad),t:"n"},{v:Re.moneda,t:"s"},{v:Vn(Re.fecha)>0?Vn(Re.fecha).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2}):"-",t:"n"},{v:parseFloat($e),t:"n",z:"#,##0.00"},{v:parseFloat(Oe),t:"n",z:"#,##0.00"}]}),J=window.XLSX.utils.aoa_to_sheet([]);window.XLSX.utils.sheet_add_aoa(J,[N]),window.XLSX.utils.sheet_add_aoa(J,$,{origin:"A2"}),J["!cols"]=[{wch:25},{wch:20},{wch:12},{wch:10},{wch:15},{wch:15},{wch:15},{wch:20},{wch:20}];const te=window.XLSX.utils.book_new();window.XLSX.utils.book_append_sheet(te,J,"Detalle de Transacciones");const ge=`Detalle_Transacciones_${o.name.replace(/\s/g,"_")}.xlsx`;window.XLSX.writeFile(te,ge)}catch(N){console.error("Error al exportar a Excel:",N),alert("Error al exportar a Excel. Intntalo de nuevo.")}finally{await new Promise(N=>setTimeout(N,100)),pe(!1)}};[...f].sort((N,$)=>{const J=N.activos.simbolo.toLowerCase(),te=$.activos.simbolo.toLowerCase();if(J<te)return-1;if(J>te)return 1;const ge=new Date(N.fecha);return new Date($.fecha)-ge});const Gn=N=>{let $="ascending";W.key===N&&W.direction==="ascending"&&($="descending"),X({key:N,direction:$})},Br=N=>{let $="ascending";V.key===N&&V.direction==="ascending"&&($="descending"),C({key:N,direction:$})},mi=(()=>{const N=[...f];return W.key!==null&&N.sort(($,J)=>{let te,ge;return W.key==="activo"?(te=$.activos.simbolo.toLowerCase(),ge=J.activos.simbolo.toLowerCase()):W.key==="fecha"?(te=new Date($.fecha),ge=new Date(J.fecha)):W.key==="tipo_operacion"?(te=$.tipo_operacion.toLowerCase(),ge=J.tipo_operacion.toLowerCase()):W.key==="cantidad"?(te=parseFloat($.cantidad),ge=parseFloat(J.cantidad)):W.key==="moneda"?(te=$.moneda.toLowerCase(),ge=J.moneda.toLowerCase()):W.key==="precio_unitario"?(te=Kn($,A),ge=Kn(J,A)):W.key==="costo_total"&&(te=on($,A),ge=on(J,A)),te<ge?W.direction==="ascending"?-1:1:te>ge?W.direction==="ascending"?1:-1:0}),N})(),Wr=(()=>{const $=Object.values(qn(f,we,je).holdings).filter(J=>J.cantidad>0);return V.key!==null&&$.sort((J,te)=>{let ge,Re;switch(V.key){case"activo":ge=J.activoInfo.simbolo.toLowerCase(),Re=te.activoInfo.simbolo.toLowerCase();break;case"cantidad":ge=parseFloat(J.cantidad),Re=parseFloat(te.cantidad);break;case"costo_total":ge=O==="ARS"?J.costo_total_ars:J.costo_total_usd,Re=O==="ARS"?te.costo_total_ars:te.costo_total_usd;break;case"valor_actual":const $e=J.activoInfo?.tipo?.toLowerCase()==="bono",Oe=te.activoInfo?.tipo?.toLowerCase()==="bono";ge=O==="ARS"?J.activoInfo.ultimo_precio_ars*J.cantidad/($e?100:1):($e?J.activoInfo.ultimo_precio/100:J.activoInfo.ultimo_precio)*J.cantidad,Re=O==="ARS"?te.activoInfo.ultimo_precio_ars*te.cantidad/(Oe?100:1):(Oe?te.activoInfo.ultimo_precio/100:te.activoInfo.ultimo_precio)*te.cantidad;break;case"rendimiento":const Me=O==="ARS"?J.costo_total_ars:J.costo_total_usd,Ve=O==="ARS"?te.costo_total_ars:te.costo_total_usd,ut=O==="ARS"?(J.activoInfo?.tipo?.toLowerCase()==="bono",J.activoInfo.ultimo_precio_ars*J.cantidad/(J.activoInfo?.tipo?.toLowerCase()==="bono"?100:1)):(J.activoInfo?.tipo?.toLowerCase()==="bono"?J.activoInfo.ultimo_precio/100:J.activoInfo.ultimo_precio)*J.cantidad,dt=O==="ARS"?(te.activoInfo?.tipo?.toLowerCase()==="bono",te.activoInfo.ultimo_precio_ars*te.cantidad/(te.activoInfo?.tipo?.toLowerCase()==="bono"?100:1)):(te.activoInfo?.tipo?.toLowerCase()==="bono"?te.activoInfo.ultimo_precio/100:te.activoInfo.ultimo_precio)*te.cantidad;ge=ut-Me,Re=dt-Ve;break;default:return 0}return ge<Re?V.direction==="ascending"?-1:1:ge>Re?V.direction==="ascending"?1:-1:0}),$})(),pi=(N=null)=>{N?(ee(N),I({nombre:N.nombre,descripcion:N.descripcion||"",cuenta_comitente:N.cuenta_comitente||""})):(ee(null),I({nombre:"",descripcion:"",cuenta_comitente:""})),de(""),be(!0)},gi=()=>{be(!1),ee(null),I({nombre:"",descripcion:"",cuenta_comitente:""}),de("")},To=N=>{Ee(N),xe(!0)},Hr=()=>{Ee(null),xe(!1)},xi=N=>{I({...oe,[N.target.name]:N.target.value})},_l=async N=>{if(N.preventDefault(),!oe.nombre){de("El nombre del brker es obligatorio.");return}try{let $=null;if(Z){const{error:J}=await ue.from("brokers").update({nombre:oe.nombre,descripcion:oe.descripcion,cuenta_comitente:oe.cuenta_comitente}).eq("id",Z.id).eq("user_id",e.id);$=J}else{const{error:J}=await ue.from("brokers").insert({user_id:e.id,nombre:oe.nombre,descripcion:oe.descripcion,cuenta_comitente:oe.cuenta_comitente});$=J}if($)throw $;await En(),gi()}catch($){console.error("Error al guardar:",$.message),de("Error al guardar: "+$.message)}},ot=async()=>{if(re)try{const{data:N,error:$}=await ue.from("transacciones").select("id").eq("broker_id",re.id);if($)throw $;if(N.length>0){alert("No se puede eliminar este brker porque tiene transacciones asociadas. Elimina las transacciones primero."),Hr();return}const{error:J}=await ue.from("brokers").delete().eq("id",re.id).eq("user_id",e.id);if(J)throw J;await En(),Hr()}catch(N){console.error("Error al eliminar:",N.message),D("Error al eliminar: "+N.message),Hr()}},kl={labels:Wr.map(N=>`${N.activoInfo.simbolo} (${N.activoInfo.nombre})`),datasets:[{label:"Distribucin por Activo",data:Wr.map(N=>{const $=N.activoInfo?.tipo?.toLowerCase()==="bono";return O==="ARS"?$?N.cantidad*N.activoInfo.ultimo_precio_ars/100:N.cantidad*N.activoInfo.ultimo_precio_ars:$?N.cantidad*N.activoInfo.ultimo_precio/100:N.cantidad*N.activoInfo.ultimo_precio}),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#E7E9ED","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#E7E9ED","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#E7E9ED","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#E7E9ED"],hoverOffset:4}]},ys=Wr.reduce((N,$)=>{const J=$.activoInfo.submarket||"Sin submercado",te=$.activoInfo?.tipo?.toLowerCase()==="bono",ge=O==="ARS"?te?$.cantidad*$.activoInfo.ultimo_precio_ars/100:$.cantidad*$.activoInfo.ultimo_precio_ars:te?$.cantidad*$.activoInfo.ultimo_precio/100:$.cantidad*$.activoInfo.ultimo_precio;return N[J]?N[J]+=ge:N[J]=ge,N},{}),Po={labels:Object.keys(ys),datasets:[{label:"Distribucin por Submercado",data:Object.values(ys),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#E7E9ED","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#E7E9ED","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#E7E9ED","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#E7E9ED"],hoverOffset:4}]},Vr={id:"centerText",beforeDraw(N){const{ctx:$,chartArea:J}=N;$.restore();const te=O==="ARS"?mt.valorActualArs:mt.valorActualUsd;let ge;Math.abs(te)>=1e3?ge=`${(te/1e3).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})} K`:ge=te.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2});const Re=`${O} Total`,$e=ge,Oe={x:J.left+J.width/2,y:J.top+J.height/2};$.textAlign="center",$.textBaseline="middle";const Me="16px sans-serif",Ve="22px sans-serif";$.font=Me;const ut=$.measureText(Re),dt=ut.actualBoundingBoxAscent+ut.actualBoundingBoxDescent;$.font=Ve;const an=$.measureText($e),He=an.actualBoundingBoxAscent+an.actualBoundingBoxDescent,Ae=dt+8+He,xt=Oe.y-Ae/2;$.font=Me,$.fillStyle="#6b7280",$.fillText(Re,Oe.x,xt+dt/2),$.font=Ve,$.fillStyle="#1f2937",$.fillText($e,Oe.x,xt+dt+8+He/2),$.save()}},jl={cutout:"70%",plugins:{legend:{position:"right",labels:{boxWidth:12}},tooltip:{callbacks:{label:function(N){const $=N.label||"",J=N.parsed||0,te=N.dataset.data.reduce((Re,$e)=>Re+$e,0),ge=te>0?(J/te*100).toFixed(2)+"%":"0.00%";return`${$}: ${J.toLocaleString("es-AR",{style:"currency",currency:O})} (${ge})`}}}}},Do={cutout:"70%",plugins:{legend:{position:"right",labels:{boxWidth:12}},tooltip:{callbacks:{label:function(N){const $=N.label||"",J=N.parsed||0,te=N.dataset.data.reduce((Re,$e)=>Re+$e,0),ge=te>0?(J/te*100).toFixed(2)+"%":"0.00%";return`${$}: ${J.toLocaleString("es-AR",{style:"currency",currency:O})} (${ge})`}}}}};return _?u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mt-4",children:"Detalle del Portafolio"})]}),u.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-500 border-t-transparent"})})})]}):k||!o?u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mt-4",children:"Detalle del Portafolio"})]}),u.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md shadow-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Error al cargar el portafolio"}),u.jsxs("p",{className:"text-sm",children:["Detalles: ",u.jsx("span",{className:"font-mono text-red-800",children:k?.message||k||"No se encontr el portafolio."})]})]})})]}):u.jsxs(u.Fragment,{children:[u.jsxs("header",{className:"bg-white shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("img",{src:sn,alt:"Gestin Patrimonial Icono",className:"h-8 w-8 object-contain"}),u.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Gestin Patrimonial"})]}),Jt.valor&&u.jsxs("div",{className:"flex items-center space-x-2 py-2 px-4 bg-white rounded-lg shadow-sm border border-gray-200 text-sm font-semibold",children:[u.jsx("span",{className:"text-gray-600",children:"Dlar MEP:"}),u.jsxs("span",{className:"text-gray-800",children:["$",Jt.valor.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),Jt.variacion!==null&&u.jsxs("span",{className:`font-medium flex items-center ${Jt.tendencia==="subida"?"text-green-600":"text-red-600"}`,children:[Jt.tendencia==="subida"?"":"",Math.abs(Jt.variacion).toFixed(2)," (",Jt.porcentaje.toFixed(2),"%)"]})]})]}),u.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 mt-4",children:[u.jsx("label",{htmlFor:"portfolio-selector",className:"sr-only",children:"Seleccionar Cartera"}),u.jsx("select",{id:"portfolio-selector",value:Qe,onChange:N=>$n(N.target.value),className:"text-2xl font-semibold text-gray-800 bg-white border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500 cursor-pointer",children:c.map(N=>u.jsx("option",{value:N.id,children:N.name},N.id))}),u.jsxs("span",{className:"text-lg text-gray-500 ml-4",children:["(",o.description,")"]})]})]}),ze&&u.jsxs("div",{className:`fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-6 py-4 shadow-lg transition-all duration-300 ${ze.type==="success"?"bg-green-100 text-green-700 border-b border-green-200":"bg-red-100 text-red-700 border-b border-red-200"}`,children:[u.jsx("p",{className:"text-sm font-medium",children:ze.text}),u.jsx("button",{onClick:()=>Be(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),u.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[u.jsx("div",{className:"flex justify-start items-center mb-6 sticky top-0 bg-white z-20",children:u.jsxs("div",{className:"flex space-x-4 border-b border-gray-200",children:[u.jsxs("button",{onClick:()=>Hn("resumen"),className:`py-2 px-4 font-medium transition-colors duration-200 flex items-center space-x-2 ${P==="resumen"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:[u.jsx("span",{className:`text-gray-500 ${P==="resumen"?"text-indigo-600":"group-hover:text-gray-700"}`,children:ro.resumen}),u.jsx("span",{children:"Resumen"})]}),u.jsxs("button",{onClick:()=>Hn("graficos"),className:`py-2 px-4 font-medium transition-colors duration-200 flex items-center space-x-2 ${P==="graficos"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:[u.jsx("span",{className:`text-gray-500 ${P==="graficos"?"text-indigo-600":"group-hover:text-gray-700"}`,children:ro.graficos}),u.jsx("span",{children:"Grficos"})]}),u.jsxs("button",{onClick:()=>Hn("tenencia"),className:`py-2 px-4 font-medium transition-colors duration-200 flex items-center space-x-2 ${P==="tenencia"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:[u.jsx("span",{className:`text-gray-500 ${P==="tenencia"?"text-indigo-600":"group-hover:text-gray-700"}`,children:ro.tenencia}),u.jsx("span",{children:"Tenencia"})]}),u.jsxs("button",{onClick:()=>Hn("transacciones"),className:`py-2 px-4 font-medium transition-colors duration-200 flex items-center space-x-2 ${P==="transacciones"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:[u.jsx("span",{className:`text-gray-500 ${P==="transacciones"?"text-indigo-600":"group-hover:text-gray-700"}`,children:ro.transacciones}),u.jsx("span",{children:"Transacciones"})]}),u.jsxs("button",{onClick:()=>Hn("brokers"),className:`py-2 px-4 font-medium transition-colors duration-200 flex items-center space-x-2 ${P==="brokers"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:[u.jsx("span",{className:`text-gray-500 ${P==="brokers"?"text-indigo-600":"group-hover:text-gray-700"}`,children:ro.brokers}),u.jsx("span",{children:"Brkers"})]})]})}),P==="resumen"&&u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Resumen del Portafolio"}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:ui,disabled:jt,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center space-x-2 ${jt?"bg-gray-400 cursor-not-allowed text-gray-200":"bg-gray-600 hover:bg-gray-700 text-white"}`,children:[jt?u.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.962l2-2.671z"})]}):u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.03M4.032 9.417l2.687-2.685m-2.687 2.685a8.25 8.25 0 0113.803-3.03L21.03 3.485c.036.002.071.006.106.01L2.985 19.644z"})}),u.jsx("span",{children:"Actualizar precios"})]}),u.jsxs("div",{className:"bg-gray-200 rounded-full p-1 flex items-center",children:[u.jsx("button",{onClick:()=>he("ARS"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 ${O==="ARS"?"bg-white text-gray-800 shadow-sm":"text-gray-500"}`,children:"ARS"}),u.jsx("button",{onClick:()=>he("USD"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 ${O==="USD"?"bg-white text-gray-800 shadow-sm":"text-gray-500"}`,children:"USD"})]})]})]}),u.jsx("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-6 items-end justify-between",children:u.jsxs("div",{className:"flex space-x-4 w-full md:w-auto",children:[u.jsxs("div",{className:"w-1/2 md:w-auto",children:[u.jsx("label",{htmlFor:"broker-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brker"}),u.jsxs("select",{id:"broker-filter",value:we,onChange:N=>ke(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[u.jsx("option",{value:"todos",children:"Todos"}),v.map(N=>u.jsx("option",{value:N.id,children:N.nombre},N.id))]})]}),u.jsxs("div",{className:"w-1/2 md:w-auto",children:[u.jsx("label",{htmlFor:"submarket-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Submercado"}),u.jsxs("select",{id:"submarket-filter",value:je,onChange:N=>De(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[u.jsx("option",{value:"todos",children:"Todos"}),$t.map(N=>u.jsx("option",{value:N,children:N},N))]})]})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Valor Actual"}),u.jsx("p",{className:"text-xl font-bold text-gray-800",children:O==="ARS"?`$${mt.valorActualArs.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`$${mt.valorActualUsd.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Costo Total"}),u.jsx("p",{className:"text-xl font-bold text-gray-800",children:O==="ARS"?`$${mt.costoTotalArs.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`$${mt.costoTotalUsd.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Rendimiento"}),u.jsx("p",{className:`text-xl font-bold ${O==="ARS"?mt.rendimientoMontoArs>=0?"text-green-600":"text-red-600":mt.rendimientoMontoUsd>=0?"text-green-600":"text-red-600"}`,children:O==="ARS"?`$${mt.rendimientoMontoArs.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}`:`$${mt.rendimientoMontoUsd.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}),u.jsx("p",{className:`text-sm font-medium ${O==="ARS"?mt.rendimientoMontoArs>=0?"text-green-600":"text-red-600":mt.rendimientoMontoUsd>=0?"text-green-600":"text-red-600"}`,children:O==="ARS"?`${mt.rendimientoPorcentajeArs.toFixed(2)}%`:`${mt.rendimientoPorcentajeUsd.toFixed(2)}%`})]})]}),u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-8 mb-4",children:"Desempeo por Activo"}),u.jsx("div",{className:"overflow-y-auto max-h-[500px]",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0 z-30",children:u.jsxs("tr",{children:[u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Br("activo"),children:["Activo",V.key==="activo"&&u.jsx("span",{className:"ml-1",children:V.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Br("cantidad"),children:["Cantidad",V.key==="cantidad"&&u.jsx("span",{className:"ml-1",children:V.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Br("costo_total"),children:["Costo Total",V.key==="costo_total"&&u.jsx("span",{className:"ml-1",children:V.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Br("valor_actual"),children:["Valor Actual",V.key==="valor_actual"&&u.jsx("span",{className:"ml-1",children:V.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Br("rendimiento"),children:["Rendimiento",V.key==="rendimiento"&&u.jsx("span",{className:"ml-1",children:V.direction==="ascending"?"":""})]})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Wr.map((N,$)=>{const J=O==="ARS"?N.costo_total_ars:N.costo_total_usd;N.cantidad;const te=N.activoInfo,ge=te?.tipo?.toLowerCase()==="bono",Re=ge?N.cantidad*te.ultimo_precio_ars/100:N.cantidad*te.ultimo_precio_ars,$e=ge?N.cantidad*te.ultimo_precio/100:N.cantidad*te.ultimo_precio,Oe=O==="ARS"?Re:$e,Me=Oe-J,Ve=J>0?(Oe/J-1)*100:0;return N.cantidad===0?null:u.jsxs("tr",{children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:[N.activoInfo.nombre," (",N.activoInfo.simbolo,")"]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:N.cantidad.toLocaleString("es-AR")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-right",children:J.toLocaleString("es-AR",{style:"currency",currency:O})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-right",children:Oe.toLocaleString("es-AR",{style:"currency",currency:O})}),u.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-semibold text-right ${Me>=0?"text-green-600":"text-red-600"}`,children:[Me.toLocaleString("es-AR",{style:"currency",currency:O}),u.jsxs("p",{className:"text-xs font-medium",children:[Ve.toFixed(2),"%"]})]})]},$)})})]})})]}),P==="graficos"&&u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Grficos del Portafolio"}),u.jsxs("div",{className:"bg-gray-200 rounded-full p-1 flex items-center",children:[u.jsx("button",{onClick:()=>he("ARS"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 ${O==="ARS"?"bg-white text-gray-800 shadow-sm":"text-gray-500"}`,children:"ARS"}),u.jsx("button",{onClick:()=>he("USD"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 ${O==="USD"?"bg-white text-gray-800 shadow-sm":"text-gray-500"}`,children:"USD"})]})]}),u.jsxs("div",{className:"flex flex-col md:flex-row space-y-8 md:space-y-0 md:space-x-8",children:[u.jsxs("div",{className:"flex-1 bg-gray-50 p-6 rounded-lg shadow-inner flex flex-col items-center relative",children:[u.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Distribucin por Activo (",O,")"]}),u.jsx("div",{className:"w-full max-w-lg relative",children:u.jsx(hp,{data:kl,options:jl,plugins:[Vr]})},`asset-chart-${O}`)]}),u.jsxs("div",{className:"flex-1 bg-gray-50 p-6 rounded-lg shadow-inner flex flex-col items-center relative",children:[u.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Distribucin por Submercado (",O,")"]}),u.jsx("div",{className:"w-full max-w-lg relative",children:u.jsx(hp,{data:Po,options:Do,plugins:[Vr]})},`submarket-chart-${O}`)]})]}),Wr.length===0&&u.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg mt-6",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.518A8.96 8.96 0 0112 2.25c3.07 0 5.825 1.488 7.5 3.75a8.96 8.96 0 01-3.75 5.25c-.274-.294-.582-.55-.916-.77A5.992 5.992 0 0012 8.25a5.992 5.992 0 00-4.043 1.455c-.334.22-.642.476-.916.77a8.96 8.96 0 01-3.75-5.25c1.675-2.262 4.43-3.75 7.5-3.75zm1.53 10.96a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zm0 10.5a1.5 1.5 0 110-3 1.5 1.5 0 010 3z",clipRule:"evenodd"})})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"No hay datos para mostrar"}),u.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:u.jsx("p",{children:"Para ver la distribucin de tu portafolio, necesitas tener activos con un valor actual mayor a cero."})})]})]})})]}),P==="tenencia"&&u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Detalle de Tenencia"}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"bg-gray-200 rounded-full p-1 flex items-center",children:[u.jsx("button",{onClick:()=>he("ARS"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 ${O==="ARS"?"bg-white text-gray-800 shadow-sm":"text-gray-500"}`,children:"ARS"}),u.jsx("button",{onClick:()=>he("USD"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 ${O==="USD"?"bg-white text-gray-800 shadow-sm":"text-gray-500"}`,children:"USD"})]}),u.jsx("button",{onClick:fi,disabled:me||!ne||f.length===0,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center space-x-2 ${me||!ne||f.length===0?"bg-gray-400 cursor-not-allowed text-gray-200":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:me?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.962l2-2.671z"})]}),u.jsx("span",{children:"Generando Excel..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),u.jsx("span",{children:"Exportar a Excel"})]})})]})]}),u.jsx("div",{className:"overflow-y-auto max-h-[500px]",children:Object.values(mt.holdings).map(N=>{if(N.cantidad<=0)return null;const $=N.activoInfo,J=f.filter(Me=>Me.activo_id===$.id&&Me.tipo_operacion==="compra").sort((Me,Ve)=>new Date(Me.fecha)-new Date(Ve.fecha));if(J.length===0)return null;const te=O==="ARS"?N.costo_total_ars:N.costo_total_usd,ge=$?.tipo?.toLowerCase()==="bono",Re=O==="ARS"?$.ultimo_precio_ars*N.cantidad/(ge?100:1):(ge?$.ultimo_precio/100:$.ultimo_precio)*N.cantidad,$e=Re-te,Oe=te>0?(Re/te-1)*100:0;return u.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("h4",{className:"text-md font-semibold text-gray-800",children:[$.nombre," (",$.simbolo,")"]}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Cantidad Total: ",N.cantidad.toLocaleString("es-AR")]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[u.jsxs("div",{className:"bg-white rounded-lg p-3",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Costo Total"}),u.jsx("p",{className:"text-lg font-bold text-gray-800",children:te.toLocaleString("es-AR",{style:"currency",currency:O})})]}),u.jsxs("div",{className:"bg-white rounded-lg p-3",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Valor Actual"}),u.jsx("p",{className:"text-lg font-bold text-gray-800",children:Re.toLocaleString("es-AR",{style:"currency",currency:O})})]}),u.jsxs("div",{className:"bg-white rounded-lg p-3",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Rendimiento"}),u.jsx("p",{className:`text-lg font-bold ${$e>=0?"text-green-600":"text-red-600"}`,children:$e.toLocaleString("es-AR",{style:"currency",currency:O})}),u.jsxs("p",{className:`text-xs font-medium ${$e>=0?"text-green-600":"text-red-600"}`,children:[Oe.toFixed(2),"%"]})]})]}),u.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Detalle de Compras:"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-100 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nominales"}),u.jsxs("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Precio Unitario (",O,")"]}),u.jsxs("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Costo Total (",O,")"]}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Actual"}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rendimiento"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(Me=>{const Ve=on(Me,O),ut=Me.activos?.tipo?.toLowerCase()==="bono",dt=O==="ARS"?Me.activos.ultimo_precio_ars:Me.activos.ultimo_precio,an=(ut?dt/100:dt)*Me.cantidad,He=an-Ve,Ae=Ve>0?(an/Ve-1)*100:0;return u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600",children:Tn(Me.fecha)}),u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600 text-right",children:Me.cantidad.toLocaleString("es-AR")}),u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-800 text-right",children:O==="USD"?`$${Kn(Me,O).toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:4})}`:`$${Kn(Me,O).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}`}),u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-800 text-right",children:Ve.toLocaleString("es-AR",{style:"currency",currency:O})}),u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-800 text-right",children:an.toLocaleString("es-AR",{style:"currency",currency:O})}),u.jsxs("td",{className:`px-4 py-2 whitespace-nowrap text-sm font-semibold text-right ${He>=0?"text-green-600":"text-red-600"}`,children:[He.toLocaleString("es-AR",{style:"currency",currency:O}),u.jsxs("p",{className:"text-xs font-medium",children:[Ae.toFixed(2),"%"]})]})]},Me.id)})})]})})]},$.id)})})]}),P==="transacciones"&&u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Transacciones"}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"bg-gray-200 rounded-full p-1 flex items-center",children:[u.jsx("button",{onClick:()=>Y("ARS"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 ${A==="ARS"?"bg-white text-gray-800 shadow-sm":"text-gray-500"}`,children:"ARS"}),u.jsx("button",{onClick:()=>Y("USD"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 ${A==="USD"?"bg-white text-gray-800 shadow-sm":"text-gray-500"}`,children:"USD"})]}),u.jsx("button",{onClick:wl,disabled:me||!ne||f.length===0,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center space-x-2 ${me||!ne||f.length===0?"bg-gray-400 cursor-not-allowed text-gray-200":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:me?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.962l2-2.671z"})]}),u.jsx("span",{children:"Generando Excel..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),u.jsx("span",{children:"Exportar a Excel"})]})}),u.jsx("button",{onClick:()=>hi("compra"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"+ Aadir Compra"}),u.jsx("button",{onClick:()=>hi("venta"),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"+ Aadir Venta"})]})]}),f.length>0?u.jsx("div",{className:"overflow-y-auto max-h-[500px]",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0 z-30",children:u.jsxs("tr",{children:[u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Gn("activo"),children:["Activo",W.key==="activo"&&u.jsx("span",{className:"ml-1",children:W.direction==="ascending"?"":""})]}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brker"}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Gn("fecha"),children:["Fecha",W.key==="fecha"&&u.jsx("span",{className:"ml-1",children:W.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Gn("tipo_operacion"),children:["Tipo",W.key==="tipo_operacion"&&u.jsx("span",{className:"ml-1",children:W.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Gn("cantidad"),children:["Nominales",W.key==="cantidad"&&u.jsx("span",{className:"ml-1",children:W.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Gn("moneda"),children:["Moneda de Origen",W.key==="moneda"&&u.jsx("span",{className:"ml-1",children:W.direction==="ascending"?"":""})]}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo de Cambio"}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Gn("precio_unitario"),children:["Precio Unitario (",A,")",W.key==="precio_unitario"&&u.jsx("span",{className:"ml-1",children:W.direction==="ascending"?"":""})]}),u.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>Gn("costo_total"),children:["Costo Total (",A,")",W.key==="costo_total"&&u.jsx("span",{className:"ml-1",children:W.direction==="ascending"?"":""})]}),u.jsx("th",{className:"relative px-6 py-3",children:u.jsx("span",{className:"sr-only",children:"Acciones"})})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:mi.map(N=>u.jsxs("tr",{children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:[N.activos.nombre," (",N.activos.simbolo,")"]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:N.brokers?.nombre||"-"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:Tn(N.fecha)}),u.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${N.tipo_operacion==="compra"?"text-green-600":"text-red-600"}`,children:N.tipo_operacion.toUpperCase()}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-right",children:N.cantidad.toLocaleString("es-AR")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:N.moneda}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-right",children:Vn(N.fecha)>0?Vn(N.fecha).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2}):"-"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-right",children:Kn(N,A).toLocaleString("es-AR",{style:"currency",currency:A})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800 text-right",children:on(N,A).toLocaleString("es-AR",{style:"currency",currency:A})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[u.jsx("button",{onClick:()=>Co(N),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Editar"}),u.jsx("button",{onClick:()=>Ao(N.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},N.id))})]})}):u.jsx("p",{className:"text-center text-gray-500",children:"An no hay transacciones para este portafolio."})]}),P==="brokers"&&u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Registros de Brkers"}),u.jsxs("button",{onClick:()=>pi(),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-150 flex items-center space-x-2",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),u.jsx("span",{children:"Nuevo Brker"})]})]}),u.jsx("div",{className:"overflow-y-auto max-h-[500px]",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cuenta Comitente"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripcin"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.length>0?v.map(N=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:N.nombre}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:N.cuenta_comitente}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:N.descripcion}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[u.jsx("button",{onClick:()=>pi(N),className:"text-indigo-600 hover:text-indigo-800 mr-4 transition-colors duration-150",children:"Editar"}),u.jsx("button",{onClick:()=>To(N),className:"text-red-600 hover:text-red-800 transition-colors duration-150",children:"Eliminar"})]})]},N.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No hay brkers registrados."})})})]})})]})]}),U&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:z?"Editar Transaccin":G.tipo_operacion==="compra"?"Aadir Nueva Compra":"Aadir Nueva Venta"}),u.jsxs("form",{onSubmit:Eo,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Activo"}),u.jsxs("select",{name:"activo_id",value:G.activo_id,onChange:Wn,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[u.jsx("option",{value:"",children:"Selecciona un activo"}),Cn.map(N=>u.jsx("option",{value:N.id,children:N.simbolo},N.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brker"}),u.jsxs("select",{name:"broker_id",value:G.broker_id,onChange:Wn,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[u.jsx("option",{value:"",children:"Selecciona un brker"}),v.map(N=>u.jsx("option",{value:N.id,children:N.nombre},N.id))]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cantidad"}),G.tipo_operacion==="venta"&&G.activo_id&&G.broker_id&&u.jsxs("span",{className:"text-xs text-gray-500",children:["Disponible: ",Bt.toLocaleString("es-AR")]})]}),u.jsx("input",{type:"number",name:"cantidad",value:G.cantidad,onChange:Wn,placeholder:"Ej: 100",step:"any",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio Unitario"}),u.jsx("input",{type:"number",name:"precio_unitario",value:G.precio_unitario,onChange:Wn,placeholder:"Ej: 15000",step:"0.01",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),u.jsx("input",{type:"date",name:"fecha",value:G.fecha,onChange:Wn,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda"}),u.jsxs("select",{name:"moneda",value:G.moneda,onChange:Wn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[u.jsx("option",{value:"ARS",children:"ARS"}),u.jsx("option",{value:"USD",children:"USD"})]})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>{H(!1),q(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors",children:z?"Guardar Cambios":"Guardar"})]})]})]})}),K&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-auto",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:Z?"Editar Brker":"Nuevo Brker"}),Q&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-4 text-sm",children:Q}),u.jsxs("form",{onSubmit:_l,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),u.jsx("input",{type:"text",name:"nombre",value:oe.nombre,onChange:xi,placeholder:"Ej: Brubank",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cuenta Comitente"}),u.jsx("input",{type:"text",name:"cuenta_comitente",value:oe.cuenta_comitente,onChange:xi,placeholder:"Ej: 12345678",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin (Opcional)"}),u.jsx("input",{type:"text",name:"descripcion",value:oe.descripcion,onChange:xi,placeholder:"Ej: Brker principal",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[u.jsx("button",{type:"button",onClick:gi,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 transition-colors duration-150",children:Z?"Actualizar":"Guardar"})]})]})]})}),ve&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm mx-auto",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirmar Eliminacin"}),u.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Ests seguro de que deseas eliminar el brker ",u.jsx("span",{className:"font-semibold",children:re?.nombre}),"? Esta accin no se puede deshacer y fallar si hay transacciones asociadas."]}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:Hr,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-150",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:ot,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-150",children:"Eliminar"})]})]})})]})}const pn={dashboard:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 0a2.25 2.25 0 0 0 2.25 2.25h12.75a2.25 2.25 0 0 0 2.25-2.25M3.75 12a2.25 2.25 0 0 1 2.25-2.25h12.75a2.25 2.25 0 0 1 2.25 2.25m-16.5 0v2.25a2.25 2.25 0 0 0 2.25 2.25h12.75a2.25 2.25 0 0 0 2.25-2.25V12"})}),financialStatements:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125a7.5 7.5 0 0 1 15 0m-12.75-3.75h1.5a2.25 2.25 0 0 0 0-4.5h-.75"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 12.75v6.75a3 3 0 0 1-3 3h-.75a3 3 0 0 1-3-3v-6.75h-.75a3.75 3.75 0 0 0-3.75 3.75v1.5c0 2.07 1.68 3.75 3.75 3.75h.75a3.75 3.75 0 0 0 3.75-3.75v-1.5c0-2.07-1.68-3.75-3.75-3.75h-.75a.75.75 0 0 0-.75.75v1.5h.75"})]}),tipoCambio:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 9.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 15.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"})}),rubrosManager:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l6-6 6 6m6 0h-6V3.75A2.25 2.25 0 0 0 16.5 1.5h-.75a.75.75 0 0 0-.75.75v1.5m-6 3.75L3 18.75m0 0l6-6-6 6h18v-6h-6m-12 0v-2.25a2.25 2.25 0 0 0-2.25-2.25h-.75a.75.75 0 0 0-.75.75v1.5m12 3.75L21 9.75M9.75 1.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM15.75 1.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z"})}),conceptsManager:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM15.75 6h-6m1.5 6h6.75M12 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM15.75 12h-6M10.5 18h9.75M10.5 18a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM15.75 18h-6"})}),entradasContables:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.28-8.28Z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.28-8.28Zm-3.75-2.25a.75.75 0 0 0-.75-.75h-.75a.75.75 0 0 0-.75.75v.75a.75.75 0 0 0 .75.75h.75a.75.75 0 0 0 .75-.75v-.75Z"})]}),newDay:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),excelExport:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),activos:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"}),u.jsx("circle",{cx:"12",cy:"12",r:"9"})]}),portfolios:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9v3m18 0v3m-3-3h-3"})}),collapse:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),expand:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})})};function K_({currentView:r,setCurrentView:e,user:t}){const[s,o]=L.useState(!0),a=async()=>{try{const{error:d}=await ue.auth.signOut();if(d)throw d;window.location.reload()}catch(d){console.error("Error al cerrar sesin:",d.message)}},c=[{name:"Dashboard",view:"dashboard",icon:pn.dashboard},{name:"Estados Financieros",view:"estados-financieros",icon:pn.financialStatements},{name:"Tipo de Cambio",view:"tipo-cambio",icon:pn.tipoCambio},{name:"Gestionar Rubros",view:"rubros",icon:pn.rubrosManager},{name:"Gestionar Conceptos",view:"conceptos",icon:pn.conceptsManager},{name:"Editar Registro Diario",view:"entradas-contables",icon:pn.entradasContables},{name:"Registrar Nuevo Da",view:"crear-nuevo-dia",icon:pn.newDay},{name:"Exportar a Excel",view:"exportar-excel",icon:pn.excelExport},{name:"Precios",view:"activos",icon:pn.activos},{name:"Portfolios",view:"portfolios",icon:pn.portfolios}];return u.jsxs("div",{className:`transition-all duration-300 ease-in-out bg-white shadow-lg flex flex-col h-full border-r border-gray-200 ${s?"w-20":"w-64"}`,children:[u.jsx("div",{className:`p-4 flex items-center ${s?"justify-center":"justify-between"}`,children:u.jsx("button",{onClick:()=>o(!s),className:"p-2 rounded-full text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors duration-150",children:s?pn.expand:pn.collapse})}),u.jsx("nav",{className:"flex-1 px-3 py-4 space-y-2 overflow-y-auto",children:c.map(d=>u.jsxs("div",{className:`
              px-3 py-2 rounded-md transition-colors duration-150 ease-in-out cursor-pointer
              flex items-center space-x-3
              ${r===d.view?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-700"}
            `,onClick:()=>e(d.view),children:[u.jsx("div",{className:`flex-shrink-0 ${r===d.view?"text-indigo-600":"text-gray-500"}`,children:d.icon}),!s&&u.jsx("span",{className:"text-sm font-medium",children:d.name})]},d.view))}),u.jsx("div",{className:`p-4 border-t border-gray-200 ${s?"justify-center":""}`,children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-9 h-9 rounded-full bg-indigo-500 flex items-center justify-center text-white text-base font-medium flex-shrink-0",children:t?.email?.[0]?.toUpperCase()||"U"}),!s&&u.jsxs("div",{className:"ml-3 overflow-hidden",children:[u.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:t?.email}),u.jsx("button",{onClick:a,className:"text-xs text-gray-500 hover:text-gray-700 transition-colors duration-150 ease-in-out",children:"Cerrar sesin"})]})]})})]})}function G_(){const[r,e]=L.useState(null),[t,s]=L.useState({type:"dashboard"}),[o,a]=L.useState(!0),[c,d]=L.useState(null),[f,p]=L.useState({});L.useEffect(()=>{async function v(){const{data:{session:_}}=await ue.auth.getSession();e(_?.user||null),a(!1)}v();const{data:b}=ue.auth.onAuthStateChange((_,j)=>{e(j?.user||null)});return()=>{b?.unsubscribe()}},[]);const x=(v,b=null,_=null)=>{s({type:v,portfolioId:b,selectedCurrency:_})};if(o)return u.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:u.jsx("div",{className:"text-xl font-semibold text-gray-700",children:"Cargando..."})});if(!r)return u.jsx(lv,{});let y;switch(t.type){case"dashboard":y=u.jsx(im,{user:r,setCurrentView:x});break;case"estados-financieros":y=u.jsx(cv,{user:r,setCurrentView:x});break;case"tipo-cambio":y=u.jsx(uv,{user:r,setCurrentView:x});break;case"rubros":y=u.jsx(dv,{user:r,setCurrentView:x});break;case"conceptos-contables":y=u.jsx(hv,{user:r,setCurrentView:x});break;case"entradas-contables":y=u.jsx(fv,{user:r,setCurrentView:x});break;case"crear-nuevo-dia":y=u.jsx(mv,{user:r,setCurrentView:x});break;case"exportar-excel":y=u.jsx(pv,{user:r,setCurrentView:x});break;case"activos":y=u.jsx(gv,{user:r,setCurrentView:x,updateMessage:c,setUpdateMessage:d});break;case"portfolios":y=u.jsx(xv,{user:r,setCurrentView:x,updateMessage:c,setUpdateMessage:d,portfolioCurrencies:f,setPortfolioCurrencies:p});break;case"portfolio-detail":y=u.jsx(q_,{user:r,setCurrentView:x,portfolioId:t.portfolioId,selectedCurrency:t.selectedCurrency});break;default:y=u.jsx(im,{user:r,setCurrentView:x})}return u.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[u.jsx(K_,{currentView:t.type,setCurrentView:x,user:r}),u.jsx("div",{className:"flex-1 flex flex-col",children:y})]})}nx.createRoot(document.getElementById("root")).render(u.jsx(G_,{}));
